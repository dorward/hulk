/*! For license information please see app.js.LICENSE.txt */
(self.webpackChunkhulk=self.webpackChunkhulk||[]).push([[143],{988:(e,t,n)=>{"use strict";var r=n(745),i=n(294),a=n(688),o=n(798),l=n(935);let u=function(e){e()};const s=()=>u,c=i.createContext(null);function f(){return(0,i.useContext)(c)}let h=()=>{throw new Error("uSES not initialized!")};const d=(e,t)=>e===t;function p(e=c){const t=e===c?f:()=>(0,i.useContext)(e);return function(e,n=d){const{store:r,subscription:a,getServerState:o}=t(),l=h(a.addNestedSub,r.getState,o||r.getState,e,n);return(0,i.useDebugValue)(l),l}}const v=p();var m=n(679),y=n.n(m),g=n(864);const b={notify(){},get:()=>[]};const S="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement?i.useLayoutEffect:i.useEffect;let C=null;const w=function({store:e,context:t,children:n,serverState:r}){const a=(0,i.useMemo)((()=>{const t=function(e,t){let n,r=b;function i(){o.onStateChange&&o.onStateChange()}function a(){n||(n=t?t.addNestedSub(i):e.subscribe(i),r=function(){const e=s();let t=null,n=null;return{clear(){t=null,n=null},notify(){e((()=>{let e=t;for(;e;)e.callback(),e=e.next}))},get(){let e=[],n=t;for(;n;)e.push(n),n=n.next;return e},subscribe(e){let r=!0,i=n={callback:e,next:null,prev:n};return i.prev?i.prev.next=i:t=i,function(){r&&null!==t&&(r=!1,i.next?i.next.prev=i.prev:n=i.prev,i.prev?i.prev.next=i.next:t=i.next)}}}}())}const o={addNestedSub:function(e){return a(),r.subscribe(e)},notifyNestedSubs:function(){r.notify()},handleChangeWrapper:i,isSubscribed:function(){return Boolean(n)},trySubscribe:a,tryUnsubscribe:function(){n&&(n(),n=void 0,r.clear(),r=b)},getListeners:()=>r};return o}(e);return{store:e,subscription:t,getServerState:r?()=>r:void 0}}),[e,r]),o=(0,i.useMemo)((()=>e.getState()),[e]);S((()=>{const{subscription:t}=a;return t.onStateChange=t.notifyNestedSubs,t.trySubscribe(),o!==e.getState()&&t.notifyNestedSubs(),()=>{t.tryUnsubscribe(),t.onStateChange=void 0}}),[a,o]);const l=t||c;return i.createElement(l.Provider,{value:a},n)};function k(e=c){const t=e===c?f:()=>(0,i.useContext)(e);return function(){const{store:e}=t();return e}}const _=k();function E(e=c){const t=e===c?_:k(e);return function(){return t().dispatch}}const x=E();var P;(e=>{h=e})(o.useSyncExternalStoreWithSelector),(e=>{C=e})(a.useSyncExternalStore),P=l.unstable_batchedUpdates,u=P;var O=n(774),T=n.n(O);const A=function(e){function t(e,r,u,s,h){for(var d,p,v,m,S,w=0,k=0,_=0,E=0,x=0,I=0,F=v=d=0,L=0,D=0,j=0,M=0,V=u.length,B=V-1,z="",G="",U="",q="";L<V;){if(p=u.charCodeAt(L),L===B&&0!==k+E+_+w&&(0!==k&&(p=47===k?10:47),E=_=w=0,V++,B++),0===k+E+_+w){if(L===B&&(0<D&&(z=z.replace(f,"")),0<z.trim().length)){switch(p){case 32:case 9:case 59:case 13:case 10:break;default:z+=u.charAt(L)}p=59}switch(p){case 123:for(d=(z=z.trim()).charCodeAt(0),v=1,M=++L;L<V;){switch(p=u.charCodeAt(L)){case 123:v++;break;case 125:v--;break;case 47:switch(p=u.charCodeAt(L+1)){case 42:case 47:e:{for(F=L+1;F<B;++F)switch(u.charCodeAt(F)){case 47:if(42===p&&42===u.charCodeAt(F-1)&&L+2!==F){L=F+1;break e}break;case 10:if(47===p){L=F+1;break e}}L=F}}break;case 91:p++;case 40:p++;case 34:case 39:for(;L++<B&&u.charCodeAt(L)!==p;);}if(0===v)break;L++}if(v=u.substring(M,L),0===d&&(d=(z=z.replace(c,"").trim()).charCodeAt(0)),64===d){switch(0<D&&(z=z.replace(f,"")),p=z.charCodeAt(1)){case 100:case 109:case 115:case 45:D=r;break;default:D=N}if(M=(v=t(r,D,v,p,h+1)).length,0<R&&(S=l(3,v,D=n(N,z,j),r,O,P,M,p,h,s),z=D.join(""),void 0!==S&&0===(M=(v=S.trim()).length)&&(p=0,v="")),0<M)switch(p){case 115:z=z.replace(C,o);case 100:case 109:case 45:v=z+"{"+v+"}";break;case 107:v=(z=z.replace(y,"$1 $2"))+"{"+v+"}",v=1===A||2===A&&a("@"+v,3)?"@-webkit-"+v+"@"+v:"@"+v;break;default:v=z+v,112===s&&(G+=v,v="")}else v=""}else v=t(r,n(r,z,j),v,s,h+1);U+=v,v=j=D=F=d=0,z="",p=u.charCodeAt(++L);break;case 125:case 59:if(1<(M=(z=(0<D?z.replace(f,""):z).trim()).length))switch(0===F&&(d=z.charCodeAt(0),45===d||96<d&&123>d)&&(M=(z=z.replace(" ",":")).length),0<R&&void 0!==(S=l(1,z,r,e,O,P,G.length,s,h,s))&&0===(M=(z=S.trim()).length)&&(z="\0\0"),d=z.charCodeAt(0),p=z.charCodeAt(1),d){case 0:break;case 64:if(105===p||99===p){q+=z+u.charAt(L);break}default:58!==z.charCodeAt(M-1)&&(G+=i(z,d,p,z.charCodeAt(2)))}j=D=F=d=0,z="",p=u.charCodeAt(++L)}}switch(p){case 13:case 10:47===k?k=0:0===1+d&&107!==s&&0<z.length&&(D=1,z+="\0"),0<R*W&&l(0,z,r,e,O,P,G.length,s,h,s),P=1,O++;break;case 59:case 125:if(0===k+E+_+w){P++;break}default:switch(P++,m=u.charAt(L),p){case 9:case 32:if(0===E+w+k)switch(x){case 44:case 58:case 9:case 32:m="";break;default:32!==p&&(m=" ")}break;case 0:m="\\0";break;case 12:m="\\f";break;case 11:m="\\v";break;case 38:0===E+k+w&&(D=j=1,m="\f"+m);break;case 108:if(0===E+k+w+T&&0<F)switch(L-F){case 2:112===x&&58===u.charCodeAt(L-3)&&(T=x);case 8:111===I&&(T=I)}break;case 58:0===E+k+w&&(F=L);break;case 44:0===k+_+E+w&&(D=1,m+="\r");break;case 34:case 39:0===k&&(E=E===p?0:0===E?p:E);break;case 91:0===E+k+_&&w++;break;case 93:0===E+k+_&&w--;break;case 41:0===E+k+w&&_--;break;case 40:0===E+k+w&&(0===d&&(2*x+3*I==533||(d=1)),_++);break;case 64:0===k+_+E+w+F+v&&(v=1);break;case 42:case 47:if(!(0<E+w+_))switch(k){case 0:switch(2*p+3*u.charCodeAt(L+1)){case 235:k=47;break;case 220:M=L,k=42}break;case 42:47===p&&42===x&&M+2!==L&&(33===u.charCodeAt(M+2)&&(G+=u.substring(M,L+1)),m="",k=0)}}0===k&&(z+=m)}I=x,x=p,L++}if(0<(M=G.length)){if(D=r,0<R&&void 0!==(S=l(2,G,D,e,O,P,M,s,h,s))&&0===(G=S).length)return q+G+U;if(G=D.join(",")+"{"+G+"}",0!=A*T){switch(2!==A||a(G,2)||(T=0),T){case 111:G=G.replace(b,":-moz-$1")+G;break;case 112:G=G.replace(g,"::-webkit-input-$1")+G.replace(g,"::-moz-$1")+G.replace(g,":-ms-input-$1")+G}T=0}}return q+G+U}function n(e,t,n){var i=t.trim().split(v);t=i;var a=i.length,o=e.length;switch(o){case 0:case 1:var l=0;for(e=0===o?"":e[0]+" ";l<a;++l)t[l]=r(e,t[l],n).trim();break;default:var u=l=0;for(t=[];l<a;++l)for(var s=0;s<o;++s)t[u++]=r(e[s]+" ",i[l],n).trim()}return t}function r(e,t,n){var r=t.charCodeAt(0);switch(33>r&&(r=(t=t.trim()).charCodeAt(0)),r){case 38:return t.replace(m,"$1"+e.trim());case 58:return e.trim()+t.replace(m,"$1"+e.trim());default:if(0<1*n&&0<t.indexOf("\f"))return t.replace(m,(58===e.charCodeAt(0)?"":"$1")+e.trim())}return e+t}function i(e,t,n,r){var o=e+";",l=2*t+3*n+4*r;if(944===l){e=o.indexOf(":",9)+1;var u=o.substring(e,o.length-1).trim();return u=o.substring(0,e).trim()+u+";",1===A||2===A&&a(u,1)?"-webkit-"+u+u:u}if(0===A||2===A&&!a(o,1))return o;switch(l){case 1015:return 97===o.charCodeAt(10)?"-webkit-"+o+o:o;case 951:return 116===o.charCodeAt(3)?"-webkit-"+o+o:o;case 963:return 110===o.charCodeAt(5)?"-webkit-"+o+o:o;case 1009:if(100!==o.charCodeAt(4))break;case 969:case 942:return"-webkit-"+o+o;case 978:return"-webkit-"+o+"-moz-"+o+o;case 1019:case 983:return"-webkit-"+o+"-moz-"+o+"-ms-"+o+o;case 883:if(45===o.charCodeAt(8))return"-webkit-"+o+o;if(0<o.indexOf("image-set(",11))return o.replace(x,"$1-webkit-$2")+o;break;case 932:if(45===o.charCodeAt(4))switch(o.charCodeAt(5)){case 103:return"-webkit-box-"+o.replace("-grow","")+"-webkit-"+o+"-ms-"+o.replace("grow","positive")+o;case 115:return"-webkit-"+o+"-ms-"+o.replace("shrink","negative")+o;case 98:return"-webkit-"+o+"-ms-"+o.replace("basis","preferred-size")+o}return"-webkit-"+o+"-ms-"+o+o;case 964:return"-webkit-"+o+"-ms-flex-"+o+o;case 1023:if(99!==o.charCodeAt(8))break;return"-webkit-box-pack"+(u=o.substring(o.indexOf(":",15)).replace("flex-","").replace("space-between","justify"))+"-webkit-"+o+"-ms-flex-pack"+u+o;case 1005:return d.test(o)?o.replace(h,":-webkit-")+o.replace(h,":-moz-")+o:o;case 1e3:switch(t=(u=o.substring(13).trim()).indexOf("-")+1,u.charCodeAt(0)+u.charCodeAt(t)){case 226:u=o.replace(S,"tb");break;case 232:u=o.replace(S,"tb-rl");break;case 220:u=o.replace(S,"lr");break;default:return o}return"-webkit-"+o+"-ms-"+u+o;case 1017:if(-1===o.indexOf("sticky",9))break;case 975:switch(t=(o=e).length-10,l=(u=(33===o.charCodeAt(t)?o.substring(0,t):o).substring(e.indexOf(":",7)+1).trim()).charCodeAt(0)+(0|u.charCodeAt(7))){case 203:if(111>u.charCodeAt(8))break;case 115:o=o.replace(u,"-webkit-"+u)+";"+o;break;case 207:case 102:o=o.replace(u,"-webkit-"+(102<l?"inline-":"")+"box")+";"+o.replace(u,"-webkit-"+u)+";"+o.replace(u,"-ms-"+u+"box")+";"+o}return o+";";case 938:if(45===o.charCodeAt(5))switch(o.charCodeAt(6)){case 105:return u=o.replace("-items",""),"-webkit-"+o+"-webkit-box-"+u+"-ms-flex-"+u+o;case 115:return"-webkit-"+o+"-ms-flex-item-"+o.replace(k,"")+o;default:return"-webkit-"+o+"-ms-flex-line-pack"+o.replace("align-content","").replace(k,"")+o}break;case 973:case 989:if(45!==o.charCodeAt(3)||122===o.charCodeAt(4))break;case 931:case 953:if(!0===E.test(e))return 115===(u=e.substring(e.indexOf(":")+1)).charCodeAt(0)?i(e.replace("stretch","fill-available"),t,n,r).replace(":fill-available",":stretch"):o.replace(u,"-webkit-"+u)+o.replace(u,"-moz-"+u.replace("fill-",""))+o;break;case 962:if(o="-webkit-"+o+(102===o.charCodeAt(5)?"-ms-"+o:"")+o,211===n+r&&105===o.charCodeAt(13)&&0<o.indexOf("transform",10))return o.substring(0,o.indexOf(";",27)+1).replace(p,"$1-webkit-$2")+o}return o}function a(e,t){var n=e.indexOf(1===t?":":"{"),r=e.substring(0,3!==t?n:10);return n=e.substring(n+1,e.length-1),F(2!==t?r:r.replace(_,"$1"),n,t)}function o(e,t){var n=i(t,t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2));return n!==t+";"?n.replace(w," or ($1)").substring(4):"("+t+")"}function l(e,t,n,r,i,a,o,l,u,c){for(var f,h=0,d=t;h<R;++h)switch(f=I[h].call(s,e,d,n,r,i,a,o,l,u,c)){case void 0:case!1:case!0:case null:break;default:d=f}if(d!==t)return d}function u(e){return void 0!==(e=e.prefix)&&(F=null,e?"function"!=typeof e?A=1:(A=2,F=e):A=0),u}function s(e,n){var r=e;if(33>r.charCodeAt(0)&&(r=r.trim()),r=[r],0<R){var i=l(-1,n,r,r,O,P,0,0,0,0);void 0!==i&&"string"==typeof i&&(n=i)}var a=t(N,r,n,0,0);return 0<R&&void 0!==(i=l(-2,a,r,r,O,P,a.length,0,0,0))&&(a=i),T=0,P=O=1,a}var c=/^\0+/g,f=/[\0\r\f]/g,h=/: */g,d=/zoo|gra/,p=/([,: ])(transform)/g,v=/,\r+?/g,m=/([\t\r\n ])*\f?&/g,y=/@(k\w+)\s*(\S*)\s*/,g=/::(place)/g,b=/:(read-only)/g,S=/[svh]\w+-[tblr]{2}/,C=/\(\s*(.*)\s*\)/g,w=/([\s\S]*?);/g,k=/-self|flex-/g,_=/[^]*?(:[rp][el]a[\w-]+)[^]*/,E=/stretch|:\s*\w+\-(?:conte|avail)/,x=/([^-])(image-set\()/,P=1,O=1,T=0,A=1,N=[],I=[],R=0,F=null,W=0;return s.use=function e(t){switch(t){case void 0:case null:R=I.length=0;break;default:if("function"==typeof t)I[R++]=t;else if("object"==typeof t)for(var n=0,r=t.length;n<r;++n)e(t[n]);else W=0|!!t}return e},s.set=u,void 0!==e&&u(e),s},N={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},I=function(e){var t=Object.create(null);return function(n){return void 0===t[n]&&(t[n]=e(n)),t[n]}};var R=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/;const F=I((function(e){return R.test(e)||111===e.charCodeAt(0)&&110===e.charCodeAt(1)&&e.charCodeAt(2)<91}));function W(){return(W=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var L=function(e,t){for(var n=[e[0]],r=0,i=t.length;r<i;r+=1)n.push(t[r],e[r+1]);return n},D=function(e){return null!==e&&"object"==typeof e&&"[object Object]"===(e.toString?e.toString():Object.prototype.toString.call(e))&&!(0,g.typeOf)(e)},j=Object.freeze([]),M=Object.freeze({});function V(e){return"function"==typeof e}function B(e){return e.displayName||e.name||"Component"}function z(e){return e&&"string"==typeof e.styledComponentId}var G="undefined"!=typeof process&&(process.env.REACT_APP_SC_ATTR||process.env.SC_ATTR)||"data-styled",U="undefined"!=typeof window&&"HTMLElement"in window,q=Boolean("boolean"==typeof SC_DISABLE_SPEEDY?SC_DISABLE_SPEEDY:"undefined"!=typeof process&&void 0!==process.env.REACT_APP_SC_DISABLE_SPEEDY&&""!==process.env.REACT_APP_SC_DISABLE_SPEEDY?"false"!==process.env.REACT_APP_SC_DISABLE_SPEEDY&&process.env.REACT_APP_SC_DISABLE_SPEEDY:"undefined"!=typeof process&&void 0!==process.env.SC_DISABLE_SPEEDY&&""!==process.env.SC_DISABLE_SPEEDY&&"false"!==process.env.SC_DISABLE_SPEEDY&&process.env.SC_DISABLE_SPEEDY),H={};function $(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw new Error("An error occurred. See https://git.io/JUIaE#"+e+" for more information."+(n.length>0?" Args: "+n.join(", "):""))}var K=function(){function e(e){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=e}var t=e.prototype;return t.indexOfGroup=function(e){for(var t=0,n=0;n<e;n++)t+=this.groupSizes[n];return t},t.insertRules=function(e,t){if(e>=this.groupSizes.length){for(var n=this.groupSizes,r=n.length,i=r;e>=i;)(i<<=1)<0&&$(16,""+e);this.groupSizes=new Uint32Array(i),this.groupSizes.set(n),this.length=i;for(var a=r;a<i;a++)this.groupSizes[a]=0}for(var o=this.indexOfGroup(e+1),l=0,u=t.length;l<u;l++)this.tag.insertRule(o,t[l])&&(this.groupSizes[e]++,o++)},t.clearGroup=function(e){if(e<this.length){var t=this.groupSizes[e],n=this.indexOfGroup(e),r=n+t;this.groupSizes[e]=0;for(var i=n;i<r;i++)this.tag.deleteRule(n)}},t.getGroup=function(e){var t="";if(e>=this.length||0===this.groupSizes[e])return t;for(var n=this.groupSizes[e],r=this.indexOfGroup(e),i=r+n,a=r;a<i;a++)t+=this.tag.getRule(a)+"/*!sc*/\n";return t},e}(),J=new Map,Q=new Map,Y=1,X=function(e){if(J.has(e))return J.get(e);for(;Q.has(Y);)Y++;var t=Y++;return J.set(e,t),Q.set(t,e),t},Z=function(e){return Q.get(e)},ee=function(e,t){t>=Y&&(Y=t+1),J.set(e,t),Q.set(t,e)},te="style["+G+'][data-styled-version="5.3.5"]',ne=new RegExp("^"+G+'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)'),re=function(e,t,n){for(var r,i=n.split(","),a=0,o=i.length;a<o;a++)(r=i[a])&&e.registerName(t,r)},ie=function(e,t){for(var n=(t.textContent||"").split("/*!sc*/\n"),r=[],i=0,a=n.length;i<a;i++){var o=n[i].trim();if(o){var l=o.match(ne);if(l){var u=0|parseInt(l[1],10),s=l[2];0!==u&&(ee(s,u),re(e,s,l[3]),e.getTag().insertRules(u,r)),r.length=0}else r.push(o)}}},ae=function(){return"undefined"!=typeof window&&void 0!==window.__webpack_nonce__?window.__webpack_nonce__:null},oe=function(e){var t=document.head,n=e||t,r=document.createElement("style"),i=function(e){for(var t=e.childNodes,n=t.length;n>=0;n--){var r=t[n];if(r&&1===r.nodeType&&r.hasAttribute(G))return r}}(n),a=void 0!==i?i.nextSibling:null;r.setAttribute(G,"active"),r.setAttribute("data-styled-version","5.3.5");var o=ae();return o&&r.setAttribute("nonce",o),n.insertBefore(r,a),r},le=function(){function e(e){var t=this.element=oe(e);t.appendChild(document.createTextNode("")),this.sheet=function(e){if(e.sheet)return e.sheet;for(var t=document.styleSheets,n=0,r=t.length;n<r;n++){var i=t[n];if(i.ownerNode===e)return i}$(17)}(t),this.length=0}var t=e.prototype;return t.insertRule=function(e,t){try{return this.sheet.insertRule(t,e),this.length++,!0}catch(e){return!1}},t.deleteRule=function(e){this.sheet.deleteRule(e),this.length--},t.getRule=function(e){var t=this.sheet.cssRules[e];return void 0!==t&&"string"==typeof t.cssText?t.cssText:""},e}(),ue=function(){function e(e){var t=this.element=oe(e);this.nodes=t.childNodes,this.length=0}var t=e.prototype;return t.insertRule=function(e,t){if(e<=this.length&&e>=0){var n=document.createTextNode(t),r=this.nodes[e];return this.element.insertBefore(n,r||null),this.length++,!0}return!1},t.deleteRule=function(e){this.element.removeChild(this.nodes[e]),this.length--},t.getRule=function(e){return e<this.length?this.nodes[e].textContent:""},e}(),se=function(){function e(e){this.rules=[],this.length=0}var t=e.prototype;return t.insertRule=function(e,t){return e<=this.length&&(this.rules.splice(e,0,t),this.length++,!0)},t.deleteRule=function(e){this.rules.splice(e,1),this.length--},t.getRule=function(e){return e<this.length?this.rules[e]:""},e}(),ce=U,fe={isServer:!U,useCSSOMInjection:!q},he=function(){function e(e,t,n){void 0===e&&(e=M),void 0===t&&(t={}),this.options=W({},fe,{},e),this.gs=t,this.names=new Map(n),this.server=!!e.isServer,!this.server&&U&&ce&&(ce=!1,function(e){for(var t=document.querySelectorAll(te),n=0,r=t.length;n<r;n++){var i=t[n];i&&"active"!==i.getAttribute(G)&&(ie(e,i),i.parentNode&&i.parentNode.removeChild(i))}}(this))}e.registerId=function(e){return X(e)};var t=e.prototype;return t.reconstructWithOptions=function(t,n){return void 0===n&&(n=!0),new e(W({},this.options,{},t),this.gs,n&&this.names||void 0)},t.allocateGSInstance=function(e){return this.gs[e]=(this.gs[e]||0)+1},t.getTag=function(){return this.tag||(this.tag=(n=(t=this.options).isServer,r=t.useCSSOMInjection,i=t.target,e=n?new se(i):r?new le(i):new ue(i),new K(e)));var e,t,n,r,i},t.hasNameForId=function(e,t){return this.names.has(e)&&this.names.get(e).has(t)},t.registerName=function(e,t){if(X(e),this.names.has(e))this.names.get(e).add(t);else{var n=new Set;n.add(t),this.names.set(e,n)}},t.insertRules=function(e,t,n){this.registerName(e,t),this.getTag().insertRules(X(e),n)},t.clearNames=function(e){this.names.has(e)&&this.names.get(e).clear()},t.clearRules=function(e){this.getTag().clearGroup(X(e)),this.clearNames(e)},t.clearTag=function(){this.tag=void 0},t.toString=function(){return function(e){for(var t=e.getTag(),n=t.length,r="",i=0;i<n;i++){var a=Z(i);if(void 0!==a){var o=e.names.get(a),l=t.getGroup(i);if(o&&l&&o.size){var u=G+".g"+i+'[id="'+a+'"]',s="";void 0!==o&&o.forEach((function(e){e.length>0&&(s+=e+",")})),r+=""+l+u+'{content:"'+s+'"}/*!sc*/\n'}}}return r}(this)},e}(),de=/(a)(d)/gi,pe=function(e){return String.fromCharCode(e+(e>25?39:97))};function ve(e){var t,n="";for(t=Math.abs(e);t>52;t=t/52|0)n=pe(t%52)+n;return(pe(t%52)+n).replace(de,"$1-$2")}var me=function(e,t){for(var n=t.length;n;)e=33*e^t.charCodeAt(--n);return e},ye=function(e){return me(5381,e)};function ge(e){for(var t=0;t<e.length;t+=1){var n=e[t];if(V(n)&&!z(n))return!1}return!0}var be=ye("5.3.5"),Se=function(){function e(e,t,n){this.rules=e,this.staticRulesId="",this.isStatic=(void 0===n||n.isStatic)&&ge(e),this.componentId=t,this.baseHash=me(be,t),this.baseStyle=n,he.registerId(t)}return e.prototype.generateAndInjectStyles=function(e,t,n){var r=this.componentId,i=[];if(this.baseStyle&&i.push(this.baseStyle.generateAndInjectStyles(e,t,n)),this.isStatic&&!n.hash)if(this.staticRulesId&&t.hasNameForId(r,this.staticRulesId))i.push(this.staticRulesId);else{var a=je(this.rules,e,t,n).join(""),o=ve(me(this.baseHash,a)>>>0);if(!t.hasNameForId(r,o)){var l=n(a,"."+o,void 0,r);t.insertRules(r,o,l)}i.push(o),this.staticRulesId=o}else{for(var u=this.rules.length,s=me(this.baseHash,n.hash),c="",f=0;f<u;f++){var h=this.rules[f];if("string"==typeof h)c+=h;else if(h){var d=je(h,e,t,n),p=Array.isArray(d)?d.join(""):d;s=me(s,p+f),c+=p}}if(c){var v=ve(s>>>0);if(!t.hasNameForId(r,v)){var m=n(c,"."+v,void 0,r);t.insertRules(r,v,m)}i.push(v)}}return i.join(" ")},e}(),Ce=/^\s*\/\/.*$/gm,we=[":","[",".","#"];function ke(e){var t,n,r,i,a=void 0===e?M:e,o=a.options,l=void 0===o?M:o,u=a.plugins,s=void 0===u?j:u,c=new A(l),f=[],h=function(e){function t(t){if(t)try{e(t+"}")}catch(e){}}return function(n,r,i,a,o,l,u,s,c,f){switch(n){case 1:if(0===c&&64===r.charCodeAt(0))return e(r+";"),"";break;case 2:if(0===s)return r+"/*|*/";break;case 3:switch(s){case 102:case 112:return e(i[0]+r),"";default:return r+(0===f?"/*|*/":"")}case-2:r.split("/*|*/}").forEach(t)}}}((function(e){f.push(e)})),d=function(e,r,a){return 0===r&&-1!==we.indexOf(a[n.length])||a.match(i)?e:"."+t};function p(e,a,o,l){void 0===l&&(l="&");var u=e.replace(Ce,""),s=a&&o?o+" "+a+" { "+u+" }":u;return t=l,n=a,r=new RegExp("\\"+n+"\\b","g"),i=new RegExp("(\\"+n+"\\b){2,}"),c(o||!a?"":a,s)}return c.use([].concat(s,[function(e,t,i){2===e&&i.length&&i[0].lastIndexOf(n)>0&&(i[0]=i[0].replace(r,d))},h,function(e){if(-2===e){var t=f;return f=[],t}}])),p.hash=s.length?s.reduce((function(e,t){return t.name||$(15),me(e,t.name)}),5381).toString():"",p}var _e=i.createContext(),Ee=(_e.Consumer,i.createContext()),xe=(Ee.Consumer,new he),Pe=ke();function Oe(){return(0,i.useContext)(_e)||xe}function Te(){return(0,i.useContext)(Ee)||Pe}function Ae(e){var t=(0,i.useState)(e.stylisPlugins),n=t[0],r=t[1],a=Oe(),o=(0,i.useMemo)((function(){var t=a;return e.sheet?t=e.sheet:e.target&&(t=t.reconstructWithOptions({target:e.target},!1)),e.disableCSSOMInjection&&(t=t.reconstructWithOptions({useCSSOMInjection:!1})),t}),[e.disableCSSOMInjection,e.sheet,e.target]),l=(0,i.useMemo)((function(){return ke({options:{prefix:!e.disableVendorPrefixes},plugins:n})}),[e.disableVendorPrefixes,n]);return(0,i.useEffect)((function(){T()(n,e.stylisPlugins)||r(e.stylisPlugins)}),[e.stylisPlugins]),i.createElement(_e.Provider,{value:o},i.createElement(Ee.Provider,{value:l},e.children))}var Ne=function(){function e(e,t){var n=this;this.inject=function(e,t){void 0===t&&(t=Pe);var r=n.name+t.hash;e.hasNameForId(n.id,r)||e.insertRules(n.id,r,t(n.rules,r,"@keyframes"))},this.toString=function(){return $(12,String(n.name))},this.name=e,this.id="sc-keyframes-"+e,this.rules=t}return e.prototype.getName=function(e){return void 0===e&&(e=Pe),this.name+e.hash},e}(),Ie=/([A-Z])/,Re=/([A-Z])/g,Fe=/^ms-/,We=function(e){return"-"+e.toLowerCase()};function Le(e){return Ie.test(e)?e.replace(Re,We).replace(Fe,"-ms-"):e}var De=function(e){return null==e||!1===e||""===e};function je(e,t,n,r){if(Array.isArray(e)){for(var i,a=[],o=0,l=e.length;o<l;o+=1)""!==(i=je(e[o],t,n,r))&&(Array.isArray(i)?a.push.apply(a,i):a.push(i));return a}return De(e)?"":z(e)?"."+e.styledComponentId:V(e)?"function"!=typeof(u=e)||u.prototype&&u.prototype.isReactComponent||!t?e:je(e(t),t,n,r):e instanceof Ne?n?(e.inject(n,r),e.getName(r)):e:D(e)?function e(t,n){var r,i,a=[];for(var o in t)t.hasOwnProperty(o)&&!De(t[o])&&(Array.isArray(t[o])&&t[o].isCss||V(t[o])?a.push(Le(o)+":",t[o],";"):D(t[o])?a.push.apply(a,e(t[o],o)):a.push(Le(o)+": "+(r=o,(null==(i=t[o])||"boolean"==typeof i||""===i?"":"number"!=typeof i||0===i||r in N?String(i).trim():i+"px")+";")));return n?[n+" {"].concat(a,["}"]):a}(e):e.toString();var u}var Me=function(e){return Array.isArray(e)&&(e.isCss=!0),e};function Ve(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return V(e)||D(e)?Me(je(L(j,[e].concat(n)))):0===n.length&&1===e.length&&"string"==typeof e[0]?e:Me(je(L(e,n)))}new Set;var Be=function(e,t,n){return void 0===n&&(n=M),e.theme!==n.theme&&e.theme||t||n.theme},ze=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,Ge=/(^-|-$)/g;function Ue(e){return e.replace(ze,"-").replace(Ge,"")}var qe=function(e){return ve(ye(e)>>>0)};function He(e){return"string"==typeof e&&!0}var $e=function(e){return"function"==typeof e||"object"==typeof e&&null!==e&&!Array.isArray(e)},Ke=function(e){return"__proto__"!==e&&"constructor"!==e&&"prototype"!==e};function Je(e,t,n){var r=e[n];$e(t)&&$e(r)?Qe(r,t):e[n]=t}function Qe(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];if($e(o))for(var l in o)Ke(l)&&Je(e,o[l],l)}return e}var Ye=i.createContext();function Xe(e){var t=(0,i.useContext)(Ye),n=(0,i.useMemo)((function(){return function(e,t){return e?V(e)?e(t):Array.isArray(e)||"object"!=typeof e?$(8):t?W({},t,{},e):e:$(14)}(e.theme,t)}),[e.theme,t]);return e.children?i.createElement(Ye.Provider,{value:n},e.children):null}Ye.Consumer;var Ze={};function et(e,t,n){var r=z(e),a=!He(e),o=t.attrs,l=void 0===o?j:o,u=t.componentId,s=void 0===u?function(e,t){var n="string"!=typeof e?"sc":Ue(e);Ze[n]=(Ze[n]||0)+1;var r=n+"-"+qe("5.3.5"+n+Ze[n]);return t?t+"-"+r:r}(t.displayName,t.parentComponentId):u,c=t.displayName,f=void 0===c?function(e){return He(e)?"styled."+e:"Styled("+B(e)+")"}(e):c,h=t.displayName&&t.componentId?Ue(t.displayName)+"-"+t.componentId:t.componentId||s,d=r&&e.attrs?Array.prototype.concat(e.attrs,l).filter(Boolean):l,p=t.shouldForwardProp;r&&e.shouldForwardProp&&(p=t.shouldForwardProp?function(n,r,i){return e.shouldForwardProp(n,r,i)&&t.shouldForwardProp(n,r,i)}:e.shouldForwardProp);var v,m=new Se(n,h,r?e.componentStyle:void 0),g=m.isStatic&&0===l.length,b=function(e,t){return function(e,t,n,r){var a=e.attrs,o=e.componentStyle,l=e.defaultProps,u=e.foldedComponentIds,s=e.shouldForwardProp,c=e.styledComponentId,f=e.target,h=function(e,t,n){void 0===e&&(e=M);var r=W({},t,{theme:e}),i={};return n.forEach((function(e){var t,n,a,o=e;for(t in V(o)&&(o=o(r)),o)r[t]=i[t]="className"===t?(n=i[t],a=o[t],n&&a?n+" "+a:n||a):o[t]})),[r,i]}(Be(t,(0,i.useContext)(Ye),l)||M,t,a),d=h[0],p=h[1],v=function(e,t,n,r){var i=Oe(),a=Te();return t?e.generateAndInjectStyles(M,i,a):e.generateAndInjectStyles(n,i,a)}(o,r,d),m=n,y=p.$as||t.$as||p.as||t.as||f,g=He(y),b=p!==t?W({},t,{},p):t,S={};for(var C in b)"$"!==C[0]&&"as"!==C&&("forwardedAs"===C?S.as=b[C]:(s?s(C,F,y):!g||F(C))&&(S[C]=b[C]));return t.style&&p.style!==t.style&&(S.style=W({},t.style,{},p.style)),S.className=Array.prototype.concat(u,c,v!==c?v:null,t.className,p.className).filter(Boolean).join(" "),S.ref=m,(0,i.createElement)(y,S)}(v,e,t,g)};return b.displayName=f,(v=i.forwardRef(b)).attrs=d,v.componentStyle=m,v.displayName=f,v.shouldForwardProp=p,v.foldedComponentIds=r?Array.prototype.concat(e.foldedComponentIds,e.styledComponentId):j,v.styledComponentId=h,v.target=r?e.target:e,v.withComponent=function(e){var r=t.componentId,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(t,["componentId"]),a=r&&r+"-"+(He(e)?e:Ue(B(e)));return et(e,W({},i,{attrs:d,componentId:a}),n)},Object.defineProperty(v,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(t){this._foldedDefaultProps=r?Qe({},e.defaultProps,t):t}}),v.toString=function(){return"."+v.styledComponentId},a&&y()(v,e,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0,withComponent:!0}),v}var tt=function(e){return function e(t,n,r){if(void 0===r&&(r=M),!(0,g.isValidElementType)(n))return $(1,String(n));var i=function(){return t(n,r,Ve.apply(void 0,arguments))};return i.withConfig=function(i){return e(t,n,W({},r,{},i))},i.attrs=function(i){return e(t,n,W({},r,{attrs:Array.prototype.concat(r.attrs,i).filter(Boolean)}))},i}(et,e)};["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","textPath","tspan"].forEach((function(e){tt[e]=tt(e)}));var nt=function(){function e(e,t){this.rules=e,this.componentId=t,this.isStatic=ge(e),he.registerId(this.componentId+1)}var t=e.prototype;return t.createStyles=function(e,t,n,r){var i=r(je(this.rules,t,n,r).join(""),""),a=this.componentId+e;n.insertRules(a,a,i)},t.removeStyles=function(e,t){t.clearRules(this.componentId+e)},t.renderStyles=function(e,t,n,r){e>2&&he.registerId(this.componentId+e),this.removeStyles(e,n),this.createStyles(e,t,n,r)},e}();!function(){var e=function(){var e=this;this._emitSheetCSS=function(){var t=e.instance.toString();if(!t)return"";var n=ae();return"<style "+[n&&'nonce="'+n+'"',G+'="true"','data-styled-version="5.3.5"'].filter(Boolean).join(" ")+">"+t+"</style>"},this.getStyleTags=function(){return e.sealed?$(2):e._emitSheetCSS()},this.getStyleElement=function(){var t;if(e.sealed)return $(2);var n=((t={})[G]="",t["data-styled-version"]="5.3.5",t.dangerouslySetInnerHTML={__html:e.instance.toString()},t),r=ae();return r&&(n.nonce=r),[i.createElement("style",W({},n,{key:"sc-0-0"}))]},this.seal=function(){e.sealed=!0},this.instance=new he({isServer:!0}),this.sealed=!1}.prototype;e.collectStyles=function(e){return this.sealed?$(2):i.createElement(Ae,{sheet:this.instance},e)},e.interleaveWithNodeStream=function(e){return $(3)}}();const rt=tt;var it=n(893);function at(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}const ot=function(){var e=v((function(e){return e.state.character})).attributes;return(0,it.jsx)("div",{children:Object.entries(e).filter((function(e){return e[1]>0})).map((function(e){var t=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a=[],o=!0,l=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){l=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(l)throw i}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return at(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?at(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(e,2),n=t[0],r=t[1];return(0,it.jsxs)("p",{children:[n,": ",r]})}))})};var lt,ut;function st(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var ct=rt.div(lt||(lt=st(["\n\t&:not(:empty) {\n\t\tborder: solid "," 1px;\n\t}\n\tpadding: 3px;\n\tdisplay: flex;\n\tjustify-content: center;\n\talign-items: center;\n\twidth: 10rem;\n\tmargin: auto;\n"])),(function(e){return e.theme.lightBold})),ft=rt.div(ut||(ut=st(["\n\tfont-size: 2rem;\n\ttext-align: center;\n\tmargin: 3px;\n\twidth: 4rem;\n\tborder: solid "," 1px;\n\tbackground: ",";\n\tcolor: ",";\n"])),(function(e){return e.theme.lightBold}),(function(e){return 6===e.size?"white":"black"}),(function(e){return 6===e.size?"black":"white"}));const ht=function(){var e=v((function(e){return e.state.dice})),t=[{size:6,value:e.a},{size:6,value:e.b},{size:3,value:e.dThree}];return(0,it.jsx)(ct,{children:t.filter((function(e){return e.value>0})).map((function(e,t){var n=e.size,r=e.value;return(0,it.jsx)(ft,{size:n,children:r},t)}))})};var dt,pt,vt;const mt=rt.div(dt||(pt=["\n\tflex: 1 1 auto;\n"],vt||(vt=pt.slice(0)),dt=Object.freeze(Object.defineProperties(pt,{raw:{value:Object.freeze(vt)}}))));function yt(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Error("[Immer] minified error nr: "+e+(n.length?" "+n.map((function(e){return"'"+e+"'"})).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function gt(e){return!!e&&!!e[an]}function bt(e){return!!e&&(function(e){if(!e||"object"!=typeof e)return!1;var t=Object.getPrototypeOf(e);if(null===t)return!0;var n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object||"function"==typeof n&&Function.toString.call(n)===on}(e)||Array.isArray(e)||!!e[rn]||!!e.constructor[rn]||Et(e)||xt(e))}function St(e,t,n){void 0===n&&(n=!1),0===Ct(e)?(n?Object.keys:ln)(e).forEach((function(r){n&&"symbol"==typeof r||t(r,e[r],e)})):e.forEach((function(n,r){return t(r,n,e)}))}function Ct(e){var t=e[an];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:Et(e)?2:xt(e)?3:0}function wt(e,t){return 2===Ct(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function kt(e,t,n){var r=Ct(e);2===r?e.set(t,n):3===r?(e.delete(t),e.add(n)):e[t]=n}function _t(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}function Et(e){return Zt&&e instanceof Map}function xt(e){return en&&e instanceof Set}function Pt(e){return e.o||e.t}function Ot(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=un(e);delete t[an];for(var n=ln(t),r=0;r<n.length;r++){var i=n[r],a=t[i];!1===a.writable&&(a.writable=!0,a.configurable=!0),(a.get||a.set)&&(t[i]={configurable:!0,writable:!0,enumerable:a.enumerable,value:e[i]})}return Object.create(Object.getPrototypeOf(e),t)}function Tt(e,t){return void 0===t&&(t=!1),Nt(e)||gt(e)||!bt(e)||(Ct(e)>1&&(e.set=e.add=e.clear=e.delete=At),Object.freeze(e),t&&St(e,(function(e,t){return Tt(t,!0)}),!0)),e}function At(){yt(2)}function Nt(e){return null==e||"object"!=typeof e||Object.isFrozen(e)}function It(e){var t=sn[e];return t||yt(18,e),t}function Rt(){return Yt}function Ft(e,t){t&&(It("Patches"),e.u=[],e.s=[],e.v=t)}function Wt(e){Lt(e),e.p.forEach(jt),e.p=null}function Lt(e){e===Yt&&(Yt=e.l)}function Dt(e){return Yt={p:[],l:Yt,h:e,m:!0,_:0}}function jt(e){var t=e[an];0===t.i||1===t.i?t.j():t.O=!0}function Mt(e,t){t._=t.p.length;var n=t.p[0],r=void 0!==e&&e!==n;return t.h.g||It("ES5").S(t,e,r),r?(n[an].P&&(Wt(t),yt(4)),bt(e)&&(e=Vt(t,e),t.l||zt(t,e)),t.u&&It("Patches").M(n[an].t,e,t.u,t.s)):e=Vt(t,n,[]),Wt(t),t.u&&t.v(t.u,t.s),e!==nn?e:void 0}function Vt(e,t,n){if(Nt(t))return t;var r=t[an];if(!r)return St(t,(function(i,a){return Bt(e,r,t,i,a,n)}),!0),t;if(r.A!==e)return t;if(!r.P)return zt(e,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var i=4===r.i||5===r.i?r.o=Ot(r.k):r.o;St(3===r.i?new Set(i):i,(function(t,a){return Bt(e,r,i,t,a,n)})),zt(e,i,!1),n&&e.u&&It("Patches").R(r,n,e.u,e.s)}return r.o}function Bt(e,t,n,r,i,a){if(gt(i)){var o=Vt(e,i,a&&t&&3!==t.i&&!wt(t.D,r)?a.concat(r):void 0);if(kt(n,r,o),!gt(o))return;e.m=!1}if(bt(i)&&!Nt(i)){if(!e.h.F&&e._<1)return;Vt(e,i),t&&t.A.l||zt(e,i)}}function zt(e,t,n){void 0===n&&(n=!1),e.h.F&&e.m&&Tt(t,n)}function Gt(e,t){var n=e[an];return(n?Pt(n):e)[t]}function Ut(e,t){if(t in e)for(var n=Object.getPrototypeOf(e);n;){var r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Object.getPrototypeOf(n)}}function qt(e){e.P||(e.P=!0,e.l&&qt(e.l))}function Ht(e){e.o||(e.o=Ot(e.t))}function $t(e,t,n){var r=Et(t)?It("MapSet").N(t,n):xt(t)?It("MapSet").T(t,n):e.g?function(e,t){var n=Array.isArray(e),r={i:n?1:0,A:t?t.A:Rt(),P:!1,I:!1,D:{},l:t,t:e,k:null,o:null,j:null,C:!1},i=r,a=cn;n&&(i=[r],a=fn);var o=Proxy.revocable(i,a),l=o.revoke,u=o.proxy;return r.k=u,r.j=l,u}(t,n):It("ES5").J(t,n);return(n?n.A:Rt()).p.push(r),r}function Kt(e){return gt(e)||yt(22,e),function e(t){if(!bt(t))return t;var n,r=t[an],i=Ct(t);if(r){if(!r.P&&(r.i<4||!It("ES5").K(r)))return r.t;r.I=!0,n=Jt(t,i),r.I=!1}else n=Jt(t,i);return St(n,(function(t,i){r&&function(e,t){return 2===Ct(e)?e.get(t):e[t]}(r.t,t)===i||kt(n,t,e(i))})),3===i?new Set(n):n}(e)}function Jt(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return Ot(e)}var Qt,Yt,Xt="undefined"!=typeof Symbol&&"symbol"==typeof Symbol("x"),Zt="undefined"!=typeof Map,en="undefined"!=typeof Set,tn="undefined"!=typeof Proxy&&void 0!==Proxy.revocable&&"undefined"!=typeof Reflect,nn=Xt?Symbol.for("immer-nothing"):((Qt={})["immer-nothing"]=!0,Qt),rn=Xt?Symbol.for("immer-draftable"):"__$immer_draftable",an=Xt?Symbol.for("immer-state"):"__$immer_state",on=("undefined"!=typeof Symbol&&Symbol.iterator,""+Object.prototype.constructor),ln="undefined"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:void 0!==Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,un=Object.getOwnPropertyDescriptors||function(e){var t={};return ln(e).forEach((function(n){t[n]=Object.getOwnPropertyDescriptor(e,n)})),t},sn={},cn={get:function(e,t){if(t===an)return e;var n=Pt(e);if(!wt(n,t))return function(e,t,n){var r,i=Ut(t,n);return i?"value"in i?i.value:null===(r=i.get)||void 0===r?void 0:r.call(e.k):void 0}(e,n,t);var r=n[t];return e.I||!bt(r)?r:r===Gt(e.t,t)?(Ht(e),e.o[t]=$t(e.A.h,r,e)):r},has:function(e,t){return t in Pt(e)},ownKeys:function(e){return Reflect.ownKeys(Pt(e))},set:function(e,t,n){var r=Ut(Pt(e),t);if(null==r?void 0:r.set)return r.set.call(e.k,n),!0;if(!e.P){var i=Gt(Pt(e),t),a=null==i?void 0:i[an];if(a&&a.t===n)return e.o[t]=n,e.D[t]=!1,!0;if(_t(n,i)&&(void 0!==n||wt(e.t,t)))return!0;Ht(e),qt(e)}return e.o[t]===n&&"number"!=typeof n&&(void 0!==n||t in e.o)||(e.o[t]=n,e.D[t]=!0,!0)},deleteProperty:function(e,t){return void 0!==Gt(e.t,t)||t in e.t?(e.D[t]=!1,Ht(e),qt(e)):delete e.D[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var n=Pt(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r?{writable:!0,configurable:1!==e.i||"length"!==t,enumerable:r.enumerable,value:n[t]}:r},defineProperty:function(){yt(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){yt(12)}},fn={};St(cn,(function(e,t){fn[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}})),fn.deleteProperty=function(e,t){return fn.set.call(this,e,t,void 0)},fn.set=function(e,t,n){return cn.set.call(this,e[0],t,n,e[0])};var hn=function(){function e(e){var t=this;this.g=tn,this.F=!0,this.produce=function(e,n,r){if("function"==typeof e&&"function"!=typeof n){var i=n;n=e;var a=t;return function(e){var t=this;void 0===e&&(e=i);for(var r=arguments.length,o=Array(r>1?r-1:0),l=1;l<r;l++)o[l-1]=arguments[l];return a.produce(e,(function(e){var r;return(r=n).call.apply(r,[t,e].concat(o))}))}}var o;if("function"!=typeof n&&yt(6),void 0!==r&&"function"!=typeof r&&yt(7),bt(e)){var l=Dt(t),u=$t(t,e,void 0),s=!0;try{o=n(u),s=!1}finally{s?Wt(l):Lt(l)}return"undefined"!=typeof Promise&&o instanceof Promise?o.then((function(e){return Ft(l,r),Mt(e,l)}),(function(e){throw Wt(l),e})):(Ft(l,r),Mt(o,l))}if(!e||"object"!=typeof e){if(void 0===(o=n(e))&&(o=e),o===nn&&(o=void 0),t.F&&Tt(o,!0),r){var c=[],f=[];It("Patches").M(e,o,c,f),r(c,f)}return o}yt(21,e)},this.produceWithPatches=function(e,n){if("function"==typeof e)return function(n){for(var r=arguments.length,i=Array(r>1?r-1:0),a=1;a<r;a++)i[a-1]=arguments[a];return t.produceWithPatches(n,(function(t){return e.apply(void 0,[t].concat(i))}))};var r,i,a=t.produce(e,n,(function(e,t){r=e,i=t}));return"undefined"!=typeof Promise&&a instanceof Promise?a.then((function(e){return[e,r,i]})):[a,r,i]},"boolean"==typeof(null==e?void 0:e.useProxies)&&this.setUseProxies(e.useProxies),"boolean"==typeof(null==e?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze)}var t=e.prototype;return t.createDraft=function(e){bt(e)||yt(8),gt(e)&&(e=Kt(e));var t=Dt(this),n=$t(this,e,void 0);return n[an].C=!0,Lt(t),n},t.finishDraft=function(e,t){var n=(e&&e[an]).A;return Ft(n,t),Mt(void 0,n)},t.setAutoFreeze=function(e){this.F=e},t.setUseProxies=function(e){e&&!tn&&yt(20),this.g=e},t.applyPatches=function(e,t){var n;for(n=t.length-1;n>=0;n--){var r=t[n];if(0===r.path.length&&"replace"===r.op){e=r.value;break}}n>-1&&(t=t.slice(n+1));var i=It("Patches").$;return gt(e)?i(e,t):this.produce(e,(function(e){return i(e,t)}))},e}(),dn=new hn,pn=dn.produce;dn.produceWithPatches.bind(dn),dn.setAutoFreeze.bind(dn),dn.setUseProxies.bind(dn),dn.applyPatches.bind(dn),dn.createDraft.bind(dn),dn.finishDraft.bind(dn);const vn=pn;function mn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function yn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function gn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?yn(Object(n),!0).forEach((function(t){mn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function bn(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var Sn="function"==typeof Symbol&&Symbol.observable||"@@observable",Cn=function(){return Math.random().toString(36).substring(7).split("").join(".")},wn={INIT:"@@redux/INIT"+Cn(),REPLACE:"@@redux/REPLACE"+Cn(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+Cn()}};function kn(e){if("object"!=typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function _n(e,t,n){var r;if("function"==typeof t&&"function"==typeof n||"function"==typeof n&&"function"==typeof arguments[3])throw new Error(bn(0));if("function"==typeof t&&void 0===n&&(n=t,t=void 0),void 0!==n){if("function"!=typeof n)throw new Error(bn(1));return n(_n)(e,t)}if("function"!=typeof e)throw new Error(bn(2));var i=e,a=t,o=[],l=o,u=!1;function s(){l===o&&(l=o.slice())}function c(){if(u)throw new Error(bn(3));return a}function f(e){if("function"!=typeof e)throw new Error(bn(4));if(u)throw new Error(bn(5));var t=!0;return s(),l.push(e),function(){if(t){if(u)throw new Error(bn(6));t=!1,s();var n=l.indexOf(e);l.splice(n,1),o=null}}}function h(e){if(!kn(e))throw new Error(bn(7));if(void 0===e.type)throw new Error(bn(8));if(u)throw new Error(bn(9));try{u=!0,a=i(a,e)}finally{u=!1}for(var t=o=l,n=0;n<t.length;n++)(0,t[n])();return e}function d(e){if("function"!=typeof e)throw new Error(bn(10));i=e,h({type:wn.REPLACE})}function p(){var e,t=f;return(e={subscribe:function(e){if("object"!=typeof e||null===e)throw new Error(bn(11));function n(){e.next&&e.next(c())}return n(),{unsubscribe:t(n)}}})[Sn]=function(){return this},e}return h({type:wn.INIT}),(r={dispatch:h,subscribe:f,getState:c,replaceReducer:d})[Sn]=p,r}function En(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce((function(e,t){return function(){return e(t.apply(void 0,arguments))}}))}function xn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return function(){var n=e.apply(void 0,arguments),r=function(){throw new Error(bn(15))},i={getState:n.getState,dispatch:function(){return r.apply(void 0,arguments)}},a=t.map((function(e){return e(i)}));return r=En.apply(void 0,a)(n.dispatch),gn(gn({},n),{},{dispatch:r})}}}function Pn(e){return function(t){var n=t.dispatch,r=t.getState;return function(t){return function(i){return"function"==typeof i?i(n,r,e):t(i)}}}}var On=Pn();On.withExtraArgument=Pn;const Tn=On;var An,Nn=(An=function(e,t){return An=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},An(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}An(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),In=function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e},Rn=Object.defineProperty,Fn=(Object.defineProperties,Object.getOwnPropertyDescriptors,Object.getOwnPropertySymbols),Wn=Object.prototype.hasOwnProperty,Ln=Object.prototype.propertyIsEnumerable,Dn=function(e,t,n){return t in e?Rn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},jn=function(e,t){for(var n in t||(t={}))Wn.call(t,n)&&Dn(e,n,t[n]);if(Fn)for(var r=0,i=Fn(t);r<i.length;r++)n=i[r],Ln.call(t,n)&&Dn(e,n,t[n]);return e},Mn="undefined"!=typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(0!==arguments.length)return"object"==typeof arguments[0]?En:En.apply(null,arguments)};"undefined"!=typeof window&&window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__;var Vn=function(e){function t(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=e.apply(this,n)||this;return Object.setPrototypeOf(i,t.prototype),i}return Nn(t,e),Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.prototype.concat.apply(this,t)},t.prototype.prepend=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return 1===e.length&&Array.isArray(e[0])?new(t.bind.apply(t,In([void 0],e[0].concat(this)))):new(t.bind.apply(t,In([void 0],e.concat(this))))},t}(Array);function Bn(e,t){function n(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];if(t){var i=t.apply(void 0,n);if(!i)throw new Error("prepareAction did not return an object");return jn(jn({type:e,payload:i.payload},"meta"in i&&{meta:i.meta}),"error"in i&&{error:i.error})}return{type:e,payload:n[0]}}return n.toString=function(){return""+e},n.type=e,n.match=function(t){return t.type===e},n}function zn(e){var t,n={},r=[],i={addCase:function(e,t){var r="string"==typeof e?e:e.type;if(r in n)throw new Error("addCase cannot be called with two reducers for the same action type");return n[r]=t,i},addMatcher:function(e,t){return r.push({matcher:e,reducer:t}),i},addDefaultCase:function(e){return t=e,i}};return e(i),[n,r,t]}Object.assign;var Gn="listenerMiddleware";function Un(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function qn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Un(Object(n),!0).forEach((function(t){Hn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Un(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Hn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Bn(Gn+"/add"),Bn(Gn+"/removeAll"),Bn(Gn+"/remove"),function(){function e(e,t){var n=i[e];return n?n.enumerable=t:i[e]=n={configurable:!0,enumerable:t,get:function(){var t=this[an];return cn.get(t,e)},set:function(t){var n=this[an];cn.set(n,e,t)}},n}function t(e){for(var t=e.length-1;t>=0;t--){var i=e[t][an];if(!i.P)switch(i.i){case 5:r(i)&&qt(i);break;case 4:n(i)&&qt(i)}}}function n(e){for(var t=e.t,n=e.k,r=ln(n),i=r.length-1;i>=0;i--){var a=r[i];if(a!==an){var o=t[a];if(void 0===o&&!wt(t,a))return!0;var l=n[a],u=l&&l[an];if(u?u.t!==o:!_t(l,o))return!0}}var s=!!t[an];return r.length!==ln(t).length+(s?0:1)}function r(e){var t=e.k;if(t.length!==e.t.length)return!0;var n=Object.getOwnPropertyDescriptor(t,t.length-1);if(n&&!n.get)return!0;for(var r=0;r<t.length;r++)if(!t.hasOwnProperty(r))return!0;return!1}var i={};!function(e,t){sn[e]||(sn[e]=t)}("ES5",{J:function(t,n){var r=Array.isArray(t),i=function(t,n){if(t){for(var r=Array(n.length),i=0;i<n.length;i++)Object.defineProperty(r,""+i,e(i,!0));return r}var a=un(n);delete a[an];for(var o=ln(a),l=0;l<o.length;l++){var u=o[l];a[u]=e(u,t||!!a[u].enumerable)}return Object.create(Object.getPrototypeOf(n),a)}(r,t),a={i:r?5:4,A:n?n.A:Rt(),P:!1,I:!1,D:{},l:n,t,k:i,o:null,O:!1,C:!1};return Object.defineProperty(i,an,{value:a,writable:!0}),i},S:function(e,n,i){i?gt(n)&&n[an].A===e&&t(e.p):(e.u&&function e(t){if(t&&"object"==typeof t){var n=t[an];if(n){var i=n.t,a=n.k,o=n.D,l=n.i;if(4===l)St(a,(function(t){t!==an&&(void 0!==i[t]||wt(i,t)?o[t]||e(a[t]):(o[t]=!0,qt(n)))})),St(i,(function(e){void 0!==a[e]||wt(a,e)||(o[e]=!1,qt(n))}));else if(5===l){if(r(n)&&(qt(n),o.length=!0),a.length<i.length)for(var u=a.length;u<i.length;u++)o[u]=!1;else for(var s=i.length;s<a.length;s++)o[s]=!0;for(var c=Math.min(a.length,i.length),f=0;f<c;f++)a.hasOwnProperty(f)||(o[f]=!0),void 0===o[f]&&e(a[f])}}}}(e.p[0]),t(e.p))},K:function(e){return 4===e.i?n(e):r(e)}})}();var $n=function(e){var t=e.name;if(!t)throw new Error("`name` is a required option for createSlice");var n,r="function"==typeof e.initialState?e.initialState:vn(e.initialState,(function(){})),i=e.reducers||{},a=Object.keys(i),o={},l={},u={};function s(){var t="function"==typeof e.extraReducers?zn(e.extraReducers):[e.extraReducers],n=t[0],i=void 0===n?{}:n,a=t[1],o=void 0===a?[]:a,u=t[2],s=void 0===u?void 0:u,c=jn(jn({},i),l);return function(e,t,n,r){void 0===n&&(n=[]);var i,a="function"==typeof t?zn(t):[t,n,r],o=a[0],l=a[1],u=a[2];if(function(e){return"function"==typeof e}(e))i=function(){return vn(e(),(function(){}))};else{var s=vn(e,(function(){}));i=function(){return s}}function c(e,t){void 0===e&&(e=i());var n=In([o[t.type]],l.filter((function(e){return(0,e.matcher)(t)})).map((function(e){return e.reducer})));return 0===n.filter((function(e){return!!e})).length&&(n=[u]),n.reduce((function(e,n){if(n){var r;if(gt(e))return void 0===(r=n(e,t))?e:r;if(bt(e))return vn(e,(function(e){return n(e,t)}));if(void 0===(r=n(e,t))){if(null===e)return e;throw Error("A case reducer on a non-draftable value must not return undefined")}return r}return e}),e)}return c.getInitialState=i,c}(r,c,o,s)}return a.forEach((function(e){var n,r,a=i[e],s=t+"/"+e;"reducer"in a?(n=a.reducer,r=a.prepare):n=a,o[e]=n,l[s]=n,u[e]=r?Bn(s,r):Bn(s)})),{name:t,reducer:function(e,t){return n||(n=s()),n(e,t)},actions:u,caseReducers:o,getInitialState:function(){return n||(n=s()),n.getInitialState()}}}({name:"state",initialState:{content:[],choices:[],dice:{a:0,b:0,dThree:0},character:{attributes:{skill:0,stamina:0,luck:0}},textPrompt:null},reducers:{addContent:function(e,t){e.content.push(t.payload)},setChoices:function(e,t){e.choices=t.payload},setDice:function(e,t){e.dice=qn(qn({},e.dice),t.payload)},setAttribute:function(e,t){var n=t.payload,r=n.name,i=n.value;e.character.attributes[r]=i},setTextPrompt:function(e,t){e.textPrompt=t.payload}}}),Kn=$n.actions,Jn=Kn.addContent,Qn=Kn.setChoices,Yn=Kn.setDice,Xn=Kn.setAttribute,Zn=Kn.setTextPrompt;const er=$n.reducer,tr=new(n(685).Compiler)("EXTERNAL text_prompt(variable, message, next_knot)\nLIST possible_names = (Aajz), (Acastian), (Acastus), (Agnathio), (Alexa), (Amice), (Amuto), (Anagar), (Andrus), (Apollon), (Arrven), (Astrix), (Bannus), (Barrgus), (Belarius), (Bhangleo), (Bitterchain), (Blitz), (Boreas), (Cainsil), (Caldimus), (Cassus), (Castivar), (Castus), (Caul), (Chronus), (Coldfire), (Cottle), (Cowl), (Crow), (Cyclas), (Cyclelos), (Dagged), (Danithor), (Darnath), (Diektrik), (Dolf), (Donatelus), (Dorrghun), (Dysorius), (Erasmus), (Erik), (Eustace), (Fernand), (Gaius), (Gann), (Garadon), (Garak), (Gatughan), (Ghol), (Ghork), (Ghorrean), (Gloom), (Gonk), (Gorrloch), (Grendel), (Groff), (Gunnar), (Haerana), (Hagen), (Hardfist), (Heisen), (Ironaxe), (Ishmael), (Jaghol), (Jago), (Javier), (Jawgor), (Jean), (Jones), (Jurgah), (Kaagos), (Kadena), (Kaed), (Kandakh), (Kantor), (Klayde), (Koen), (Korvaan), (Korvaedyn), (Kulghu), (Kyrin), (Laars), (Larz), (Lefo), (Leif), (Lexandro), (Lydus), (Lytanus), (Mandoth), (Mankle), (Marcus), (Marius), (Markov), (Marqol), (Matteo), (Mendoza), (Mirage), (Mithrha), (Mologhai), (Moradus), (Mordelai), (Moriar), (Morlaeo), (Morrelis), (Mylinnax), (Neabelle), (Nereus), (Nicodemus), (Nixorem), (Obidiah), (Ordaris), (Persophie), (Phase), (Polux), (Punker), (Raelyn), (Rafael), (Ramona), (Raneil), (Rauth), (Reszan), (Rox), (Saghari), (Sargo), (Seglei), (Selig), (Seraphan), (Shadow), (Shyrth), (Solaq), (Stoneshield), (Stormstrider), (Suberei), (Svard), (Swan), (Tarentus), (Terrek), (Thal), (Thunderhowl), (Tippet), (Titus), (Torvaec), (Traegus), (Trollbane), (Ulzcha), (Una), (Vaanes), (Varenus), (Varrox), (Vorg), (Vykus), (Vylkur), (Wardecors), (Wyrmslayer), (Xeriis), (Yesuberei), (Yonda), (Yvarin), (Zed)\n\nVAR dice_a = 0\nVAR dice_b = 0\nVAR dice_dThree = 0\n\nVAR attribute_skill = 0\nVAR attribute_stamina = 0\nVAR attribute_luck = 0\nVAR char_name = \"\"\n\nYou're the lucky one.\n\nThe pirates in this part of space are well-known for their exotic religious beliefs.\n\nYour crewmates are destined to spend the rest of their lives as slaves and victims of the crazed cultists of the god of pain.\n\nYou are not.\n\nThe inhuman raiders picked you to escape their torture and other vices.\n\n* [Who am I, anyway?] -> character_gen_start\n\n=== character_gen_start ===\n-> character_gen_name\n\n=== character_gen_name_prompt ===\n\nEveryone needs a name. What is yours?\n-> character_gen_name\n\n=== character_gen_name ===\n\n~ temp random_name_a = select_name()\n~ temp random_name_b = select_name()\n~ temp random_name_c = select_name()\n~ text_prompt(\"char_name\", \"I know! It is\", \"character_gen_stats\")\n\n*  \\ {random_name_a}\n    ~ char_name = random_name_a\n    -> character_gen_stats\n\n*  \\ {random_name_b}\n    ~ char_name = random_name_b\n    -> character_gen_stats\n    \n*  \\ {random_name_c}\n    ~ char_name = random_name_c\n    -> character_gen_stats  \n\n+ [None of these]\n    -> character_gen_name\n\n\n=== character_gen_stats ===\n\nHi, {char_name}\n\n-> character_gen_skill\n\n=== character_gen_skill ===\n~ dice_dThree = RANDOM(1, 3)\n~ attribute_skill = dice_dThree + 3\n\nYou have a skill of 1d3+3. You have rolled {dice_dThree} giving you a skill of {attribute_skill} #highlight skill\n\n* [OK] -> character_gen_stamina\n\n\n=== character_gen_stamina ===\n\n~ dice_dThree = 0\n~ dice_a = RANDOM(1, 6)\n~ dice_b = RANDOM(1, 6)\n~ attribute_stamina = dice_a + dice_b + 12\n\nYou have a stamina of 2d6+12. You have rolled {dice_a + dice_b} giving you a stamina of {attribute_stamina} #highlight stamina\n\n* [OK] -> character_gen_luck\n\n=== character_gen_luck ===\n\n~ dice_dThree = 0\n~ dice_a = RANDOM(1, 6)\n~ dice_b = 0\n~ attribute_luck = dice_a + 6\n\nYou have a luck of 1d6+6. You have rolled {dice_a} giving you a luck of {attribute_luck} #highlight stamina\n\n* [OK] -> back_in_the_pod\n\n=== back_in_the_pod ===\n~ reset_dice()\n\nThree days ago, they put you in an escape pod and launched it. You're lightyears from civilisation and have 30 minutes of oxygen remaining.\n\nThe corsairs gave you three days to contemplate death by asphyxiation. Now it is almost here.\n\n* [Is this the end?] -> pod_thrusters\n\n=== pod_thrusters ===\n\nYou feel a slight jerk as the escape pod's thrusters fire.\n\nIt has locked onto a spacecraft that you hadn't noticed.\n\nHuge though it is, there is little light out here, and it doesn't seem to have any running lights on it.\n\nMaybe it is abandoned?\n\nMaybe it still has air?\n\nand water?\n\nand food?\n\nYou'll be docking soon, so you'll find out. \n\n * [Wait] -> pod_docking\n \n === pod_docking ===\n \nThere is a loud clank, or perhaps a clunk, as the pod connects to the hull of the larger vessel. \n\nThe airlock doesn't open.\n\n-> pod_choices\n\n=== pod_choices ===\n\n * Press the airlock release control -> pod_button\n * Make use of the emergency toolkit that came with the pod -> pod_toolkit\n * Rip off the plasteele panel under the pod's control panel and use it as a crowbar -> pod_crowbar\n * -> pod_all_exhausted\n\n=== pod_all_exhausted ===\n\nHope begins to fade. You are trapped in the escape pod right next to a huge spaceship. All that stands between you and it is a door you can't open. \n\nYou have minutes of oxygen left.\n\nFin.\n\n-> END\n\n=== pod_button ===\n\nThe door panel emits an unhappy \"blat\" noise. It isn't working.\n\n-> pod_choices\n\n=== pod_toolkit ===\n~ temp result = skill_check(7)\n{\n    - result == true:\n        It opens!\n        -> temp_end\n    - else:\n        Whatever is wrong with the airlock, it is beyond your ability to fix from the inside of this pod.\n        -> pod_choices\n}\n\n=== pod_crowbar ===\n~ temp result = skill_check(7)\n{\n    - result == true:\n        Your muscles strain as you apply pressure to your improvised crowbar, but the door does open. \n        -> temp_end\n    - else:\n        They built these doors to withstand enormous pressure, your muscles aren't a match for it.\n        -> pod_choices\n}\n\n=== temp_end ===\n\nFin. For now.\n    -> END\n    \n=== function skill_check(target) ===\n~ dice_a = RANDOM(1, 6)\n~ dice_b = RANDOM(1, 6)\n~ temp total = dice_a + dice_b\n{\n- total < target:\n    ~ return false\n- else:\n    ~ return true\n}\n\n=== function reset_dice() ===\n~ dice_a = 0\n~ dice_b = 0\n~ dice_dThree = 0\n\n=== function select_name() ===\n{\n    - !possible_names: // \"List is empty\"\n        ~ possible_names = LIST_ALL(possible_names)\n}\n    ~ temp selected = LIST_RANDOM(possible_names)\n    ~ possible_names -= selected\n    ~ return selected\n    \n==== function text_prompt(variable, message, next_knot) ===\n    ~ return 1  \n    ").Compile();var nr=n(568),rr=n.n(nr),ir=function(e){for(;tr.canContinue;){var t=tr.Continue();null!==t&&e(Jn({text:t,index:rr()(t)+new Date}))}var n=tr.currentChoices.map((function(e){return{text:e.text,index:e.index}}));e(Qn(n))};const ar=function(e){var t=e.prompt,n=x();return(0,it.jsxs)(it.Fragment,{children:[(0,it.jsx)("label",{htmlFor:"textPrompt",children:t.message}),(0,it.jsx)("input",{id:"textPrompt",onKeyPress:function(e){var r=e.currentTarget.value;"Enter"!==e.key||r.match(/^\s*$/)||(tr.variablesState.$(t.var_name,r),n(Zn(null)),tr.ChoosePathString(t.next_knot),ir(n))}})]})};var or,lr=rt.div(or||(or=function(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\n    box-sizing: border: box;\n\tmax-width: 60rem;\n\tmin-height: 100vh;\n\tmargin: 0 auto;\n\tpadding: 0 3px;\n\tbackground: ",";\n\tcolor: ",";\n\tdisplay: flex;\n\tflex-direction: column;\n"])),(function(e){return e.theme.darkBold}),(function(e){return e.theme.lightSoft}));const ur=lr,sr={darkBold:"#2D5418",darkSoft:"#4E6641",lightSoft:"#8ABD6F",lightRegular:"##BAEBA0",lightBold:"#5EE317"};var cr,fr=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var a=Ve.apply(void 0,[e].concat(n)),o="sc-global-"+qe(JSON.stringify(a)),l=new nt(a,o);function u(e){var t=Oe(),n=Te(),r=(0,i.useContext)(Ye),a=(0,i.useRef)(t.allocateGSInstance(o)).current;return t.server&&s(a,e,t,r,n),(0,i.useLayoutEffect)((function(){if(!t.server)return s(a,e,t,r,n),function(){return l.removeStyles(a,t)}}),[a,e,t,r,n]),null}function s(e,t,n,r,i){if(l.isStatic)l.renderStyles(e,H,n,i);else{var a=W({},t,{theme:Be(t,r,u.defaultProps)});l.renderStyles(e,a,n,i)}}return i.memo(u)}(cr||(cr=function(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\n  body {\n    margin: 0;\n    padding: 0;\n\tbackground: ",";\n\tcolor: ",";\n    font-family: 'Space Mono', monospace;\n  }\n"])),(function(e){return e.theme.darkSoft}),(function(e){return e.theme.lightSoft}));const hr=fr,dr=function(){var e,t=v((function(e){return e.state})),n=(e=x(),(0,i.useEffect)((function(){tr.ObserveVariable("dice_a",(function(t,n){e(Yn({a:n}))})),tr.ObserveVariable("dice_b",(function(t,n){e(Yn({b:n}))})),tr.ObserveVariable("dice_dThree",(function(t,n){e(Yn({dThree:n}))})),["skill","stamina","luck"].forEach((function(t){tr.ObserveVariable("attribute_".concat(t),(function(n,r){e(Xn({name:t,value:r}))}))})),tr.BindExternalFunction("text_prompt",(function(t,n,r){e(Zn({var_name:t,message:n,next_knot:r}))}),!1)}),[]),(0,i.useEffect)((function(){return ir(e)}),[]),{choose:(0,i.useCallback)((function(t){tr.ChooseChoiceIndex(t),e(Zn(null)),ir(e)}),[])}).choose;return(0,it.jsxs)(Xe,{theme:sr,children:[(0,it.jsx)(hr,{}),(0,it.jsx)(i.StrictMode,{children:(0,it.jsxs)(ur,{children:[(0,it.jsx)("h1",{children:"Hulk"}),(0,it.jsx)(ht,{}),(0,it.jsx)(ot,{}),(0,it.jsx)(mt,{children:t.content.slice(-10).map((function(e){return(0,it.jsx)("p",{children:e.text},e.index)}))}),(0,it.jsxs)("div",{id:"choices",children:[t.textPrompt&&(0,it.jsx)(ar,{prompt:t.textPrompt}),t.choices.map((function(e){return(0,it.jsx)("button",{onClick:function(){return n(e.index)},children:e.text},e.index)}))]})]})})]})};var pr=function(e){var t,n=function(e){return function(e){void 0===e&&(e={});var t=e.thunk,n=void 0===t||t,r=(e.immutableCheck,e.serializableCheck,new Vn);return n&&(function(e){return"boolean"==typeof e}(n)?r.push(Tn):r.push(Tn.withExtraArgument(n.extraArgument))),r}(e)},r=e||{},i=r.reducer,a=void 0===i?void 0:i,o=r.middleware,l=void 0===o?n():o,u=r.devTools,s=void 0===u||u,c=r.preloadedState,f=void 0===c?void 0:c,h=r.enhancers,d=void 0===h?void 0:h;if("function"==typeof a)t=a;else{if(!function(e){if("object"!=typeof e||null===e)return!1;var t=Object.getPrototypeOf(e);if(null===t)return!0;for(var n=t;null!==Object.getPrototypeOf(n);)n=Object.getPrototypeOf(n);return t===n}(a))throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');t=function(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++){var i=t[r];"function"==typeof e[i]&&(n[i]=e[i])}var a,o=Object.keys(n);try{!function(e){Object.keys(e).forEach((function(t){var n=e[t];if(void 0===n(void 0,{type:wn.INIT}))throw new Error(bn(12));if(void 0===n(void 0,{type:wn.PROBE_UNKNOWN_ACTION()}))throw new Error(bn(13))}))}(n)}catch(e){a=e}return function(e,t){if(void 0===e&&(e={}),a)throw a;for(var r=!1,i={},l=0;l<o.length;l++){var u=o[l],s=n[u],c=e[u],f=s(c,t);if(void 0===f)throw t&&t.type,new Error(bn(14));i[u]=f,r=r||f!==c}return(r=r||o.length!==Object.keys(e).length)?i:e}}(a)}var p=l;"function"==typeof p&&(p=p(n));var v=xn.apply(void 0,p),m=En;s&&(m=Mn(jn({trace:!1},"object"==typeof s&&s)));var y=[v];return Array.isArray(d)?y=In([v],d):"function"==typeof d&&(y=d(y)),_n(t,f,m.apply(void 0,y))}({reducer:{state:er}}),vr=document.getElementById("root");if(!vr)throw new Error("Could not find an element with the id 'root'.");(0,r.s)(vr).render((0,it.jsx)(w,{store:pr,children:(0,it.jsx)(dr,{})}))},487:e=>{var t={utf8:{stringToBytes:function(e){return t.bin.stringToBytes(unescape(encodeURIComponent(e)))},bytesToString:function(e){return decodeURIComponent(escape(t.bin.bytesToString(e)))}},bin:{stringToBytes:function(e){for(var t=[],n=0;n<e.length;n++)t.push(255&e.charCodeAt(n));return t},bytesToString:function(e){for(var t=[],n=0;n<e.length;n++)t.push(String.fromCharCode(e[n]));return t.join("")}}};e.exports=t},12:e=>{var t,n;t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n={rotl:function(e,t){return e<<t|e>>>32-t},rotr:function(e,t){return e<<32-t|e>>>t},endian:function(e){if(e.constructor==Number)return 16711935&n.rotl(e,8)|4278255360&n.rotl(e,24);for(var t=0;t<e.length;t++)e[t]=n.endian(e[t]);return e},randomBytes:function(e){for(var t=[];e>0;e--)t.push(Math.floor(256*Math.random()));return t},bytesToWords:function(e){for(var t=[],n=0,r=0;n<e.length;n++,r+=8)t[r>>>5]|=e[n]<<24-r%32;return t},wordsToBytes:function(e){for(var t=[],n=0;n<32*e.length;n+=8)t.push(e[n>>>5]>>>24-n%32&255);return t},bytesToHex:function(e){for(var t=[],n=0;n<e.length;n++)t.push((e[n]>>>4).toString(16)),t.push((15&e[n]).toString(16));return t.join("")},hexToBytes:function(e){for(var t=[],n=0;n<e.length;n+=2)t.push(parseInt(e.substr(n,2),16));return t},bytesToBase64:function(e){for(var n=[],r=0;r<e.length;r+=3)for(var i=e[r]<<16|e[r+1]<<8|e[r+2],a=0;a<4;a++)8*r+6*a<=8*e.length?n.push(t.charAt(i>>>6*(3-a)&63)):n.push("=");return n.join("")},base64ToBytes:function(e){e=e.replace(/[^A-Z0-9+\/]/gi,"");for(var n=[],r=0,i=0;r<e.length;i=++r%4)0!=i&&n.push((t.indexOf(e.charAt(r-1))&Math.pow(2,-2*i+8)-1)<<2*i|t.indexOf(e.charAt(r))>>>6-2*i);return n}},e.exports=n},679:(e,t,n)=>{"use strict";var r=n(296),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},a={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},o={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},l={};function u(e){return r.isMemo(e)?o:l[e.$$typeof]||i}l[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},l[r.Memo]=o;var s=Object.defineProperty,c=Object.getOwnPropertyNames,f=Object.getOwnPropertySymbols,h=Object.getOwnPropertyDescriptor,d=Object.getPrototypeOf,p=Object.prototype;e.exports=function e(t,n,r){if("string"!=typeof n){if(p){var i=d(n);i&&i!==p&&e(t,i,r)}var o=c(n);f&&(o=o.concat(f(n)));for(var l=u(t),v=u(n),m=0;m<o.length;++m){var y=o[m];if(!(a[y]||r&&r[y]||v&&v[y]||l&&l[y])){var g=h(n,y);try{s(t,y,g)}catch(e){}}}}return t}},103:(e,t)=>{"use strict";var n="function"==typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,i=n?Symbol.for("react.portal"):60106,a=n?Symbol.for("react.fragment"):60107,o=n?Symbol.for("react.strict_mode"):60108,l=n?Symbol.for("react.profiler"):60114,u=n?Symbol.for("react.provider"):60109,s=n?Symbol.for("react.context"):60110,c=n?Symbol.for("react.async_mode"):60111,f=n?Symbol.for("react.concurrent_mode"):60111,h=n?Symbol.for("react.forward_ref"):60112,d=n?Symbol.for("react.suspense"):60113,p=n?Symbol.for("react.suspense_list"):60120,v=n?Symbol.for("react.memo"):60115,m=n?Symbol.for("react.lazy"):60116,y=n?Symbol.for("react.block"):60121,g=n?Symbol.for("react.fundamental"):60117,b=n?Symbol.for("react.responder"):60118,S=n?Symbol.for("react.scope"):60119;function C(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case c:case f:case a:case l:case o:case d:return e;default:switch(e=e&&e.$$typeof){case s:case h:case m:case v:case u:return e;default:return t}}case i:return t}}}function w(e){return C(e)===f}t.AsyncMode=c,t.ConcurrentMode=f,t.ContextConsumer=s,t.ContextProvider=u,t.Element=r,t.ForwardRef=h,t.Fragment=a,t.Lazy=m,t.Memo=v,t.Portal=i,t.Profiler=l,t.StrictMode=o,t.Suspense=d,t.isAsyncMode=function(e){return w(e)||C(e)===c},t.isConcurrentMode=w,t.isContextConsumer=function(e){return C(e)===s},t.isContextProvider=function(e){return C(e)===u},t.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return C(e)===h},t.isFragment=function(e){return C(e)===a},t.isLazy=function(e){return C(e)===m},t.isMemo=function(e){return C(e)===v},t.isPortal=function(e){return C(e)===i},t.isProfiler=function(e){return C(e)===l},t.isStrictMode=function(e){return C(e)===o},t.isSuspense=function(e){return C(e)===d},t.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===a||e===f||e===l||e===o||e===d||e===p||"object"==typeof e&&null!==e&&(e.$$typeof===m||e.$$typeof===v||e.$$typeof===u||e.$$typeof===s||e.$$typeof===h||e.$$typeof===g||e.$$typeof===b||e.$$typeof===S||e.$$typeof===y)},t.typeOf=C},296:(e,t,n)=>{"use strict";e.exports=n(103)},685:function(e,t){!function(e){"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&l(e,t)}function o(e){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function s(e,t,n){return(s=u()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&l(i,n.prototype),i}).apply(null,arguments)}function c(e){var t="function"==typeof Map?new Map:void 0;return(c=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return s(e,arguments,o(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),l(r,e)})(e)}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return f(e)}function d(e){var t=u();return function(){var n,r=o(e);if(t){var i=o(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h(this,n)}}function p(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=o(e)););return e}function v(){return(v="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=p(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}}).apply(this,arguments)}function m(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a=[],o=!0,l=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){l=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(l)throw i}}return a}}(e,t)||g(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(e){return function(e){if(Array.isArray(e))return b(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||g(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(e,t){if(e){if("string"==typeof e)return b(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?b(e,t):void 0}}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function S(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=g(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){l=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(l)throw a}}}}var C,w=i((function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;n(this,e),this.sourceFilename=t,this.pluginNames=r,this.countAllVisits=i,this.errorHandler=a,this.fileHandler=o})),k=i((function e(t,r,i){n(this,e),this.length=t,this.debugMetadata=r,this.text=i}));!function(e){e[e.Author=0]="Author",e[e.Warning=1]="Warning",e[e.Error=2]="Error"}(C||(C={}));var _=i((function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;n(this,e),this.identifier=t,this.isByReference=r,this.isDivertTarget=i}));function E(e,t){return e instanceof t?A(e):null}function x(e,t){if(e instanceof t)return A(e);throw new Error("".concat(e," is not of type ").concat(t))}function P(e){return e.hasValidName&&e.name?e:null}function O(e){return void 0===e?null:e}function T(e){return"object"===t(e)&&"function"==typeof e.Equals}function A(e,t){return e}function N(e){return null!=e}var I,R=function(){function e(){var t=this;n(this,e),this._alreadyHadError=!1,this._alreadyHadWarning=!1,this._debugMetadata=null,this._runtimeObject=null,this.content=[],this.parent=null,this.GetType=function(){return t.typeName},this.AddContent=function(e){null===t.content&&(t.content=[]);var n,r=S(Array.isArray(e)?e:[e]);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.hasOwnProperty("parent")&&(i.parent=t),t.content.push(i)}}catch(e){r.e(e)}finally{r.f()}return Array.isArray(e)?void 0:e},this.InsertContent=function(e,n){return null===t.content&&(t.content=[]),n.parent=t,t.content.splice(e,0,n),n},this.Find=function(e){return function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=E(t,e);if(null!==r&&(null===n||!0===n(r)))return r;if(null===t.content)return null;var i,a=S(t.content);try{for(a.s();!(i=a.n()).done;){var o=i.value,l=o.Find&&o.Find(e)(n);if(l)return l}}catch(e){a.e(e)}finally{a.f()}return null}},this.FindAll=function(e){return function(n,r){var i=Array.isArray(r)?r:[],a=E(t,e);if(null===a||n&&!0!==n(a)||i.push(a),null===t.content)return[];var o,l=S(t.content);try{for(l.s();!(o=l.n()).done;){var u=o.value;u.FindAll&&u.FindAll(e)(n,i)}}catch(e){l.e(e)}finally{l.f()}return i}},this.Warning=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;t.Error(e,n,!0)}}return i(e,[{key:"debugMetadata",get:function(){return null===this._debugMetadata&&this.parent?this.parent.debugMetadata:this._debugMetadata},set:function(e){this._debugMetadata=e}},{key:"hasOwnDebugMetadata",get:function(){return Boolean(this.debugMetadata)}},{key:"typeName",get:function(){return"ParsedObject"}},{key:"story",get:function(){for(var e=this;e.parent;)e=e.parent;return e}},{key:"runtimeObject",get:function(){return this._runtimeObject||(this._runtimeObject=this.GenerateRuntimeObject(),this._runtimeObject&&(this._runtimeObject.debugMetadata=this.debugMetadata)),this._runtimeObject},set:function(e){this._runtimeObject=e}},{key:"runtimePath",get:function(){if(!this.runtimeObject.path)throw new Error;return this.runtimeObject.path}},{key:"containerForCounting",get:function(){return this.runtimeObject}},{key:"ancestry",get:function(){for(var e=[],t=this.parent;t;)e.push(t),t=t.parent;return e.reverse()}},{key:"ResolveReferences",value:function(e){if(null!==this.content){var t,n=S(this.content);try{for(n.s();!(t=n.n()).done;)t.value.ResolveReferences(e)}catch(e){n.e(e)}finally{n.f()}}}},{key:"Error",value:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(null===t&&(t=this),!(t._alreadyHadError&&!n||t._alreadyHadWarning&&n)){if(!this.parent)throw new Error("No parent object to send error to: ".concat(e));this.parent.Error(e,t,n),n?t._alreadyHadWarning=!0:t._alreadyHadError=!0}}))}]),e}(),F=function(e){a(r,e);var t=d(r);function r(e){var i;return n(this,r),(i=t.call(this)).warningMessage=e,i.GenerateRuntimeObject=function(){return i.Warning(i.warningMessage),null},i}return i(r,[{key:"typeName",get:function(){return"AuthorWarning"}}]),r}(R),W=function(){function e(){if(n(this,e),this._components=[],this._componentsString=null,this._isRelative=!1,"string"==typeof arguments[0]){var t=arguments[0];this.componentsString=t}else if(arguments[0]instanceof e.Component&&arguments[1]instanceof e){var r=arguments[0],i=arguments[1];this._components.push(r),this._components=this._components.concat(i._components)}else if(arguments[0]instanceof Array){var a=arguments[0],o=!!arguments[1];this._components=this._components.concat(a),this._isRelative=o}}return i(e,[{key:"isRelative",get:function(){return this._isRelative}},{key:"componentCount",get:function(){return this._components.length}},{key:"head",get:function(){return this._components.length>0?this._components[0]:null}},{key:"tail",get:function(){return this._components.length>=2?new e(this._components.slice(1,this._components.length)):e.self}},{key:"length",get:function(){return this._components.length}},{key:"lastComponent",get:function(){var e=this._components.length-1;return e>=0?this._components[e]:null}},{key:"containsNamedComponent",get:function(){for(var e=0,t=this._components.length;e<t;e++)if(!this._components[e].isIndex)return!0;return!1}},{key:"GetComponent",value:function(e){return this._components[e]}},{key:"PathByAppendingPath",value:function(t){for(var n=new e,r=0,i=0;i<t._components.length&&t._components[i].isParent;++i)r++;for(var a=0;a<this._components.length-r;++a)n._components.push(this._components[a]);for(var o=r;o<t._components.length;++o)n._components.push(t._components[o]);return n}},{key:"componentsString",get:function(){return null==this._componentsString&&(this._componentsString=this._components.join("."),this.isRelative&&(this._componentsString="."+this._componentsString)),this._componentsString},set:function(t){if(this._components.length=0,this._componentsString=t,null!=this._componentsString&&""!=this._componentsString){"."==this._componentsString[0]&&(this._isRelative=!0,this._componentsString=this._componentsString.substring(1));var n,r=S(this._componentsString.split("."));try{for(r.s();!(n=r.n()).done;){var i=n.value;/^(\-|\+)?([0-9]+|Infinity)$/.test(i)?this._components.push(new e.Component(parseInt(i))):this._components.push(new e.Component(i))}}catch(e){r.e(e)}finally{r.f()}}}},{key:"toString",value:function(){return this.componentsString}},{key:"Equals",value:function(e){if(null==e)return!1;if(e._components.length!=this._components.length)return!1;if(e.isRelative!=this.isRelative)return!1;for(var t=0,n=e._components.length;t<n;t++)if(!e._components[t].Equals(this._components[t]))return!1;return!0}},{key:"PathByAppendingComponent",value:function(t){var n,r=new e;return(n=r._components).push.apply(n,y(this._components)),r._components.push(t),r}}],[{key:"self",get:function(){var t=new e;return t._isRelative=!0,t}}]),e}();W.parentId="^",function(e){var t=function(){function t(e){n(this,t),this.index=-1,this.name=null,"string"==typeof e?this.name=e:this.index=e}return i(t,[{key:"isIndex",get:function(){return this.index>=0}},{key:"isParent",get:function(){return this.name==e.parentId}},{key:"toString",value:function(){return this.isIndex?this.index.toString():this.name}},{key:"Equals",value:function(e){return null!=e&&e.isIndex==this.isIndex&&(this.isIndex?this.index==e.index:this.name==e.name)}}],[{key:"ToParent",value:function(){return new t(e.parentId)}}]),t}();e.Component=t}(W||(W={})),function(e){function t(e,t){if(!e)throw void 0!==t&&console.warn(t),console.trace&&console.trace(),new Error("")}e.AssertType=function(e,n,r){t(e instanceof n,r)},e.Assert=t}(I||(I={}));var L=function(e){a(r,e);var t=d(r);function r(){return n(this,r),t.apply(this,arguments)}return i(r)}(c(Error));function D(e){throw new L("".concat(e," is null or undefined"))}var j=function(){function e(){n(this,e),this.parent=null,this._debugMetadata=null,this._path=null}return i(e,[{key:"debugMetadata",get:function(){return null===this._debugMetadata&&this.parent?this.parent.debugMetadata:this._debugMetadata},set:function(e){this._debugMetadata=e}},{key:"ownDebugMetadata",get:function(){return this._debugMetadata}},{key:"DebugLineNumberOfPath",value:function(e){if(null===e)return null;var t=this.rootContentContainer;if(t){var n=t.ContentAtPath(e).obj;if(n){var r=n.debugMetadata;if(null!==r)return r.startLineNumber}}return null}},{key:"path",get:function(){if(null==this._path)if(null==this.parent)this._path=new W;else{for(var e=[],t=this,n=E(t.parent,ee);null!==n;){var r=P(t);if(null!=r&&r.hasValidName){if(null===r.name)return D("namedChild.name");e.unshift(new W.Component(r.name))}else e.unshift(new W.Component(n.content.indexOf(t)));t=n,n=E(n.parent,ee)}this._path=new W(e)}return this._path}},{key:"ResolvePath",value:function(e){if(null===e)return D("path");if(e.isRelative){var t=E(this,ee);return null===t&&(I.Assert(null!==this.parent,"Can't resolve relative path because we don't have a parent"),t=E(this.parent,ee),I.Assert(null!==t,"Expected parent to be a container"),I.Assert(e.GetComponent(0).isParent),e=e.tail),null===t?D("nearestContainer"):t.ContentAtPath(e)}var n=this.rootContentContainer;return null===n?D("contentContainer"):n.ContentAtPath(e)}},{key:"ConvertPathToRelative",value:function(e){for(var t=this.path,n=Math.min(e.length,t.length),r=-1,i=0;i<n;++i){var a=t.GetComponent(i),o=e.GetComponent(i);if(!a.Equals(o))break;r=i}if(-1==r)return e;for(var l=t.componentCount-1-r,u=[],s=0;s<l;++s)u.push(W.Component.ToParent());for(var c=r+1;c<e.componentCount;++c)u.push(e.GetComponent(c));return new W(u,!0)}},{key:"CompactPathString",value:function(e){var t=null,n=null;return e.isRelative?(n=e.componentsString,t=this.path.PathByAppendingPath(e).componentsString):(n=this.ConvertPathToRelative(e).componentsString,t=e.componentsString),n.length<t.length?n:t}},{key:"rootContentContainer",get:function(){for(var e=this;e.parent;)e=e.parent;return E(e,ee)}},{key:"Copy",value:function(){throw Error("Not Implemented: Doesn't support copying")}},{key:"SetChild",value:function(e,t,n){e[t]&&(e[t]=null),e[t]=n,e[t]&&(e[t].parent=this)}},{key:"Equals",value:function(e){return e===this}}]),e}(),M=function(){function e(t){n(this,e),t=void 0!==t?t.toString():"",this.string=t}return i(e,[{key:"Length",get:function(){return this.string.length}},{key:"Append",value:function(e){null!==e&&(this.string+=e)}},{key:"AppendLine",value:function(e){void 0!==e&&this.Append(e),this.string+="\n"}},{key:"AppendFormat",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];this.string+=e.replace(/{(\d+)}/g,(function(e,t){return void 0!==n[t]?n[t]:e}))}},{key:"toString",value:function(){return this.string}}]),e}(),V=function(){function e(){if(n(this,e),this.originName=null,this.itemName=null,void 0!==arguments[1]){var t=arguments[0],r=arguments[1];this.originName=t,this.itemName=r}else if(arguments[0]){var i=arguments[0].toString().split(".");this.originName=i[0],this.itemName=i[1]}}return i(e,[{key:"isNull",get:function(){return null==this.originName&&null==this.itemName}},{key:"fullName",get:function(){return(null!==this.originName?this.originName:"?")+"."+this.itemName}},{key:"toString",value:function(){return this.fullName}},{key:"Equals",value:function(t){if(t instanceof e){var n=t;return n.itemName==this.itemName&&n.originName==this.originName}return!1}},{key:"copy",value:function(){return new e(this.originName,this.itemName)}},{key:"serialized",value:function(){return JSON.stringify({originName:this.originName,itemName:this.itemName})}}],[{key:"Null",get:function(){return new e(null,null)}},{key:"fromSerializedKey",value:function(t){var n=JSON.parse(t);if(!e.isLikeInkListItem(n))return e.Null;var r=n;return new e(r.originName,r.itemName)}},{key:"isLikeInkListItem",value:function(e){return!("object"!==t(e)||!e.hasOwnProperty("originName")||!e.hasOwnProperty("itemName")||"string"!=typeof e.originName&&null!==typeof e.originName||"string"!=typeof e.itemName&&null!==typeof e.itemName)}}]),e}(),B=function(e){a(o,e);var r=d(o);function o(){var e,i=arguments;if(n(this,o),(e=r.call(this,i[0]instanceof o?i[0]:[])).origins=null,e._originNames=[],arguments[0]instanceof o){var a=arguments[0];e._originNames=a.originNames,null!==a.origins&&(e.origins=a.origins.slice())}else if("string"==typeof arguments[0]){var l=arguments[0],u=arguments[1];if(e.SetInitialOriginName(l),null===u.listDefinitions)return h(e,D("originStory.listDefinitions"));var s=u.listDefinitions.TryListGetDefinition(l,null);if(!s.exists)throw new Error("InkList origin could not be found in story when constructing new list: "+l);if(null===s.result)return h(e,D("def.result"));e.origins=[s.result]}else if("object"===t(arguments[0])&&arguments[0].hasOwnProperty("Key")&&arguments[0].hasOwnProperty("Value")){var c=arguments[0];e.Add(c.Key,c.Value)}return e}return i(o,[{key:"AddItem",value:function(e){if(e instanceof V){var t=e;if(null==t.originName)return void this.AddItem(t.itemName);if(null===this.origins)return D("this.origins");var n,r=S(this.origins);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.name==t.originName){var a=i.TryGetValueForItem(t,0);if(a.exists)return void this.Add(t,a.result);throw new Error("Could not add the item "+t+" to this list because it doesn't exist in the original list definition in ink.")}}}catch(e){r.e(e)}finally{r.f()}throw new Error("Failed to add item to list because the item was from a new list definition that wasn't previously known to this list. Only items from previously known lists can be used, so that the int value can be found.")}var o=e,l=null;if(null===this.origins)return D("this.origins");var u,s=S(this.origins);try{for(s.s();!(u=s.n()).done;){var c=u.value;if(null===o)return D("itemName");if(c.ContainsItemWithName(o)){if(null!=l)throw new Error("Could not add the item "+o+" to this list because it could come from either "+c.name+" or "+l.name);l=c}}}catch(e){s.e(e)}finally{s.f()}if(null==l)throw new Error("Could not add the item "+o+" to this list because it isn't known to any list definitions previously associated with this list.");var f=new V(l.name,o),h=l.ValueForItem(f);this.Add(f,h)}},{key:"ContainsItemNamed",value:function(e){var t,n=S(this);try{for(n.s();!(t=n.n()).done;){var r=m(t.value,1)[0];if(V.fromSerializedKey(r).itemName==e)return!0}}catch(e){n.e(e)}finally{n.f()}return!1}},{key:"ContainsKey",value:function(e){return this.has(e.serialized())}},{key:"Add",value:function(e,t){var n=e.serialized();if(this.has(n))throw new Error("The Map already contains an entry for ".concat(e));this.set(n,t)}},{key:"Remove",value:function(e){return this.delete(e.serialized())}},{key:"Count",get:function(){return this.size}},{key:"originOfMaxItem",get:function(){if(null==this.origins)return null;var e=this.maxItem.Key.originName,t=null;return this.origins.every((function(n){return n.name!=e||(t=n,!1)})),t}},{key:"originNames",get:function(){if(this.Count>0){null==this._originNames&&this.Count>0?this._originNames=[]:(this._originNames||(this._originNames=[]),this._originNames.length=0);var e,t=S(this);try{for(t.s();!(e=t.n()).done;){var n=m(e.value,1)[0],r=V.fromSerializedKey(n);if(null===r.originName)return D("item.originName");this._originNames.push(r.originName)}}catch(e){t.e(e)}finally{t.f()}}return this._originNames}},{key:"SetInitialOriginName",value:function(e){this._originNames=[e]}},{key:"SetInitialOriginNames",value:function(e){this._originNames=null==e?null:e.slice()}},{key:"maxItem",get:function(){var e,t={Key:V.Null,Value:0},n=S(this);try{for(n.s();!(e=n.n()).done;){var r=m(e.value,2),i=r[0],a=r[1],o=V.fromSerializedKey(i);(t.Key.isNull||a>t.Value)&&(t={Key:o,Value:a})}}catch(e){n.e(e)}finally{n.f()}return t}},{key:"minItem",get:function(){var e,t={Key:V.Null,Value:0},n=S(this);try{for(n.s();!(e=n.n()).done;){var r=m(e.value,2),i=r[0],a=r[1],o=V.fromSerializedKey(i);(t.Key.isNull||a<t.Value)&&(t={Key:o,Value:a})}}catch(e){n.e(e)}finally{n.f()}return t}},{key:"inverse",get:function(){var e=new o;if(null!=this.origins){var t,n=S(this.origins);try{for(n.s();!(t=n.n()).done;){var r,i=S(t.value.items);try{for(i.s();!(r=i.n()).done;){var a=m(r.value,2),l=a[0],u=a[1],s=V.fromSerializedKey(l);this.ContainsKey(s)||e.Add(s,u)}}catch(e){i.e(e)}finally{i.f()}}}catch(e){n.e(e)}finally{n.f()}}return e}},{key:"all",get:function(){var e=new o;if(null!=this.origins){var t,n=S(this.origins);try{for(n.s();!(t=n.n()).done;){var r,i=S(t.value.items);try{for(i.s();!(r=i.n()).done;){var a=m(r.value,2),l=a[0],u=a[1],s=V.fromSerializedKey(l);e.set(s.serialized(),u)}}catch(e){i.e(e)}finally{i.f()}}}catch(e){n.e(e)}finally{n.f()}}return e}},{key:"Union",value:function(e){var t,n=new o(this),r=S(e);try{for(r.s();!(t=r.n()).done;){var i=m(t.value,2),a=i[0],l=i[1];n.set(a,l)}}catch(e){r.e(e)}finally{r.f()}return n}},{key:"Intersect",value:function(e){var t,n=new o,r=S(this);try{for(r.s();!(t=r.n()).done;){var i=m(t.value,2),a=i[0],l=i[1];e.has(a)&&n.set(a,l)}}catch(e){r.e(e)}finally{r.f()}return n}},{key:"Without",value:function(e){var t,n=new o(this),r=S(e);try{for(r.s();!(t=r.n()).done;){var i=m(t.value,1)[0];n.delete(i)}}catch(e){r.e(e)}finally{r.f()}return n}},{key:"Contains",value:function(e){var t,n=S(e);try{for(n.s();!(t=n.n()).done;){var r=m(t.value,1)[0];if(!this.has(r))return!1}}catch(e){n.e(e)}finally{n.f()}return!0}},{key:"GreaterThan",value:function(e){return 0!=this.Count&&(0==e.Count||this.minItem.Value>e.maxItem.Value)}},{key:"GreaterThanOrEquals",value:function(e){return 0!=this.Count&&(0==e.Count||this.minItem.Value>=e.minItem.Value&&this.maxItem.Value>=e.maxItem.Value)}},{key:"LessThan",value:function(e){return 0!=e.Count&&(0==this.Count||this.maxItem.Value<e.minItem.Value)}},{key:"LessThanOrEquals",value:function(e){return 0!=e.Count&&(0==this.Count||this.maxItem.Value<=e.maxItem.Value&&this.minItem.Value<=e.minItem.Value)}},{key:"MaxAsList",value:function(){return this.Count>0?new o(this.maxItem):new o}},{key:"MinAsList",value:function(){return this.Count>0?new o(this.minItem):new o}},{key:"ListWithSubRange",value:function(e,t){if(0==this.Count)return new o;var n=this.orderedItems,r=0,i=Number.MAX_SAFE_INTEGER;Number.isInteger(e)?r=e:e instanceof o&&e.Count>0&&(r=e.minItem.Value),Number.isInteger(t)?i=t:e instanceof o&&e.Count>0&&(i=t.maxItem.Value);var a=new o;a.SetInitialOriginNames(this.originNames);var l,u=S(n);try{for(u.s();!(l=u.n()).done;){var s=l.value;s.Value>=r&&s.Value<=i&&a.Add(s.Key,s.Value)}}catch(e){u.e(e)}finally{u.f()}return a}},{key:"Equals",value:function(e){if(e instanceof o==0)return!1;if(e.Count!=this.Count)return!1;var t,n=S(this);try{for(n.s();!(t=n.n()).done;){var r=m(t.value,1)[0];if(!e.has(r))return!1}}catch(e){n.e(e)}finally{n.f()}return!0}},{key:"orderedItems",get:function(){var e,t=new Array,n=S(this);try{for(n.s();!(e=n.n()).done;){var r=m(e.value,2),i=r[0],a=r[1],o=V.fromSerializedKey(i);t.push({Key:o,Value:a})}}catch(e){n.e(e)}finally{n.f()}return t.sort((function(e,t){return null===e.Key.originName?D("x.Key.originName"):null===t.Key.originName?D("y.Key.originName"):e.Value==t.Value?e.Key.originName.localeCompare(t.Key.originName):e.Value<t.Value?-1:e.Value>t.Value?1:0})),t}},{key:"toString",value:function(){for(var e=this.orderedItems,t=new M,n=0;n<e.length;n++){n>0&&t.Append(", ");var r=e[n].Key;if(null===r.itemName)return D("item.itemName");t.Append(r.itemName)}return t.toString()}},{key:"valueOf",value:function(){return NaN}}],[{key:"FromString",value:function(e,t){var n,r=null===(n=t.listDefinitions)||void 0===n?void 0:n.FindSingleItemListWithName(e);if(r)return null===r.value?D("listValue.value"):new o(r.value);throw new Error("Could not find the InkListItem from the string '"+e+"' to create an InkList because it doesn't exist in the original list definition in ink.")}}]),o}(c(Map)),z=function(e){a(r,e);var t=d(r);function r(e){var i;return n(this,r),(i=t.call(this,e)).useEndLineNumber=!1,i.message=e,i.name="StoryException",i}return i(r)}(c(Error));function G(e,t,n){if(null===e)return{result:n,exists:!1};var r=e.get(t);return void 0===r?{result:n,exists:!1}:{result:r,exists:!0}}var U,q=function(e){a(r,e);var t=d(r);function r(e){var i;return n(this,r),(i=t.call(this)).value=e,i}return i(r,[{key:"valueObject",get:function(){return this.value}},{key:"toString",value:function(){return null===this.value?D("Value.value"):this.value.toString()}}]),r}(function(e){a(r,e);var t=d(r);function r(){return n(this,r),t.apply(this,arguments)}return i(r,[{key:"Copy",value:function(){return x(r.Create(this.valueObject),j)}},{key:"BadCastException",value:function(e){return new z("Can't cast "+this.valueObject+" from "+this.valueType+" to "+e)}}],[{key:"Create",value:function(e,t){if(t){if(t===U.Int&&Number.isInteger(Number(e)))return new $(Number(e));if(t===U.Float&&!isNaN(e))return new K(Number(e))}return"boolean"==typeof e?new H(Boolean(e)):"string"==typeof e?new J(String(e)):Number.isInteger(Number(e))?new $(Number(e)):isNaN(e)?e instanceof W?new Q(x(e,W)):e instanceof B?new X(x(e,B)):null:new K(Number(e))}}]),r}(j)),H=function(e){a(r,e);var t=d(r);function r(e){return n(this,r),t.call(this,e||!1)}return i(r,[{key:"isTruthy",get:function(){return Boolean(this.value)}},{key:"valueType",get:function(){return U.Bool}},{key:"Cast",value:function(e){if(null===this.value)return D("Value.value");if(e==this.valueType)return this;if(e==U.Int)return new $(this.value?1:0);if(e==U.Float)return new K(this.value?1:0);if(e==U.String)return new J(this.value?"true":"false");throw this.BadCastException(e)}},{key:"toString",value:function(){return this.value?"true":"false"}}]),r}(q),$=function(e){a(r,e);var t=d(r);function r(e){return n(this,r),t.call(this,e||0)}return i(r,[{key:"isTruthy",get:function(){return 0!=this.value}},{key:"valueType",get:function(){return U.Int}},{key:"Cast",value:function(e){if(null===this.value)return D("Value.value");if(e==this.valueType)return this;if(e==U.Bool)return new H(0!==this.value);if(e==U.Float)return new K(this.value);if(e==U.String)return new J(""+this.value);throw this.BadCastException(e)}}]),r}(q),K=function(e){a(r,e);var t=d(r);function r(e){return n(this,r),t.call(this,e||0)}return i(r,[{key:"isTruthy",get:function(){return 0!=this.value}},{key:"valueType",get:function(){return U.Float}},{key:"Cast",value:function(e){if(null===this.value)return D("Value.value");if(e==this.valueType)return this;if(e==U.Bool)return new H(0!==this.value);if(e==U.Int)return new $(this.value);if(e==U.String)return new J(""+this.value);throw this.BadCastException(e)}}]),r}(q),J=function(e){a(r,e);var t=d(r);function r(e){var i;return n(this,r),(i=t.call(this,e||""))._isNewline="\n"==i.value,i._isInlineWhitespace=!0,null===i.value?h(i,D("Value.value")):(i.value.length>0&&i.value.split("").every((function(e){return" "==e||"\t"==e||(i._isInlineWhitespace=!1,!1)})),i)}return i(r,[{key:"valueType",get:function(){return U.String}},{key:"isTruthy",get:function(){return null===this.value?D("Value.value"):this.value.length>0}},{key:"isNewline",get:function(){return this._isNewline}},{key:"isInlineWhitespace",get:function(){return this._isInlineWhitespace}},{key:"isNonWhitespace",get:function(){return!this.isNewline&&!this.isInlineWhitespace}},{key:"Cast",value:function(e){if(e==this.valueType)return this;if(e==U.Int){var t=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=parseInt(e);return Number.isNaN(n)?{result:t,exists:!1}:{result:n,exists:!0}}(this.value);if(t.exists)return new $(t.result);throw this.BadCastException(e)}if(e==U.Float){var n=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=parseFloat(e);return Number.isNaN(n)?{result:t,exists:!1}:{result:n,exists:!0}}(this.value);if(n.exists)return new K(n.result);throw this.BadCastException(e)}throw this.BadCastException(e)}}]),r}(q),Q=function(e){a(r,e);var t=d(r);function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return n(this,r),t.call(this,e)}return i(r,[{key:"valueType",get:function(){return U.DivertTarget}},{key:"targetPath",get:function(){return null===this.value?D("Value.value"):this.value},set:function(e){this.value=e}},{key:"isTruthy",get:function(){throw new Error("Shouldn't be checking the truthiness of a divert target")}},{key:"Cast",value:function(e){if(e==this.valueType)return this;throw this.BadCastException(e)}},{key:"toString",value:function(){return"DivertTargetValue("+this.targetPath+")"}}]),r}(q),Y=function(e){a(r,e);var t=d(r);function r(e){var i,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;return n(this,r),(i=t.call(this,e))._contextIndex=a,i}return i(r,[{key:"contextIndex",get:function(){return this._contextIndex},set:function(e){this._contextIndex=e}},{key:"variableName",get:function(){return null===this.value?D("Value.value"):this.value},set:function(e){this.value=e}},{key:"valueType",get:function(){return U.VariablePointer}},{key:"isTruthy",get:function(){throw new Error("Shouldn't be checking the truthiness of a variable pointer")}},{key:"Cast",value:function(e){if(e==this.valueType)return this;throw this.BadCastException(e)}},{key:"toString",value:function(){return"VariablePointerValue("+this.variableName+")"}},{key:"Copy",value:function(){return new r(this.variableName,this.contextIndex)}}]),r}(q),X=function(e){a(r,e);var t=d(r);function r(e,i){var a;return n(this,r),a=t.call(this,null),e||i?e instanceof B?a.value=new B(e):e instanceof V&&"number"==typeof i&&(a.value=new B({Key:e,Value:i})):a.value=new B,a}return i(r,[{key:"isTruthy",get:function(){return null===this.value?D("this.value"):this.value.Count>0}},{key:"valueType",get:function(){return U.List}},{key:"Cast",value:function(e){if(null===this.value)return D("Value.value");if(e==U.Int){var t=this.value.maxItem;return t.Key.isNull?new $(0):new $(t.Value)}if(e==U.Float){var n=this.value.maxItem;return n.Key.isNull?new K(0):new K(n.Value)}if(e==U.String){var r=this.value.maxItem;return r.Key.isNull?new J(""):new J(r.Key.toString())}if(e==this.valueType)return this;throw this.BadCastException(e)}}],[{key:"RetainListOriginsForAssignment",value:function(e,t){var n=E(e,r),i=E(t,r);return i&&null===i.value?D("newList.value"):n&&null===n.value?D("oldList.value"):void(n&&i&&0==i.value.Count&&i.value.SetInitialOriginNames(n.value.originNames))}}]),r}(q);!function(e){e[e.Bool=-1]="Bool",e[e.Int=0]="Int",e[e.Float=1]="Float",e[e.List=2]="List",e[e.String=3]="String",e[e.DivertTarget=4]="DivertTarget",e[e.VariablePointer=5]="VariablePointer"}(U||(U={}));var Z=function(){function e(){n(this,e),this.obj=null,this.approximate=!1}return i(e,[{key:"correctObj",get:function(){return this.approximate?null:this.obj}},{key:"container",get:function(){return this.obj instanceof ee?this.obj:null}},{key:"copy",value:function(){var t=new e;return t.obj=this.obj,t.approximate=this.approximate,t}}]),e}(),ee=function(e){a(r,e);var t=d(r);function r(){var e;return n(this,r),(e=t.apply(this,arguments)).name=null,e._content=[],e.namedContent=new Map,e.visitsShouldBeCounted=!1,e.turnIndexShouldBeCounted=!1,e.countingAtStartOnly=!1,e._pathToFirstLeafContent=null,e}return i(r,[{key:"hasValidName",get:function(){return null!=this.name&&this.name.length>0}},{key:"content",get:function(){return this._content},set:function(e){this.AddContent(e)}},{key:"namedOnlyContent",get:function(){var e,t=new Map,n=S(this.namedContent);try{for(n.s();!(e=n.n()).done;){var r=m(e.value,2),i=r[0],a=x(r[1],j);t.set(i,a)}}catch(e){n.e(e)}finally{n.f()}var o,l=S(this.content);try{for(l.s();!(o=l.n()).done;){var u=P(o.value);null!=u&&u.hasValidName&&t.delete(u.name)}}catch(e){l.e(e)}finally{l.f()}return 0==t.size&&(t=null),t},set:function(e){var t=this.namedOnlyContent;if(null!=t){var n,r=S(t);try{for(r.s();!(n=r.n()).done;){var i=m(n.value,1)[0];this.namedContent.delete(i)}}catch(e){r.e(e)}finally{r.f()}}if(null!=e){var a,o=S(e);try{for(o.s();!(a=o.n()).done;){var l=P(m(a.value,2)[1]);null!=l&&this.AddToNamedContentOnly(l)}}catch(e){o.e(e)}finally{o.f()}}}},{key:"countFlags",get:function(){var e=0;return this.visitsShouldBeCounted&&(e|=r.CountFlags.Visits),this.turnIndexShouldBeCounted&&(e|=r.CountFlags.Turns),this.countingAtStartOnly&&(e|=r.CountFlags.CountStartOnly),e==r.CountFlags.CountStartOnly&&(e=0),e},set:function(e){var t=e;(t&r.CountFlags.Visits)>0&&(this.visitsShouldBeCounted=!0),(t&r.CountFlags.Turns)>0&&(this.turnIndexShouldBeCounted=!0),(t&r.CountFlags.CountStartOnly)>0&&(this.countingAtStartOnly=!0)}},{key:"pathToFirstLeafContent",get:function(){return null==this._pathToFirstLeafContent&&(this._pathToFirstLeafContent=this.path.PathByAppendingPath(this.internalPathToFirstLeafContent)),this._pathToFirstLeafContent}},{key:"internalPathToFirstLeafContent",get:function(){for(var e=[],t=this;t instanceof r;)t.content.length>0&&(e.push(new W.Component(0)),t=t.content[0]);return new W(e)}},{key:"AddContent",value:function(e){if(e instanceof Array){var t,n=S(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;this.AddContent(r)}}catch(e){n.e(e)}finally{n.f()}}else{var i=e;if(this._content.push(i),i.parent)throw new Error("content is already in "+i.parent);i.parent=this,this.TryAddNamedContent(i)}}},{key:"TryAddNamedContent",value:function(e){var t=P(e);null!=t&&t.hasValidName&&this.AddToNamedContentOnly(t)}},{key:"AddToNamedContentOnly",value:function(e){if(I.AssertType(e,j,"Can only add Runtime.Objects to a Runtime.Container"),x(e,j).parent=this,null===e.name)return D("namedContentObj.name");this.namedContent.set(e.name,e)}},{key:"ContentAtPath",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;-1==n&&(n=e.length);var i=new Z;i.approximate=!1;for(var a=this,o=this,l=t;l<n;++l){var u=e.GetComponent(l);if(null==a){i.approximate=!0;break}var s=a.ContentWithPathComponent(u);if(null==s){i.approximate=!0;break}o=s,a=E(s,r)}return i.obj=o,i}},{key:"InsertContent",value:function(e,t){if(this.content.splice(t,0,e),e.parent)throw new Error("content is already in "+e.parent);e.parent=this,this.TryAddNamedContent(e)}},{key:"AddContentsOfContainer",value:function(e){var t;(t=this.content).push.apply(t,y(e.content));var n,r=S(e.content);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.parent=this,this.TryAddNamedContent(i)}}catch(e){r.e(e)}finally{r.f()}}},{key:"ContentWithPathComponent",value:function(e){if(e.isIndex)return e.index>=0&&e.index<this.content.length?this.content[e.index]:null;if(e.isParent)return this.parent;if(null===e.name)return D("component.name");var t=G(this.namedContent,e.name,null);return t.exists?x(t.result,j):null}},{key:"BuildStringOfHierarchy",value:function(){var e;if(0==arguments.length)return e=new M,this.BuildStringOfHierarchy(e,0,null),e.toString();e=arguments[0];var t=arguments[1],n=arguments[2];function i(){for(var n=0;n<4*t;++n)e.Append(" ")}i(),e.Append("["),this.hasValidName&&e.AppendFormat(" ({0})",this.name),this==n&&e.Append("  <---"),e.AppendLine(),t++;for(var a=0;a<this.content.length;++a){var o=this.content[a];o instanceof r?o.BuildStringOfHierarchy(e,t,n):(i(),o instanceof J?(e.Append('"'),e.Append(o.toString().replace("\n","\\n")),e.Append('"')):e.Append(o.toString())),a!=this.content.length-1&&e.Append(","),o instanceof r||o!=n||e.Append("  <---"),e.AppendLine()}var l,u=new Map,s=S(this.namedContent);try{for(s.s();!(l=s.n()).done;){var c=m(l.value,2),f=c[0],h=c[1];this.content.indexOf(x(h,j))>=0||u.set(f,h)}}catch(e){s.e(e)}finally{s.f()}if(u.size>0){i(),e.AppendLine("-- named: --");var d,p=S(u);try{for(p.s();!(d=p.n()).done;){var v=m(d.value,2)[1];I.AssertType(v,r,"Can only print out named Containers"),v.BuildStringOfHierarchy(e,t,n),e.AppendLine()}}catch(e){p.e(e)}finally{p.f()}}t--,i(),e.Append("]")}}]),r}(j);!function(e){var t;(t=e.CountFlags||(e.CountFlags={}))[t.Visits=1]="Visits",t[t.Turns=2]="Turns",t[t.CountStartOnly=4]="CountStartOnly"}(ee||(ee={}));var te=function(e){a(r,e);var t=d(r);function r(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r.CommandType.NotSet;return n(this,r),(e=t.call(this))._commandType=i,e}return i(r,[{key:"commandType",get:function(){return this._commandType}},{key:"Copy",value:function(){return new r(this.commandType)}},{key:"toString",value:function(){return this.commandType.toString()}}],[{key:"EvalStart",value:function(){return new r(r.CommandType.EvalStart)}},{key:"EvalOutput",value:function(){return new r(r.CommandType.EvalOutput)}},{key:"EvalEnd",value:function(){return new r(r.CommandType.EvalEnd)}},{key:"Duplicate",value:function(){return new r(r.CommandType.Duplicate)}},{key:"PopEvaluatedValue",value:function(){return new r(r.CommandType.PopEvaluatedValue)}},{key:"PopFunction",value:function(){return new r(r.CommandType.PopFunction)}},{key:"PopTunnel",value:function(){return new r(r.CommandType.PopTunnel)}},{key:"BeginString",value:function(){return new r(r.CommandType.BeginString)}},{key:"EndString",value:function(){return new r(r.CommandType.EndString)}},{key:"NoOp",value:function(){return new r(r.CommandType.NoOp)}},{key:"ChoiceCount",value:function(){return new r(r.CommandType.ChoiceCount)}},{key:"Turns",value:function(){return new r(r.CommandType.Turns)}},{key:"TurnsSince",value:function(){return new r(r.CommandType.TurnsSince)}},{key:"ReadCount",value:function(){return new r(r.CommandType.ReadCount)}},{key:"Random",value:function(){return new r(r.CommandType.Random)}},{key:"SeedRandom",value:function(){return new r(r.CommandType.SeedRandom)}},{key:"VisitIndex",value:function(){return new r(r.CommandType.VisitIndex)}},{key:"SequenceShuffleIndex",value:function(){return new r(r.CommandType.SequenceShuffleIndex)}},{key:"StartThread",value:function(){return new r(r.CommandType.StartThread)}},{key:"Done",value:function(){return new r(r.CommandType.Done)}},{key:"End",value:function(){return new r(r.CommandType.End)}},{key:"ListFromInt",value:function(){return new r(r.CommandType.ListFromInt)}},{key:"ListRange",value:function(){return new r(r.CommandType.ListRange)}},{key:"ListRandom",value:function(){return new r(r.CommandType.ListRandom)}}]),r}(j);!function(e){var t;(t=e.CommandType||(e.CommandType={}))[t.NotSet=-1]="NotSet",t[t.EvalStart=0]="EvalStart",t[t.EvalOutput=1]="EvalOutput",t[t.EvalEnd=2]="EvalEnd",t[t.Duplicate=3]="Duplicate",t[t.PopEvaluatedValue=4]="PopEvaluatedValue",t[t.PopFunction=5]="PopFunction",t[t.PopTunnel=6]="PopTunnel",t[t.BeginString=7]="BeginString",t[t.EndString=8]="EndString",t[t.NoOp=9]="NoOp",t[t.ChoiceCount=10]="ChoiceCount",t[t.Turns=11]="Turns",t[t.TurnsSince=12]="TurnsSince",t[t.Random=13]="Random",t[t.SeedRandom=14]="SeedRandom",t[t.VisitIndex=15]="VisitIndex",t[t.SequenceShuffleIndex=16]="SequenceShuffleIndex",t[t.StartThread=17]="StartThread",t[t.Done=18]="Done",t[t.End=19]="End",t[t.ListFromInt=20]="ListFromInt",t[t.ListRange=21]="ListRange",t[t.ListRandom=22]="ListRandom",t[t.ReadCount=23]="ReadCount",t[t.TOTAL_VALUES=24]="TOTAL_VALUES"}(te||(te={}));var ne=function(e){a(r,e);var t=d(r);function r(){var e;return n(this,r),(e=t.apply(this,arguments))._prototypeRuntimeConstantExpression=null,e.outputWhenComplete=!1,e.GenerateRuntimeObject=function(){var t=new ee;return t.AddContent(te.EvalStart()),e.GenerateIntoContainer(t),e.outputWhenComplete&&t.AddContent(te.EvalOutput()),t.AddContent(te.EvalEnd()),t},e.GenerateConstantIntoContainer=function(t){null===e._prototypeRuntimeConstantExpression&&(e._prototypeRuntimeConstantExpression=new ee,e.GenerateIntoContainer(e._prototypeRuntimeConstantExpression));var n,r=S(e._prototypeRuntimeConstantExpression.content);try{for(r.s();!(n=r.n()).done;){var i=n.value.Copy();i&&t.AddContent(i)}}catch(e){r.e(e)}finally{r.f()}},e.toString=function(){return"No string value in JavaScript."},e}return i(r,[{key:"typeName",get:function(){return"Expression"}},{key:"Equals",value:function(e){return!1}}]),r}(R),re=function(e){a(r,e);var t=d(r);function r(){return n(this,r),t.apply(this,arguments)}return i(r)}(j),ie=function(e){a(r,e);var t=d(r);function r(){var e;if(n(this,r),(e=t.call(this))._name=null,e._numberOfParameters=0,e._prototype=null,e._isPrototype=!1,e._operationFuncs=null,0===arguments.length)r.GenerateNativeFunctionsIfNecessary();else if(1===arguments.length){var i=arguments[0];r.GenerateNativeFunctionsIfNecessary(),e.name=i}else if(2===arguments.length){var a=arguments[0],o=arguments[1];e._isPrototype=!0,e.name=a,e.numberOfParameters=o}return e}return i(r,[{key:"name",get:function(){return null===this._name?D("NativeFunctionCall._name"):this._name},set:function(e){this._name=e,this._isPrototype||(null===r._nativeFunctions?D("NativeFunctionCall._nativeFunctions"):this._prototype=r._nativeFunctions.get(this._name)||null)}},{key:"numberOfParameters",get:function(){return this._prototype?this._prototype.numberOfParameters:this._numberOfParameters},set:function(e){this._numberOfParameters=e}},{key:"Call",value:function(e){if(this._prototype)return this._prototype.Call(e);if(this.numberOfParameters!=e.length)throw new Error("Unexpected number of parameters");var t,n=!1,r=S(e);try{for(r.s();!(t=r.n()).done;){var i=t.value;if(i instanceof re)throw new z('Attempting to perform operation on a void value. Did you forget to "return" a value from a function you called here?');i instanceof X&&(n=!0)}}catch(e){r.e(e)}finally{r.f()}if(2==e.length&&n)return this.CallBinaryListOperation(e);var a=this.CoerceValuesToSingleType(e),o=a[0].valueType;return o==U.Int||o==U.Float||o==U.String||o==U.DivertTarget||o==U.List?this.CallType(a):null}},{key:"CallType",value:function(e){var t=x(e[0],q),n=t.valueType,i=t,a=e.length;if(2==a||1==a){if(null===this._operationFuncs)return D("NativeFunctionCall._operationFuncs");var o=this._operationFuncs.get(n);if(!o){var l=U[n];throw new z("Cannot perform operation "+this.name+" on "+l)}if(2==a){var u=x(e[1],q),s=o;if(null===i.value||null===u.value)return D("NativeFunctionCall.Call BinaryOp values");var c=s(i.value,u.value);return q.Create(c)}var f=o;if(null===i.value)return D("NativeFunctionCall.Call UnaryOp value");var h=f(i.value);return this.name===r.Int?q.Create(h,U.Int):this.name===r.Float?q.Create(h,U.Float):q.Create(h,t.valueType)}throw new Error("Unexpected number of parameters to NativeFunctionCall: "+e.length)}},{key:"CallBinaryListOperation",value:function(e){if(("+"==this.name||"-"==this.name)&&e[0]instanceof X&&e[1]instanceof $)return this.CallListIncrementOperation(e);var t=x(e[0],q),n=x(e[1],q);if(!("&&"!=this.name&&"||"!=this.name||t.valueType==U.List&&n.valueType==U.List)){if(null===this._operationFuncs)return D("NativeFunctionCall._operationFuncs");var r=this._operationFuncs.get(U.Int);if(null===r)return D("NativeFunctionCall.CallBinaryListOperation op");var i=function(e){if("boolean"==typeof e)return e;throw new Error("".concat(e," is not a boolean"))}(r(t.isTruthy?1:0,n.isTruthy?1:0));return new H(i)}if(t.valueType==U.List&&n.valueType==U.List)return this.CallType([t,n]);throw new z("Can not call use "+this.name+" operation on "+U[t.valueType]+" and "+U[n.valueType])}},{key:"CallListIncrementOperation",value:function(e){var t=x(e[0],X),n=x(e[1],$),r=new B;if(null===t.value)return D("NativeFunctionCall.CallListIncrementOperation listVal.value");var i,a=S(t.value);try{for(a.s();!(i=a.n()).done;){var o=m(i.value,2),l=o[0],u=o[1],s=V.fromSerializedKey(l);if(null===this._operationFuncs)return D("NativeFunctionCall._operationFuncs");var c=this._operationFuncs.get(U.Int);if(null===n.value)return D("NativeFunctionCall.CallListIncrementOperation intVal.value");var f=c(u,n.value),h=null;if(null===t.value.origins)return D("NativeFunctionCall.CallListIncrementOperation listVal.value.origins");var d,p=S(t.value.origins);try{for(p.s();!(d=p.n()).done;){var v=d.value;if(v.name==s.originName){h=v;break}}}catch(e){p.e(e)}finally{p.f()}if(null!=h){var y=h.TryGetItemWithValue(f,V.Null);y.exists&&r.Add(y.result,f)}}}catch(e){a.e(e)}finally{a.f()}return new X(r)}},{key:"CoerceValuesToSingleType",value:function(e){var t,n=U.Int,r=null,i=S(e);try{for(i.s();!(t=i.n()).done;){var a=x(t.value,q);a.valueType>n&&(n=a.valueType),a.valueType==U.List&&(r=E(a,X))}}catch(e){i.e(e)}finally{i.f()}var o=[];if(U[n]==U[U.List]){var l,u=S(e);try{for(u.s();!(l=u.n()).done;){var s=x(l.value,q);if(s.valueType==U.List)o.push(s);else{if(s.valueType!=U.Int){var c=U[s.valueType];throw new z("Cannot mix Lists and "+c+" values in this operation")}var f=parseInt(s.valueObject);if(null===(r=x(r,X)).value)return D("NativeFunctionCall.CoerceValuesToSingleType specialCaseList.value");var h=r.value.originOfMaxItem;if(null===h)return D("NativeFunctionCall.CoerceValuesToSingleType list");var d=h.TryGetItemWithValue(f,V.Null);if(!d.exists)throw new z("Could not find List item with the value "+f+" in "+h.name);var p=new X(d.result,f);o.push(p)}}}catch(e){u.e(e)}finally{u.f()}}else{var v,m=S(e);try{for(m.s();!(v=m.n()).done;){var y=x(v.value,q).Cast(n);o.push(y)}}catch(e){m.e(e)}finally{m.f()}}return o}},{key:"AddOpFuncForType",value:function(e,t){null==this._operationFuncs&&(this._operationFuncs=new Map),this._operationFuncs.set(e,t)}},{key:"toString",value:function(){return'Native "'+this.name+'"'}}],[{key:"CallWithName",value:function(e){return new r(e)}},{key:"CallExistsWithName",value:function(e){return this.GenerateNativeFunctionsIfNecessary(),this._nativeFunctions.get(e)}},{key:"Identity",value:function(e){return e}},{key:"GenerateNativeFunctionsIfNecessary",value:function(){null==this._nativeFunctions&&(this._nativeFunctions=new Map,this.AddIntBinaryOp(this.Add,(function(e,t){return e+t})),this.AddIntBinaryOp(this.Subtract,(function(e,t){return e-t})),this.AddIntBinaryOp(this.Multiply,(function(e,t){return e*t})),this.AddIntBinaryOp(this.Divide,(function(e,t){return Math.floor(e/t)})),this.AddIntBinaryOp(this.Mod,(function(e,t){return e%t})),this.AddIntUnaryOp(this.Negate,(function(e){return-e})),this.AddIntBinaryOp(this.Equal,(function(e,t){return e==t})),this.AddIntBinaryOp(this.Greater,(function(e,t){return e>t})),this.AddIntBinaryOp(this.Less,(function(e,t){return e<t})),this.AddIntBinaryOp(this.GreaterThanOrEquals,(function(e,t){return e>=t})),this.AddIntBinaryOp(this.LessThanOrEquals,(function(e,t){return e<=t})),this.AddIntBinaryOp(this.NotEquals,(function(e,t){return e!=t})),this.AddIntUnaryOp(this.Not,(function(e){return 0==e})),this.AddIntBinaryOp(this.And,(function(e,t){return 0!=e&&0!=t})),this.AddIntBinaryOp(this.Or,(function(e,t){return 0!=e||0!=t})),this.AddIntBinaryOp(this.Max,(function(e,t){return Math.max(e,t)})),this.AddIntBinaryOp(this.Min,(function(e,t){return Math.min(e,t)})),this.AddIntBinaryOp(this.Pow,(function(e,t){return Math.pow(e,t)})),this.AddIntUnaryOp(this.Floor,r.Identity),this.AddIntUnaryOp(this.Ceiling,r.Identity),this.AddIntUnaryOp(this.Int,r.Identity),this.AddIntUnaryOp(this.Float,(function(e){return e})),this.AddFloatBinaryOp(this.Add,(function(e,t){return e+t})),this.AddFloatBinaryOp(this.Subtract,(function(e,t){return e-t})),this.AddFloatBinaryOp(this.Multiply,(function(e,t){return e*t})),this.AddFloatBinaryOp(this.Divide,(function(e,t){return e/t})),this.AddFloatBinaryOp(this.Mod,(function(e,t){return e%t})),this.AddFloatUnaryOp(this.Negate,(function(e){return-e})),this.AddFloatBinaryOp(this.Equal,(function(e,t){return e==t})),this.AddFloatBinaryOp(this.Greater,(function(e,t){return e>t})),this.AddFloatBinaryOp(this.Less,(function(e,t){return e<t})),this.AddFloatBinaryOp(this.GreaterThanOrEquals,(function(e,t){return e>=t})),this.AddFloatBinaryOp(this.LessThanOrEquals,(function(e,t){return e<=t})),this.AddFloatBinaryOp(this.NotEquals,(function(e,t){return e!=t})),this.AddFloatUnaryOp(this.Not,(function(e){return 0==e})),this.AddFloatBinaryOp(this.And,(function(e,t){return 0!=e&&0!=t})),this.AddFloatBinaryOp(this.Or,(function(e,t){return 0!=e||0!=t})),this.AddFloatBinaryOp(this.Max,(function(e,t){return Math.max(e,t)})),this.AddFloatBinaryOp(this.Min,(function(e,t){return Math.min(e,t)})),this.AddFloatBinaryOp(this.Pow,(function(e,t){return Math.pow(e,t)})),this.AddFloatUnaryOp(this.Floor,(function(e){return Math.floor(e)})),this.AddFloatUnaryOp(this.Ceiling,(function(e){return Math.ceil(e)})),this.AddFloatUnaryOp(this.Int,(function(e){return Math.floor(e)})),this.AddFloatUnaryOp(this.Float,r.Identity),this.AddStringBinaryOp(this.Add,(function(e,t){return e+t})),this.AddStringBinaryOp(this.Equal,(function(e,t){return e===t})),this.AddStringBinaryOp(this.NotEquals,(function(e,t){return!(e===t)})),this.AddStringBinaryOp(this.Has,(function(e,t){return e.includes(t)})),this.AddStringBinaryOp(this.Hasnt,(function(e,t){return!e.includes(t)})),this.AddListBinaryOp(this.Add,(function(e,t){return e.Union(t)})),this.AddListBinaryOp(this.Subtract,(function(e,t){return e.Without(t)})),this.AddListBinaryOp(this.Has,(function(e,t){return e.Contains(t)})),this.AddListBinaryOp(this.Hasnt,(function(e,t){return!e.Contains(t)})),this.AddListBinaryOp(this.Intersect,(function(e,t){return e.Intersect(t)})),this.AddListBinaryOp(this.Equal,(function(e,t){return e.Equals(t)})),this.AddListBinaryOp(this.Greater,(function(e,t){return e.GreaterThan(t)})),this.AddListBinaryOp(this.Less,(function(e,t){return e.LessThan(t)})),this.AddListBinaryOp(this.GreaterThanOrEquals,(function(e,t){return e.GreaterThanOrEquals(t)})),this.AddListBinaryOp(this.LessThanOrEquals,(function(e,t){return e.LessThanOrEquals(t)})),this.AddListBinaryOp(this.NotEquals,(function(e,t){return!e.Equals(t)})),this.AddListBinaryOp(this.And,(function(e,t){return e.Count>0&&t.Count>0})),this.AddListBinaryOp(this.Or,(function(e,t){return e.Count>0||t.Count>0})),this.AddListUnaryOp(this.Not,(function(e){return 0==e.Count?1:0})),this.AddListUnaryOp(this.Invert,(function(e){return e.inverse})),this.AddListUnaryOp(this.All,(function(e){return e.all})),this.AddListUnaryOp(this.ListMin,(function(e){return e.MinAsList()})),this.AddListUnaryOp(this.ListMax,(function(e){return e.MaxAsList()})),this.AddListUnaryOp(this.Count,(function(e){return e.Count})),this.AddListUnaryOp(this.ValueOfList,(function(e){return e.maxItem.Value})),this.AddOpToNativeFunc(this.Equal,2,U.DivertTarget,(function(e,t){return e.Equals(t)})),this.AddOpToNativeFunc(this.NotEquals,2,U.DivertTarget,(function(e,t){return!e.Equals(t)})))}},{key:"AddOpToNativeFunc",value:function(e,t,n,i){if(null===this._nativeFunctions)return D("NativeFunctionCall._nativeFunctions");var a=this._nativeFunctions.get(e);a||(a=new r(e,t),this._nativeFunctions.set(e,a)),a.AddOpFuncForType(n,i)}},{key:"AddIntBinaryOp",value:function(e,t){this.AddOpToNativeFunc(e,2,U.Int,t)}},{key:"AddIntUnaryOp",value:function(e,t){this.AddOpToNativeFunc(e,1,U.Int,t)}},{key:"AddFloatBinaryOp",value:function(e,t){this.AddOpToNativeFunc(e,2,U.Float,t)}},{key:"AddFloatUnaryOp",value:function(e,t){this.AddOpToNativeFunc(e,1,U.Float,t)}},{key:"AddStringBinaryOp",value:function(e,t){this.AddOpToNativeFunc(e,2,U.String,t)}},{key:"AddListBinaryOp",value:function(e,t){this.AddOpToNativeFunc(e,2,U.List,t)}},{key:"AddListUnaryOp",value:function(e,t){this.AddOpToNativeFunc(e,1,U.List,t)}}]),r}(j);ie.Add="+",ie.Subtract="-",ie.Divide="/",ie.Multiply="*",ie.Mod="%",ie.Negate="_",ie.Equal="==",ie.Greater=">",ie.Less="<",ie.GreaterThanOrEquals=">=",ie.LessThanOrEquals="<=",ie.NotEquals="!=",ie.Not="!",ie.And="&&",ie.Or="||",ie.Min="MIN",ie.Max="MAX",ie.Pow="POW",ie.Floor="FLOOR",ie.Ceiling="CEILING",ie.Int="INT",ie.Float="FLOAT",ie.Has="?",ie.Hasnt="!?",ie.Intersect="^",ie.ListMin="LIST_MIN",ie.ListMax="LIST_MAX",ie.All="LIST_ALL",ie.Count="LIST_COUNT",ie.ValueOfList="LIST_VALUE",ie.Invert="LIST_INVERT",ie._nativeFunctions=null;var ae=function(e){a(r,e);var t=d(r);function r(e,i){var a;if(n(this,r),(a=t.call(this)).isInt=function(){return"int"==a.subtype},a.isFloat=function(){return"float"==a.subtype},a.isBool=function(){return"bool"==a.subtype},a.GenerateIntoContainer=function(e){a.isInt()?e.AddContent(new $(a.value)):a.isFloat()?e.AddContent(new K(a.value)):a.isBool()&&e.AddContent(new H(a.value))},a.toString=function(){return String(a.value)},("number"!=typeof e||Number.isNaN(e))&&"boolean"!=typeof e)throw new Error("Unexpected object type in NumberExpression.");return a.value=e,a.subtype=i,a}return i(r,[{key:"typeName",get:function(){return"Number"}},{key:"Equals",value:function(e){var t=E(e,r);return!!t&&t.subtype==this.subtype&&t.value==this.value}}]),r}(ne),oe=function(e){a(r,e);var t=d(r);function r(e,i){var a;return n(this,r),(a=t.call(this)).op=i,a.GenerateIntoContainer=function(e){a.innerExpression.GenerateIntoContainer(e),e.AddContent(ie.CallWithName(a.nativeNameForOp))},a.toString=function(){return a.nativeNameForOp+a.innerExpression},a.innerExpression=a.AddContent(e),a}return i(r,[{key:"nativeNameForOp",get:function(){return"-"===this.op?"_":"not"===this.op?"!":this.op}},{key:"typeName",get:function(){return"UnaryExpression"}}]),r}(ne);oe.WithInner=function(e,t){var n=E(e,ae);if(n){if("-"===t){if(n.isInt())return new ae(-n.value,"int");if(n.isFloat())return new ae(-n.value,"float")}else if("!"==t||"not"==t){if(n.isInt())return new ae(0==n.value,"bool");if(n.isFloat())return new ae(0==n.value,"bool");if(n.isBool())return new ae(!n.value,"bool")}throw new Error("Unexpected operation or number type")}return new oe(e,t)};var le=function(e){a(r,e);var t=d(r);function r(e,i,a){var o;return n(this,r),(o=t.call(this)).opName=a,o.GenerateIntoContainer=function(e){o.leftExpression.GenerateIntoContainer(e),o.rightExpression.GenerateIntoContainer(e),o.opName=o.NativeNameForOp(o.opName),e.AddContent(ie.CallWithName(o.opName))},o.NativeNameForOp=function(e){return"and"===e?"&&":"or"===e?"||":"mod"===e?"%":"has"===e?"?":"hasnt"===e?"!?":e},o.toString=function(){return"(".concat(o.leftExpression," ").concat(o.opName," ").concat(o.rightExpression,")")},o.leftExpression=o.AddContent(e),o.rightExpression=o.AddContent(i),o.opName=a,o}return i(r,[{key:"typeName",get:function(){return"BinaryExpression"}},{key:"ResolveReferences",value:function(e){if(v(o(r.prototype),"ResolveReferences",this).call(this,e),"?"===this.NativeNameForOp(this.opName)){var t=E(this.leftExpression,oe);null===t||"not"!==t.op&&"!"!==t.op||this.Error("Using 'not' or '!' here negates '".concat(t.innerExpression,"' rather than the result of the '?' or 'has' operator. You need to add parentheses around the (A ? B) expression."))}}}]),r}(ne),ue=i((function e(t){var r=this;n(this,e),this.set=new Set,this.Add=function(e){return r.set.add(e)},this.AddRange=function(e,t){for(var n=e.charCodeAt(0);n<=t.charCodeAt(0);++n)r.Add(String.fromCharCode(n));return r},this.AddCharacters=function(e){if("string"==typeof e||Array.isArray(e)){var t,n=S(e);try{for(n.s();!(t=n.n()).done;){var i=t.value;r.Add(i)}}catch(e){n.e(e)}finally{n.f()}}else{var a,o=S(e.set);try{for(o.s();!(a=o.n()).done;){var l=a.value;r.Add(l)}}catch(e){o.e(e)}finally{o.f()}}return r},t&&this.AddCharacters(t)}));ue.FromRange=function(e,t){return(new ue).AddRange(e,t)};var se=function(){function e(t,r){var i=this,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(n(this,e),this._start=t,this._end=r,this._correspondingCharSet=new ue,this._excludes=new Set,this.ToCharacterSet=function(){if(0===i._correspondingCharSet.set.size)for(var e=i.start.charCodeAt(0),t=String.fromCharCode(e);e<=i.end.charCodeAt(0);e+=1)i._excludes.has(t)||i._correspondingCharSet.AddCharacters(t);return i._correspondingCharSet},a instanceof ue)this._excludes=a.set;else{var o,l=S(a);try{for(l.s();!(o=l.n()).done;){var u=o.value;this._excludes.add(u)}}catch(e){l.e(e)}finally{l.f()}}}return i(e,[{key:"start",get:function(){return this._start}},{key:"end",get:function(){return this._end}}]),e}();se.Define=function(e,t){return new se(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[])};var ce,fe=function(e){a(r,e);var t=d(r);function r(){var e,i=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return n(this,r),(e=t.call(this))._pathOnChoice=null,e.hasCondition=!1,e.hasStartContent=!1,e.hasChoiceOnlyContent=!1,e.isInvisibleDefault=!1,e.onceOnly=!0,e.onceOnly=i,e}return i(r,[{key:"pathOnChoice",get:function(){if(null!=this._pathOnChoice&&this._pathOnChoice.isRelative){var e=this.choiceTarget;e&&(this._pathOnChoice=e.path)}return this._pathOnChoice},set:function(e){this._pathOnChoice=e}},{key:"choiceTarget",get:function(){return null===this._pathOnChoice?D("ChoicePoint._pathOnChoice"):this.ResolvePath(this._pathOnChoice).container}},{key:"pathStringOnChoice",get:function(){return null===this.pathOnChoice?D("ChoicePoint.pathOnChoice"):this.CompactPathString(this.pathOnChoice)},set:function(e){this.pathOnChoice=new W(e)}},{key:"flags",get:function(){var e=0;return this.hasCondition&&(e|=1),this.hasStartContent&&(e|=2),this.hasChoiceOnlyContent&&(e|=4),this.isInvisibleDefault&&(e|=8),this.onceOnly&&(e|=16),e},set:function(e){this.hasCondition=(1&e)>0,this.hasStartContent=(2&e)>0,this.hasChoiceOnlyContent=(4&e)>0,this.isInvisibleDefault=(8&e)>0,this.onceOnly=(16&e)>0}},{key:"toString",value:function(){return null===this.pathOnChoice?D("ChoicePoint.pathOnChoice"):"Choice: -> "+this.pathOnChoice.toString()}}]),r}(j);!function(e){e[e.Tunnel=0]="Tunnel",e[e.Function=1]="Function",e[e.FunctionEvaluationFromGame=2]="FunctionEvaluationFromGame"}(ce||(ce={}));var he,de=function(){function e(){n(this,e),this.container=null,this.index=-1,2===arguments.length&&(this.container=arguments[0],this.index=arguments[1])}return i(e,[{key:"Resolve",value:function(){return this.index<0?this.container:null==this.container?null:0==this.container.content.length?this.container:this.index>=this.container.content.length?null:this.container.content[this.index]}},{key:"isNull",get:function(){return null==this.container}},{key:"path",get:function(){return this.isNull?null:this.index>=0?this.container.path.PathByAppendingComponent(new W.Component(this.index)):this.container.path}},{key:"toString",value:function(){return this.container?"Ink Pointer -> "+this.container.path.toString()+" -- index "+this.index:"Ink Pointer (null)"}},{key:"copy",value:function(){return new e(this.container,this.index)}}],[{key:"StartOf",value:function(t){return new e(t,0)}},{key:"Null",get:function(){return new e(null,-1)}}]),e}(),pe=function(e){a(r,e);var t=d(r);function r(e){var i;return n(this,r),(i=t.call(this))._targetPath=null,i._targetPointer=de.Null,i.variableDivertName=null,i.pushesToStack=!1,i.stackPushType=0,i.isExternal=!1,i.externalArgs=0,i.isConditional=!1,i.pushesToStack=!1,void 0!==e&&(i.pushesToStack=!0,i.stackPushType=e),i}return i(r,[{key:"targetPath",get:function(){if(null!=this._targetPath&&this._targetPath.isRelative){var e=this.targetPointer.Resolve();e&&(this._targetPath=e.path)}return this._targetPath},set:function(e){this._targetPath=e,this._targetPointer=de.Null}},{key:"targetPointer",get:function(){if(this._targetPointer.isNull){var e=this.ResolvePath(this._targetPath).obj;if(null===this._targetPath)return D("this._targetPath");if(null===this._targetPath.lastComponent)return D("this._targetPath.lastComponent");if(this._targetPath.lastComponent.isIndex){if(null===e)return D("targetObj");this._targetPointer.container=e.parent instanceof ee?e.parent:null,this._targetPointer.index=this._targetPath.lastComponent.index}else this._targetPointer=de.StartOf(e instanceof ee?e:null)}return this._targetPointer.copy()}},{key:"targetPathString",get:function(){return null==this.targetPath?null:this.CompactPathString(this.targetPath)},set:function(e){this.targetPath=null==e?null:new W(e)}},{key:"hasVariableTarget",get:function(){return null!=this.variableDivertName}},{key:"Equals",value:function(e){var t=e;return t instanceof r&&this.hasVariableTarget==t.hasVariableTarget&&(this.hasVariableTarget?this.variableDivertName==t.variableDivertName:null===this.targetPath?D("this.targetPath"):this.targetPath.Equals(t.targetPath))}},{key:"toString",value:function(){if(this.hasVariableTarget)return"Divert(variable: "+this.variableDivertName+")";if(null==this.targetPath)return"Divert(null)";var e=new M,t=this.targetPath.toString();return e.Append("Divert"),this.isConditional&&e.Append("?"),this.pushesToStack&&(this.stackPushType==ce.Function?e.Append(" function"):e.Append(" tunnel")),e.Append(" -> "),e.Append(this.targetPathString),e.Append(" ("),e.Append(t),e.Append(")"),e.toString()}}]),r}(j);!function(e){e[e.Knot=0]="Knot",e[e.List=1]="List",e[e.ListItem=2]="ListItem",e[e.Var=3]="Var",e[e.SubFlowAndWeave=4]="SubFlowAndWeave",e[e.Arg=5]="Arg",e[e.Temp=6]="Temp"}(he||(he={}));var ve=function(e){a(r,e);var t=d(r);function r(e,i){var a;return n(this,r),(a=t.call(this)).variableName=e||null,a.isNewDeclaration=!!i,a.isGlobal=!1,a}return i(r,[{key:"toString",value:function(){return"VarAssign to "+this.variableName}}]),r}(j),me=function(e){a(r,e);var t=d(r);function r(e,i,a){var o;return n(this,r),(o=t.call(this))._condition=null,o._innerContentContainer=null,o._outerContainer=null,o._runtimeChoice=null,o._returnToR1=null,o._returnToR2=null,o._r1Label=null,o._r2Label=null,o._divertToStartContentOuter=null,o._divertToStartContentInner=null,o._startContentRuntimeContainer=null,o.isInvisibleDefault=!1,o.hasWeaveStyleInlineBrackets=!1,o.GenerateRuntimeObject=function(){if(o._outerContainer=new ee,o._runtimeChoice=new fe(o.onceOnly),o._runtimeChoice.isInvisibleDefault=o.isInvisibleDefault,(o.startContent||o.choiceOnlyContent||o.condition)&&o._outerContainer.AddContent(te.EvalStart()),o.startContent){o._returnToR1=new Q,o._outerContainer.AddContent(o._returnToR1);var e=new ve("$r",!0);o._outerContainer.AddContent(e),o._outerContainer.AddContent(te.BeginString()),o._divertToStartContentOuter=new pe,o._outerContainer.AddContent(o._divertToStartContentOuter),o._startContentRuntimeContainer=o.startContent.GenerateRuntimeObject(),o._startContentRuntimeContainer.name="s";var t=new pe;t.variableDivertName="$r",o._startContentRuntimeContainer.AddContent(t),o._outerContainer.AddToNamedContentOnly(o._startContentRuntimeContainer),o._r1Label=new ee,o._r1Label.name="$r1",o._outerContainer.AddContent(o._r1Label),o._outerContainer.AddContent(te.EndString()),o._runtimeChoice.hasStartContent=!0}if(o.choiceOnlyContent){o._outerContainer.AddContent(te.BeginString());var n=o.choiceOnlyContent.GenerateRuntimeObject();o._outerContainer.AddContentsOfContainer(n),o._outerContainer.AddContent(te.EndString()),o._runtimeChoice.hasChoiceOnlyContent=!0}if(o.condition&&(o.condition.GenerateIntoContainer(o._outerContainer),o._runtimeChoice.hasCondition=!0),(o.startContent||o.choiceOnlyContent||o.condition)&&o._outerContainer.AddContent(te.EvalEnd()),o._outerContainer.AddContent(o._runtimeChoice),o._innerContentContainer=new ee,o.startContent){o._returnToR2=new Q,o._innerContentContainer.AddContent(te.EvalStart()),o._innerContentContainer.AddContent(o._returnToR2),o._innerContentContainer.AddContent(te.EvalEnd());var r=new ve("$r",!0);o._innerContentContainer.AddContent(r),o._divertToStartContentInner=new pe,o._innerContentContainer.AddContent(o._divertToStartContentInner),o._r2Label=new ee,o._r2Label.name="$r2",o._innerContentContainer.AddContent(o._r2Label)}if(o.innerContent){var i=o.innerContent.GenerateRuntimeObject();o._innerContentContainer.AddContentsOfContainer(i)}return o.story.countAllVisits&&(o._innerContentContainer.visitsShouldBeCounted=!0),o._innerContentContainer.countingAtStartOnly=!0,o._outerContainer},o.toString=function(){return null!==o.choiceOnlyContent?"* ".concat(o.startContent,"[").concat(o.choiceOnlyContent,"]..."):"* ".concat(o.startContent,"...")},o.startContent=e,o.choiceOnlyContent=i,o.innerContent=a,o.indentationDepth=1,e&&o.AddContent(o.startContent),i&&o.AddContent(o.choiceOnlyContent),a&&o.AddContent(o.innerContent),o.onceOnly=!0,o}return i(r,[{key:"runtimeChoice",get:function(){if(!this._runtimeChoice)throw new Error;return this._runtimeChoice}},{key:"name",get:function(){var e;return(null===(e=this.identifier)||void 0===e?void 0:e.name)||null}},{key:"condition",get:function(){return this._condition},set:function(e){this._condition=e,e&&this.AddContent(e)}},{key:"runtimeContainer",get:function(){return this._innerContentContainer}},{key:"innerContentContainer",get:function(){return this._innerContentContainer}},{key:"containerForCounting",get:function(){return this._innerContentContainer}},{key:"runtimePath",get:function(){if(!this.innerContentContainer||!this.innerContentContainer.path)throw new Error;return this.innerContentContainer.path}},{key:"typeName",get:function(){return"Choice"}},{key:"ResolveReferences",value:function(e){var t;if(this._innerContentContainer&&(this.runtimeChoice.pathOnChoice=this._innerContentContainer.path,this.onceOnly&&(this._innerContentContainer.visitsShouldBeCounted=!0)),this._returnToR1){if(!this._r1Label)throw new Error;this._returnToR1.targetPath=this._r1Label.path}if(this._returnToR2){if(!this._r2Label)throw new Error;this._returnToR2.targetPath=this._r2Label.path}if(this._divertToStartContentOuter){if(!this._startContentRuntimeContainer)throw new Error;this._divertToStartContentOuter.targetPath=this._startContentRuntimeContainer.path}if(this._divertToStartContentInner){if(!this._startContentRuntimeContainer)throw new Error;this._divertToStartContentInner.targetPath=this._startContentRuntimeContainer.path}v(o(r.prototype),"ResolveReferences",this).call(this,e),this.identifier&&((null===(t=this.identifier)||void 0===t?void 0:t.name)||"").length>0&&e.CheckForNamingCollisions(this,this.identifier,he.SubFlowAndWeave)}}]),r}(R),ye=i((function e(){var t=this;n(this,e),this.characterIndex=0,this.characterInLineIndex=0,this.lineIndex=0,this.reportedErrorInScope=!1,this.uniqueId=0,this.customFlags=0,this.CopyFrom=function(n){e._uniqueIdCounter++,t.uniqueId=e._uniqueIdCounter,t.characterIndex=n.characterIndex,t.characterInLineIndex=n.characterInLineIndex,t.lineIndex=n.lineIndex,t.customFlags=n.customFlags,t.reportedErrorInScope=!1},this.SquashFrom=function(e){t.characterIndex=e.characterIndex,t.characterInLineIndex=e.characterInLineIndex,t.lineIndex=e.lineIndex,t.reportedErrorInScope=e.reportedErrorInScope}}));ye._uniqueIdCounter=1e3;var ge=function(){function e(){var t=this;n(this,e),this._stack=[],this._numElements=0,this.StringParserState=function(){t._stack=new Array(200);for(var e=0;e<200;++e)t._stack[e]=new ye;t._numElements=1},this.Push=function(){if(t._numElements>=t._stack.length&&t._numElements>0)throw new Error("Stack overflow in parser state.");var e=t._stack[t._numElements-1],n=t._stack[t._numElements];return t._numElements++,n.CopyFrom(e),n.uniqueId},this.Pop=function(e){if(1==t._numElements)throw new Error("Attempting to remove final stack element is illegal! Mismatched Begin/Succceed/Fail?");if(t.currentElement.uniqueId!=e)throw new Error("Mismatched rule IDs while Poping - do you have mismatched Begin/Succeed/Fail?");t._numElements-=1},this.Peek=function(e){if(t.currentElement.uniqueId!=e)throw new Error("Mismatched rule IDs while Peeking - do you have mismatched Begin/Succeed/Fail?");return t._stack[t._numElements-1]},this.PeekPenultimate=function(){return t._numElements>=2?t._stack[t._numElements-2]:null},this.Squash=function(){if(t._numElements<2)throw new Error("Attempting to remove final stack element is illegal! Mismatched Begin/Succceed/Fail?");var e=t._stack[t._numElements-2],n=t._stack[t._numElements-1];e.SquashFrom(n),t._numElements-=1},this.NoteErrorReported=function(){var e,n=S(t._stack);try{for(n.s();!(e=n.n()).done;)e.value.reportedErrorInScope=!0}catch(e){n.e(e)}finally{n.f()}};for(var r=0;r<200;r++)this._stack[r]=new ye;this._numElements=1}return i(e,[{key:"currentElement",get:function(){return this._stack[this._numElements-1]}},{key:"lineIndex",get:function(){return this.currentElement.lineIndex},set:function(e){this.currentElement.lineIndex=e}},{key:"characterIndex",get:function(){return this.currentElement.characterIndex},set:function(e){this.currentElement.characterIndex=e}},{key:"characterInLineIndex",get:function(){return this.currentElement.characterInLineIndex},set:function(e){this.currentElement.characterInLineIndex=e}},{key:"customFlags",get:function(){return this.currentElement.customFlags},set:function(e){this.currentElement.customFlags=e}},{key:"errorReportedAlreadyInScope",get:function(){return this.currentElement.reportedErrorInScope}},{key:"stackHeight",get:function(){return this._numElements}}]),e}(),be=Symbol("ParseSuccessStruct"),Se=function(){function e(t){var r=this;n(this,e),this.ParseRule=null,this.errorHandler=null,this.hadError=!1,this.BeginRule=function(){return r.state.Push()},this.FailRule=function(e){return r.state.Pop(e),null},this.CancelRule=function(e){r.state.Pop(e)},this.SucceedRule=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=r.state.Peek(t),a=r.state.PeekPenultimate();r.RuleDidSucceed&&r.RuleDidSucceed(n,a,i),r.state.Squash();var o=n;return null===o&&(o=e.ParseSuccess),o},this.Expect=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=r.ParseObject(e);if(null===i){var a;null===t&&(t=e.name);var o=r.LineRemainder();a=null===o||0===o.length?"end of line":"'".concat(o,"'"),r.Error("Expected ".concat(t," but saw ").concat(a)),null!==n&&(i=n())}return i},this.Error=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];r.ErrorOnLine(e,r.lineIndex+1,t)},this.ErrorWithParsedObject=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];r.ErrorOnLine(e,t.debugMetadata?t.debugMetadata.startLineNumber:-1,n)},this.ErrorOnLine=function(e,t,n){if(!r.state.errorReportedAlreadyInScope){var i=n?"Warning":"Error";if(!r.errorHandler)throw new Error("".concat(i," on line ").concat(t,": ").concat(e));r.errorHandler(e,r.index,t-1,n),r.state.NoteErrorReported()}n||(r.hadError=!0)},this.Warning=function(e){return r.Error(e,!0)},this.LineRemainder=function(){return r.Peek((function(){return r.ParseUntilCharactersFromString("\n\r")}))},this.SetFlag=function(e,t){t?r.state.customFlags|=e:r.state.customFlags&=~e},this.GetFlag=function(e){return Boolean(r.state.customFlags&e)},this.ParseObject=function(e){var t=r.BeginRule(),n=r.state.stackHeight,i=e();if(n!==r.state.stackHeight)throw new Error("Mismatched Begin/Fail/Succeed rules");return null===i?r.FailRule(t):(r.SucceedRule(t,i),i)},this.Parse=function(e){var t=r.BeginRule(),n=e();return null===n?(r.FailRule(t),null):(r.SucceedRule(t,n),n)},this.OneOf=function(e){var t,n=S(e);try{for(n.s();!(t=n.n()).done;){var i=t.value,a=r.ParseObject(i);if(null!==a)return a}}catch(e){n.e(e)}finally{n.f()}return null},this.OneOrMore=function(e){var t=[],n=null;do{null!==(n=r.ParseObject(e))&&t.push(n)}while(null!==n);return t.length>0?t:null},this.Optional=function(t){return function(){var n=r.ParseObject(t);return null===n?e.ParseSuccess:n}},this.Exclude=function(t){return function(){return r.ParseObject(t)&&e.ParseSuccess}},this.OptionalExclude=function(t){return function(){return r.ParseObject(t),e.ParseSuccess}},this.String=function(e){return function(){return r.ParseString(e)}},this.TryAddResultToList=function(t,n){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(t!==e.ParseSuccess){if(r&&Array.isArray(t)&&null!==t){var i,a=S(t);try{for(a.s();!(i=a.n()).done;){var o=i.value;n.push(o)}}catch(e){a.e(e)}finally{a.f()}return}n.push(t)}},this.Interleave=function(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=r.BeginRule(),l=[],u=r.ParseObject(t);if(null===u)return r.FailRule(o);r.TryAddResultToList(u,l,a);var s=null,c=null;do{if(null!==i&&null!==r.Peek(i))break;if(null===(s=r.ParseObject(n)))break;if(r.TryAddResultToList(s,l,a),c=null,null!==s){if(null===(c=r.ParseObject(t)))break;r.TryAddResultToList(c,l,a)}}while((null!==s||null!==c)&&(s!==e.ParseSuccess||c!=e.ParseSuccess)&&r.remainingLength>0);return 0===l.length?r.FailRule(o):r.SucceedRule(o,l)},this.ParseString=function(e){if(e.length>r.remainingLength)return null;for(var t=r.BeginRule(),n=r.index,i=r.characterInLineIndex,a=r.lineIndex,o=!0,l=0;l<e.length;l+=1){var u=e[l];if(r._chars[n]!==u){o=!1;break}"\n"===u&&(a++,i=-1),n++,i++}return r.index=n,r.characterInLineIndex=i,r.lineIndex=a,o?r.SucceedRule(t,e):r.FailRule(t)},this.ParseSingleCharacter=function(){if(r.remainingLength>0){var e=r._chars[r.index];return"\n"===e&&(r.lineIndex+=1,r.characterInLineIndex=-1),r.index+=1,r.characterInLineIndex+=1,e}return"0"},this.ParseUntilCharactersFromString=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;return r.ParseCharactersFromString(e,!1,t)},this.ParseUntilCharactersFromCharSet=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;return r.ParseCharactersFromCharSet(e,!1,t)},this.ParseCharactersFromString=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1,i=new ue(e);return"number"==typeof t?r.ParseCharactersFromCharSet(i,!0,t):r.ParseCharactersFromCharSet(i,t,n)},this.ParseCharactersFromCharSet=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;-1===n&&(n=Number.MAX_SAFE_INTEGER);for(var i=r.index,a=r.index,o=r.characterInLineIndex,l=r.lineIndex,u=0;a<r._chars.length&&e.set.has(r._chars[a])===t&&u<n;)"\n"===r._chars[a]&&(l+=1,o=-1),a+=1,o+=1,u+=1;return r.index=a,r.characterInLineIndex=o,r.lineIndex=l,r.index>i?r._chars.slice(i,r.index).join(""):null},this.Peek=function(e){var t=r.BeginRule(),n=e();return r.CancelRule(t),n},this.ParseInt=function(){var t=r.index,n=r.characterInLineIndex,i=null!==r.ParseString("-");r.ParseCharactersFromString(" \t");var a,o=r.ParseCharactersFromCharSet(e.numbersCharacterSet);return null===o?(r.index=t,r.characterInLineIndex=n,null):Number.isNaN(Number(o))?(r.Error("Failed to read integer value: "+o+". Perhaps it's out of the range of acceptable numbers ink supports? ("+Number.MIN_SAFE_INTEGER+" to "+Number.MAX_SAFE_INTEGER+")"),null):(a=Number(o),i?-a:a)},this.ParseFloat=function(){var t=r.index,n=r.characterInLineIndex,i=r.ParseInt();if(null!==i&&null!==r.ParseString(".")){var a=r.ParseCharactersFromCharSet(e.numbersCharacterSet);return Number("".concat(i,".").concat(a))}return r.index=t,r.characterInLineIndex=n,null},this.ParseNewline=function(){var e=r.BeginRule();return r.ParseString("\r"),null===r.ParseString("\n")?r.FailRule(e):r.SucceedRule(e,"\n")};var i=this.PreProcessInputString(t);this.state=new ge,this._chars=t?i.split(""):[],this.inputString=i}return i(e,[{key:"currentCharacter",get:function(){return this.index>=0&&this.remainingLength>0?this._chars[this.index]:"0"}},{key:"PreProcessInputString",value:function(e){return e}},{key:"endOfInput",get:function(){return this.index>=this._chars.length}},{key:"remainingString",get:function(){return this._chars.slice(this.index,this.index+this.remainingLength).join("")}},{key:"remainingLength",get:function(){return this._chars.length-this.index}},{key:"lineIndex",get:function(){return this.state.lineIndex},set:function(e){this.state.lineIndex=e}},{key:"characterInLineIndex",get:function(){return this.state.characterInLineIndex},set:function(e){this.state.characterInLineIndex=e}},{key:"index",get:function(){return this.state.characterIndex},set:function(e){this.state.characterIndex=e}},{key:"ParseUntil",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=this.BeginRule(),i=new ue;null!==t&&(i.set=new Set([].concat(y(i.set.values()),y(t.set.values())))),null!==n&&(i.set=new Set([].concat(y(i.set.values()),y(n.set.values()))));for(var a="";;){var o=this.ParseUntilCharactersFromCharSet(i);if(o&&(a+=o),null!==this.Peek(e))break;if(this.endOfInput)break;var l=this.currentCharacter;if(null===t||!t.set.has(l))break;a+=l,"\n"===l&&(this.lineIndex+=1,this.characterInLineIndex=-1),this.index+=1,this.characterInLineIndex+=1}return a.length>0?this.SucceedRule(r,String(a)):this.FailRule(r)}}]),e}();Se.ParseSuccess=be,Se.numbersCharacterSet=new ue("0123456789");var Ce,we=function(e){a(r,e);var t=d(r);function r(){var e;return n(this,r),(e=t.apply(this,arguments))._commentOrNewlineStartCharacter=new ue("/\r\n"),e._commentBlockEndCharacter=new ue("*"),e._newlineCharacters=new ue("\n\r"),e.Process=function(){var t=e.Interleave(e.Optional(e.CommentsAndNewlines),e.Optional(e.MainInk));return null!==t?t.join(""):""},e.MainInk=function(){return e.ParseUntil(e.CommentsAndNewlines,e._commentOrNewlineStartCharacter,null)},e.CommentsAndNewlines=function(){var t=e.Interleave(e.Optional(e.ParseNewline),e.Optional(e.ParseSingleComment));return null!==t?t.join(""):null},e.ParseSingleComment=function(){return e.OneOf([e.EndOfLineComment,e.BlockComment])},e.EndOfLineComment=function(){return null===e.ParseString("//")?null:(e.ParseUntilCharactersFromCharSet(e._newlineCharacters),"")},e.BlockComment=function(){if(null===e.ParseString("/*"))return null;var t=e.lineIndex,n=e.ParseUntil(e.String("*/"),e._commentBlockEndCharacter,null);return e.endOfInput||e.ParseString("*/"),null!=n?"\n".repeat(e.lineIndex-t):null},e}return i(r,[{key:"PreProcessInputString",value:function(e){return e}}]),r}(Se),ke=function(e){a(r,e);var t=d(r);function r(e,i){var a;return n(this,r),(a=t.call(this)).initialCondition=e,a.branches=i,a._reJoinTarget=null,a.GenerateRuntimeObject=function(){var e=new ee;a.initialCondition&&e.AddContent(a.initialCondition.runtimeObject);var t,n=S(a.branches);try{for(n.s();!(t=n.n()).done;){var r=t.value.runtimeObject;e.AddContent(r)}}catch(e){n.e(e)}finally{n.f()}return null===a.initialCondition||null===a.branches[0].ownExpression||a.branches[a.branches.length-1].isElse||e.AddContent(te.PopEvaluatedValue()),a._reJoinTarget=te.NoOp(),e.AddContent(a._reJoinTarget),e},a.initialCondition&&a.AddContent(a.initialCondition),null!==a.branches&&a.AddContent(a.branches),a}return i(r,[{key:"typeName",get:function(){return"Conditional"}},{key:"ResolveReferences",value:function(e){var t,n=this._reJoinTarget.path,i=S(this.branches);try{for(i.s();!(t=i.n()).done;){var a=t.value;if(!a.returnDivert)throw new Error;a.returnDivert.targetPath=n}}catch(e){i.e(e)}finally{i.f()}v(o(r.prototype),"ResolveReferences",this).call(this,e)}}]),r}(R),_e=function(e){a(r,e);var t=d(r);function r(e){var i;return n(this,r),(i=t.call(this)).text=e,i.GenerateRuntimeObject=function(){return new J(i.text)},i.toString=function(){return i.text},i}return i(r,[{key:"typeName",get:function(){return"Text"}}]),r}(R),Ee=function(e){a(r,e);var t=d(r);function r(e,i){var a;return n(this,r),(a=t.call(this))._expression=null,a.GenerateRuntimeObject=function(){return null},a.constantIdentifier=e,i&&(a._expression=a.AddContent(i)),a}return i(r,[{key:"constantName",get:function(){var e;return null===(e=this.constantIdentifier)||void 0===e?void 0:e.name}},{key:"expression",get:function(){if(!this._expression)throw new Error;return this._expression}},{key:"typeName",get:function(){return"CONST"}},{key:"ResolveReferences",value:function(e){v(o(r.prototype),"ResolveReferences",this).call(this,e),e.CheckForNamingCollisions(this,this.constantIdentifier,he.Var)}}]),r}(R);!function(e){e[e.Story=0]="Story",e[e.Knot=1]="Knot",e[e.Stitch=2]="Stitch",e[e.WeavePoint=3]="WeavePoint"}(Ce||(Ce={}));var xe=function(e){a(r,e);var t=d(r);function r(e,i){var a;return n(this,r),(a=t.call(this)).indentationDepth=i,a.GenerateRuntimeObject=function(){var e=new ee;if(e.name=a.name,a.story.countAllVisits&&(e.visitsShouldBeCounted=!0),e.countingAtStartOnly=!0,a.content){var t,n=S(a.content);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.AddContent(r.runtimeObject)}}catch(e){n.e(e)}finally{n.f()}}return e},a.toString=function(){var e,t;return"- ".concat((null===(e=a.identifier)||void 0===e?void 0:e.name)?"("+(null===(t=a.identifier)||void 0===t?void 0:t.name)+")":"gather")},e&&(a.identifier=e),a}return i(r,[{key:"name",get:function(){var e;return(null===(e=this.identifier)||void 0===e?void 0:e.name)||null}},{key:"runtimeContainer",get:function(){return this.runtimeObject}},{key:"typeName",get:function(){return"Gather"}},{key:"ResolveReferences",value:function(e){v(o(r.prototype),"ResolveReferences",this).call(this,e),this.identifier&&(this.identifier.name||"").length>0&&e.CheckForNamingCollisions(this,this.identifier,he.SubFlowAndWeave)}}]),r}(R),Pe=function(){function e(t,r){var i=this;n(this,e),this._dotSeparatedComponents=null,this.toString=function(){return null===i.components||0===i.components.length?i.baseTargetLevel===Ce.WeavePoint?"-> <next gather point>":"<invalid Path>":"-> ".concat(i.dotSeparatedComponents)},this.ResolveFromContext=function(e){if(null==i.components||0==i.components.length)return null;var t=i.ResolveBaseTarget(e);return null===t?null:i.components.length>1?i.ResolveTailComponents(t):t},this.ResolveBaseTarget=function(e){for(var t=i.firstComponent,n=e;n;){var r=n===e,a=i.GetChildFromContext(n,t,null,r);if(a)return a;n=n.parent}return null},this.ResolveTailComponents=function(e){var t=e;if(!i.components)return null;for(var n=1;n<i.components.length;++n){var r,a=i.components[n].name,o=E(t,Ne);if(r=null!==o?o.flowLevel+1:Ce.WeavePoint,null===(t=i.GetChildFromContext(t,a,r)))break}return t},this.GetChildFromContext=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=null===n,a=E(e,Ke);if(t&&null!==a&&(i||n===Ce.WeavePoint))return a.WeavePointNamed(t);var o=E(e,Ne);if(t&&null!==o){var l=r||o.flowLevel===Ce.Knot;return o.ContentWithNameAtLevel(t,n,l)}return null},Object.values(Ce).includes(t)?(this._baseTargetLevel=t,this.components=r||[]):Array.isArray(t)?(this._baseTargetLevel=null,this.components=t||[]):(this._baseTargetLevel=null,this.components=[t])}return i(e,[{key:"baseTargetLevel",get:function(){return this.baseLevelIsAmbiguous?Ce.Story:this._baseTargetLevel}},{key:"baseLevelIsAmbiguous",get:function(){return!this._baseTargetLevel}},{key:"firstComponent",get:function(){return null!=this.components&&this.components.length?this.components[0].name:null}},{key:"numberOfComponents",get:function(){return this.components?this.components.length:0}},{key:"dotSeparatedComponents",get:function(){return null==this._dotSeparatedComponents&&(this._dotSeparatedComponents=(this.components?this.components:[]).map((function(e){return e.name})).filter(N).join(".")),this._dotSeparatedComponents}},{key:"typeName",get:function(){return"Path"}}]),e}(),Oe=function(e){a(r,e);var t=d(r);function r(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return n(this,r),(e=t.call(this)).returnedExpression=null,e.GenerateRuntimeObject=function(){var t=new ee;return e.returnedExpression?t.AddContent(e.returnedExpression.runtimeObject):(t.AddContent(te.EvalStart()),t.AddContent(new re),t.AddContent(te.EvalEnd())),t.AddContent(te.PopFunction()),t},i&&(e.returnedExpression=e.AddContent(i)),e}return i(r,[{key:"typeName",get:function(){return"ReturnType"}}]),r}(R);function Te(e){for(var t=e.parent;t;){if(t.hasOwnProperty("iamFlowbase")&&t.iamFlowbase())return t;t=t.parent}return null}var Ae=function(){function e(t){var r=this;n(this,e),this.debugMetadata=null,this.toString=function(){return r.name||"undefined identifer"},this.name=t}return i(e,[{key:"typeName",get:function(){return"Identifier"}}],[{key:"Done",value:function(){return new e("DONE")}}]),e}(),Ne=function(e){a(r,e);var t=d(r);function r(e){var i,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,l=arguments.length>3&&void 0!==arguments[3]&&arguments[3],u=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return n(this,r),(i=t.call(this)).isFunction=l,i._rootWeave=null,i._subFlowsByName=new Map,i._startingSubFlowDivert=null,i._startingSubFlowRuntime=null,i._firstChildFlow=null,i.variableDeclarations=new Map,i.identifier=null,i.args=null,i.iamFlowbase=function(){return!0},i.SplitWeaveAndSubFlowContent=function(e,t){var n,a,o=[],l=[];i._subFlowsByName=new Map;var u,s=S(e);try{for(s.s();!(u=s.n()).done;){var c=u.value,f=E(c,r);f?(null===i._firstChildFlow&&(i._firstChildFlow=f),l.push(c),(null===(n=f.identifier)||void 0===n?void 0:n.name)&&i._subFlowsByName.set(null===(a=f.identifier)||void 0===a?void 0:a.name,f)):o.push(c)}}catch(e){s.e(e)}finally{s.f()}t&&o.push(new xe(null,1),new Me(new Pe(Ae.Done())));var h=[];return o.length>0&&(i._rootWeave=new Ke(o,0),h.push(i._rootWeave)),l.length>0&&h.push.apply(h,l),h},i.ResolveVariableWithName=function(e,t){var n,r={},a=null===t?f(i):Te(t);if(a){if(null!==a.args){var o,l=S(a.args);try{for(l.s();!(o=l.n()).done;)if((null===(n=o.value.identifier)||void 0===n?void 0:n.name)===e)return r.found=!0,r.isArgument=!0,r.ownerFlow=a,r}catch(e){l.e(e)}finally{l.f()}}if(a!==i.story&&a.variableDeclarations.has(e))return r.found=!0,r.ownerFlow=a,r.isTemporary=!0,r}return i.story.variableDeclarations.has(e)?(r.found=!0,r.ownerFlow=i.story,r.isGlobal=!0,r):(r.found=!1,r)},i.AddNewVariableDeclaration=function(e){var t=e.variableName;if(i.variableDeclarations.has(t)){var n=i.variableDeclarations.get(t),r="";return n.debugMetadata&&(r=" (".concat(n.debugMetadata,")")),void i.Error("found declaration variable '".concat(t,"' that was already declared").concat(r),e,!1)}i.variableDeclarations.set(e.variableName,e)},i.ResolveWeavePointNaming=function(){i._rootWeave&&i._rootWeave.ResolveWeavePointNaming();var e,t=S(i._subFlowsByName);try{for(t.s();!(e=t.n()).done;){var n=m(e.value,2)[1];n.hasOwnProperty("ResolveWeavePointNaming")&&n.ResolveWeavePointNaming()}}catch(e){t.e(e)}finally{t.f()}},i.GenerateRuntimeObject=function(){var e,t=null;i.isFunction?i.CheckForDisallowedFunctionFlowControl():i.flowLevel!==Ce.Knot&&i.flowLevel!==Ce.Stitch||null!==(t=i.Find(Oe)())&&i.Error("Return statements can only be used in knots that are declared as functions: == function ".concat(i.identifier," =="),t);var n=new ee;n.name=null===(e=i.identifier)||void 0===e?void 0:e.name,i.story.countAllVisits&&(n.visitsShouldBeCounted=!0),i.GenerateArgumentVariableAssignments(n);for(var a=0;null!==i.content&&a<i.content.length;){var o=i.content[a];if(o instanceof r){var l=o,u=l.runtimeObject;0!==a||l.hasParameters||i.flowLevel!==Ce.Knot||(i._startingSubFlowDivert=new pe,n.AddContent(i._startingSubFlowDivert),i._startingSubFlowRuntime=u);var s=u,c=n.namedContent.get(s.name)||null;if(c){var f="".concat(i.GetType()," already contains flow named '").concat(s.name,"' (at ").concat(c.debugMetadata,")");i.Error(f,l)}n.AddToNamedContentOnly(s)}else o&&n.AddContent(o.runtimeObject);a+=1}return i.flowLevel===Ce.Story||i.isFunction||null===i._rootWeave||null!==t||i._rootWeave.ValidateTermination(i.WarningInTermination),n},i.GenerateArgumentVariableAssignments=function(e){var t;if(null!==i.args&&0!==i.args.length)for(var n=i.args.length-1;n>=0;--n){var r=(null===(t=i.args[n].identifier)||void 0===t?void 0:t.name)||null,a=new ve(r,!0);e.AddContent(a)}},i.ContentWithNameAtLevel=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if((n===i.flowLevel||null===n)&&e===(null===(t=i.identifier)||void 0===t?void 0:t.name))return f(i);if(n===Ce.WeavePoint||null===n){var a=null;if(i._rootWeave&&(a=i._rootWeave.WeavePointNamed(e)))return a;if(n===Ce.WeavePoint)return r?i.DeepSearchForAnyLevelContent(e):null}if(null!==n&&n<i.flowLevel)return null;var o=i._subFlowsByName.get(e)||null;return!o||null!==n&&n!==o.flowLevel?r?i.DeepSearchForAnyLevelContent(e):null:o},i.DeepSearchForAnyLevelContent=function(e){var t=i.ContentWithNameAtLevel(e,Ce.WeavePoint,!1);if(t)return t;var n,r=S(i._subFlowsByName);try{for(r.s();!(n=r.n()).done;){var a=m(n.value,2)[1].ContentWithNameAtLevel(e,null,!0);if(a)return a}}catch(e){r.e(e)}finally{r.f()}return null},i.CheckForDisallowedFunctionFlowControl=function(){i.flowLevel!==Ce.Knot&&i.Error("Functions cannot be stitches - i.e. they should be defined as '== function myFunc ==' rather than internal to another knot.");var e,t=S(i._subFlowsByName);try{for(t.s();!(e=t.n()).done;){var n=m(e.value,2),r=n[0],a=n[1];i.Error("Functions may not contain stitches, but saw '".concat(r,"' within the function '").concat(i.identifier,"'"),a)}}catch(e){t.e(e)}finally{t.f()}if(!i._rootWeave)throw new Error;var o,l=S(i._rootWeave.FindAll(Me)());try{for(l.s();!(o=l.n()).done;){var u=o.value;u.isFunctionCall||u.parent instanceof je||i.Error("Functions may not contain diverts, but saw '".concat(u,"'"),u)}}catch(e){l.e(e)}finally{l.f()}var s,c=S(i._rootWeave.FindAll(me)());try{for(c.s();!(s=c.n()).done;){var f=s.value;i.Error("Functions may not contain choices, but saw '".concat(f,"'"),f)}}catch(e){c.e(e)}finally{c.f()}},i.WarningInTermination=function(e){var t="Apparent loose end exists where the flow runs out. Do you need a '-> DONE' statement, choice or divert?";e.parent===i._rootWeave&&i._firstChildFlow&&(t="".concat(t," Note that if you intend to enter '").concat(i._firstChildFlow.identifier,"' next, you need to divert to it explicitly."));var n=E(e,Me);n&&n.isTunnel&&(t+=" When final tunnel to '".concat(n.target," ->' returns it won't have anywhere to go.")),i.Warning(t,e)},i.toString=function(){return"".concat(i.typeName," '").concat(i.identifier,"'")},i.identifier=e,i.args=o,null===a&&(a=[]),i.PreProcessTopLevelObjects(a),a=i.SplitWeaveAndSubFlowContent(a,"Story"==i.GetType()&&!u),i.AddContent(a),i}return i(r,[{key:"hasParameters",get:function(){return null!==this.args&&this.args.length>0}},{key:"subFlowsByName",get:function(){return this._subFlowsByName}},{key:"typeName",get:function(){return this.isFunction?"Function":String(this.flowLevel)}},{key:"name",get:function(){var e;return(null===(e=this.identifier)||void 0===e?void 0:e.name)||null}},{key:"PreProcessTopLevelObjects",value:function(e){}},{key:"ResolveReferences",value:function(e){var t,n;if(this._startingSubFlowDivert){if(!this._startingSubFlowRuntime)throw new Error;this._startingSubFlowDivert.targetPath=this._startingSubFlowRuntime.path}if(v(o(r.prototype),"ResolveReferences",this).call(this,e),null!==this.args){var i,a=S(this.args);try{for(a.s();!(i=a.n()).done;){var l=i.value;e.CheckForNamingCollisions(this,l.identifier,he.Arg,"argument")}}catch(e){a.e(e)}finally{a.f()}for(var u=0;u<this.args.length;u+=1)for(var s=u+1;s<this.args.length;s+=1)(null===(t=this.args[u].identifier)||void 0===t?void 0:t.name)==(null===(n=this.args[s].identifier)||void 0===n?void 0:n.name)&&this.Error("Multiple arguments with the same name: '".concat(this.args[u].identifier,"'"))}if(this.flowLevel!==Ce.Story){var c=this.flowLevel===Ce.Knot?he.Knot:he.SubFlowAndWeave;e.CheckForNamingCollisions(this,this.identifier,c)}}}]),r}(R),Ie=function(e){a(r,e);var t=d(r);function r(e){var i;n(this,r),(i=t.call(this)).dontFlatten=!1,i.TrimTrailingWhitespace=function(){for(var e=i.content.length-1;e>=0;--e){var t=E(i.content[e],_e);if(null===t)break;if(t.text=t.text.replace(new RegExp(/[ \t]/g),""),0!==t.text.length)break;i.content.splice(e,1)}},i.GenerateRuntimeObject=function(){var e=new ee;if(null!==i.content){var t,n=S(i.content);try{for(n.s();!(t=n.n()).done;){var r=t.value.runtimeObject;r&&e.AddContent(r)}}catch(e){n.e(e)}finally{n.f()}}return i.dontFlatten&&i.story.DontFlattenContainer(e),e},i.toString=function(){return"ContentList(".concat(i.content.join(", "),")")},e&&i.AddContent(e);for(var a=arguments.length,o=new Array(a>1?a-1:0),l=1;l<a;l++)o[l-1]=arguments[l];return o&&i.AddContent(o),i}return i(r,[{key:"runtimeContainer",get:function(){return this.runtimeObject}},{key:"typeName",get:function(){return"ContentList"}}]),r}(R),Re=function(e){a(r,e);var t=d(r);function r(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return n(this,r),(e=t.call(this)).pathForCount=null,e.name=i,e}return i(r,[{key:"containerForCount",get:function(){return null===this.pathForCount?null:this.ResolvePath(this.pathForCount).container}},{key:"pathStringForCount",get:function(){return null===this.pathForCount?null:this.CompactPathString(this.pathForCount)},set:function(e){this.pathForCount=null===e?null:new W(e)}},{key:"toString",value:function(){return null!=this.name?"var("+this.name+")":"read_count("+this.pathStringForCount+")"}}]),r}(j),Fe=function(e){a(r,e);var t=d(r);function r(e){var i;return n(this,r),(i=t.call(this)).pathIdentifiers=e,i._runtimeVarRef=null,i.isConstantReference=!1,i.isListItemReference=!1,i.GenerateIntoContainer=function(e){var t=i.story.constants.get(i.name);if(t)return t.GenerateConstantIntoContainer(e),void(i.isConstantReference=!0);if(i._runtimeVarRef=new Re(i.name),1===i.path.length||2===i.path.length){var n="",r="";1===i.path.length?n=i.path[0]:(r=i.path[0],n=i.path[1]),i.story.ResolveListItem(r,n,f(i))&&(i.isListItemReference=!0)}e.AddContent(i._runtimeVarRef)},i.toString=function(){return"{".concat(i.path.join("."),"}")},i}return i(r,[{key:"name",get:function(){return this.path.join(".")}},{key:"path",get:function(){return this.pathIdentifiers.map((function(e){return e.name})).filter(N)}},{key:"identifier",get:function(){if(!this.pathIdentifiers||0==this.pathIdentifiers.length)return null;var e=this.path.join(".");return new Ae(e)}},{key:"runtimeVarRef",get:function(){return this._runtimeVarRef}},{key:"typeName",get:function(){return"ref"}},{key:"ResolveReferences",value:function(e){if(v(o(r.prototype),"ResolveReferences",this).call(this,e),!this.isConstantReference&&!this.isListItemReference){var t=new Pe(this.pathIdentifiers),n=t.ResolveFromContext(this);if(n){if(!n.containerForCounting)throw new Error;if(n.containerForCounting.visitsShouldBeCounted=!0,null===this._runtimeVarRef)return;this._runtimeVarRef.pathForCount=n.runtimePath,this._runtimeVarRef.name=null;var i=E(n,Ne);i&&i.isFunction&&(this.parent instanceof Ke||this.parent instanceof Ie||this.parent instanceof Ne)&&this.Warning("'".concat(i.identifier,"' being used as read count rather than being called as function. Perhaps you intended to write ").concat(i.identifier,"()"))}else{if(this.path.length>1){var a="Could not find target for read count: ".concat(t);return this.path.length<=2&&(a+=", or couldn't find list item with the name ".concat(this.path.join(","))),void this.Error(a)}e.ResolveVariableWithName(this.name,this).found||this.Error("Unresolved variable: ".concat(this.name),this)}}}}]),r}(ne),We=function(e){a(r,e);var t=d(r);function r(e,i){var a;return n(this,r),(a=t.call(this))._divertTargetToCount=null,a._variableReferenceToCount=null,a.shouldPopReturnedValue=!1,a.GenerateIntoContainer=function(e){var t=a.story.ResolveList(a.name),n=!1;if(a.isChoiceCount)a.args.length>0&&a.Error("The CHOICE_COUNT() function shouldn't take any arguments"),e.AddContent(te.ChoiceCount());else if(a.isTurns)a.args.length>0&&a.Error("The TURNS() function shouldn't take any arguments"),e.AddContent(te.Turns());else if(a.isTurnsSince||a.isReadCount){var r=E(a.args[0],je),i=E(a.args[0],Fe);if(1!==a.args.length||null===r&&null===i)return void a.Error("The ".concat(a.name,"() function should take one argument: a divert target to the target knot, stitch, gather or choice you want to check. e.g. TURNS_SINCE(-> myKnot)"));r?(a._divertTargetToCount=r,a.AddContent(a._divertTargetToCount),a._divertTargetToCount.GenerateIntoContainer(e)):i&&(a._variableReferenceToCount=i,a.AddContent(a._variableReferenceToCount),a._variableReferenceToCount.GenerateIntoContainer(e)),a.isTurnsSince?e.AddContent(te.TurnsSince()):e.AddContent(te.ReadCount())}else if(a.isRandom){2!==a.args.length&&a.Error("RANDOM should take 2 parameters: a minimum and a maximum integer");for(var o=0;o<a.args.length;o+=1){var l=E(a.args[o],ae);if(l&&!l.isInt()){var u=0===o?"minimum":"maximum";a.Error("RANDOM's ".concat(u," parameter should be an integer"))}a.args[o].GenerateIntoContainer(e)}e.AddContent(te.Random())}else if(a.isSeedRandom){1!==a.args.length&&a.Error("SEED_RANDOM should take 1 parameter - an integer seed");var s=E(a.args[0],ae);s&&!s.isInt()&&a.Error("SEED_RANDOM's parameter should be an integer seed"),a.args[0].GenerateIntoContainer(e),e.AddContent(te.SeedRandom())}else if(a.isListRange){3!==a.args.length&&a.Error("LIST_RANGE should take 3 parameters - a list, a min and a max");for(var c=0;c<a.args.length;c+=1)a.args[c].GenerateIntoContainer(e);e.AddContent(te.ListRange())}else if(a.isListRandom)1!==a.args.length&&a.Error("LIST_RANDOM should take 1 parameter - a list"),a.args[0].GenerateIntoContainer(e),e.AddContent(te.ListRandom());else if(ie.CallExistsWithName(a.name)){var f=ie.CallWithName(a.name);if(f.numberOfParameters!==a.args.length){var h="".concat(name," should take ").concat(f.numberOfParameters," parameter");f.numberOfParameters>1&&(h+="s"),a.Error(h)}for(var d=0;d<a.args.length;d+=1)a.args[d].GenerateIntoContainer(e);e.AddContent(ie.CallWithName(a.name))}else if(null!==t)if(a.args.length>1&&a.Error("Can currently only construct a list from one integer (or an empty list from a given list definition)"),1===a.args.length)e.AddContent(new J(a.name)),a.args[0].GenerateIntoContainer(e),e.AddContent(te.ListFromInt());else{var p=new B;p.SetInitialOriginName(a.name),e.AddContent(new X(p))}else e.AddContent(a._proxyDivert.runtimeObject),n=!0;n||a.content.splice(a.content.indexOf(a._proxyDivert),1),a.shouldPopReturnedValue&&e.AddContent(te.PopEvaluatedValue())},a.toString=function(){var e=a.args.join(", ");return"".concat(a.name,"(").concat(e,")")},a._proxyDivert=new Me(new Pe(e),i),a._proxyDivert.isFunctionCall=!0,a.AddContent(a._proxyDivert),a}return i(r,[{key:"proxyDivert",get:function(){return this._proxyDivert}},{key:"name",get:function(){return this._proxyDivert.target.firstComponent||""}},{key:"args",get:function(){return this._proxyDivert.args}},{key:"runtimeDivert",get:function(){return this._proxyDivert.runtimeDivert}},{key:"isChoiceCount",get:function(){return"CHOICE_COUNT"===this.name}},{key:"isTurns",get:function(){return"TURNS"===this.name}},{key:"isTurnsSince",get:function(){return"TURNS_SINCE"===this.name}},{key:"isRandom",get:function(){return"RANDOM"===this.name}},{key:"isSeedRandom",get:function(){return"SEED_RANDOM"===this.name}},{key:"isListRange",get:function(){return"LIST_RANGE"===this.name}},{key:"isListRandom",get:function(){return"LIST_RANDOM"===this.name}},{key:"isReadCount",get:function(){return"READ_COUNT"===this.name}},{key:"typeName",get:function(){return"FunctionCall"}},{key:"ResolveReferences",value:function(e){if(v(o(r.prototype),"ResolveReferences",this).call(this,e),!this.content.includes(this._proxyDivert)&&null!==this.args){var t,n=S(this.args);try{for(n.s();!(t=n.n()).done;)t.value.ResolveReferences(e)}catch(e){n.e(e)}finally{n.f()}}if(this._divertTargetToCount){var i=this._divertTargetToCount.divert,a=null!=i.runtimeDivert.variableDivertName;if(a)return void this.Error("When getting the TURNS_SINCE() of a variable target, remove the '->' - i.e. it should just be TURNS_SINCE(".concat(i.runtimeDivert.variableDivertName,")"));var l=i.targetContent;if(null===l)a||this.Error("Failed to find target for TURNS_SINCE: '".concat(i.target,"'"));else{if(!l.containerForCounting)throw new Error;l.containerForCounting.turnIndexShouldBeCounted=!0}}else if(this._variableReferenceToCount){var u=this._variableReferenceToCount.runtimeVarRef;if(!u)throw new Error;null!==u.pathForCount&&this.Error("Should be '".concat(name,"'(-> '").concat(this._variableReferenceToCount.name,"). Usage without the '->' only makes sense for variable targets."))}}}]),r}(ne);We.IsBuiltIn=function(e){return!!ie.CallExistsWithName(e)||"CHOICE_COUNT"===e||"TURNS_SINCE"===e||"TURNS"===e||"RANDOM"===e||"SEED_RANDOM"===e||"LIST_VALUE"===e||"LIST_RANDOM"===e||"READ_COUNT"===e};var Le,De=function(e){a(r,e);var t=d(r);function r(e){var i;return n(this,r),(i=t.call(this)).GenerateIntoContainer=function(e){var t,n=!0,r=S(i.subExpressions);try{for(r.s();!(t=r.n()).done;)t.value.GenerateIntoContainer(e),n||e.AddContent(ie.CallWithName("&&")),n=!1}catch(e){r.e(e)}finally{r.f()}},i.AddContent(e),i}return i(r,[{key:"subExpressions",get:function(){return this.content}},{key:"typeName",get:function(){return"MultipleConditionExpression"}}]),r}(ne),je=function(e){a(r,e);var t=d(r);function r(e){var i;return n(this,r),(i=t.call(this))._runtimeDivert=null,i._runtimeDivertTargetValue=null,i.GenerateIntoContainer=function(e){i.divert.GenerateRuntimeObject(),i._runtimeDivert=i.divert.runtimeDivert,i._runtimeDivertTargetValue=new Q,e.AddContent(i.runtimeDivertTargetValue)},i.Equals=function(e){var t=E(e,r);return!!(t&&i.divert.target&&t.divert.target)&&i.divert.target.dotSeparatedComponents===t.divert.target.dotSeparatedComponents},i.divert=i.AddContent(e),i}return i(r,[{key:"runtimeDivert",get:function(){if(!this._runtimeDivert)throw new Error;return this._runtimeDivert}},{key:"runtimeDivertTargetValue",get:function(){if(!this._runtimeDivertTargetValue)throw new Error;return this._runtimeDivertTargetValue}},{key:"typeName",get:function(){return"DivertTarget"}},{key:"ResolveReferences",value:function(e){if(v(o(r.prototype),"ResolveReferences",this).call(this,e),this.divert.isDone||this.divert.isEnd)this.Error("Can't use -> DONE or -> END as variable divert targets",this);else{for(var t=this;t&&t instanceof ne;){var n=!1,i=!1,a=t.parent;if(a instanceof le){var l=a;"=="!==l.opName&&"!="!==l.opName?n=!0:(l.leftExpression instanceof r||l.leftExpression instanceof Fe)&&(l.rightExpression instanceof r||l.rightExpression instanceof Fe)||(n=!0),i=!0}else if(a instanceof We){var u=a;u.isTurnsSince||u.isReadCount||(n=!0),i=!0}else(a instanceof ne||a instanceof De||a instanceof me&&a.condition===t||a instanceof ke||a instanceof Je)&&(n=!0,i=!0);if(n&&this.Error("Can't use a divert target like that. Did you intend to call '".concat(this.divert.target,"' as a function: likeThis(), or check the read count: likeThis, with no arrows?"),this),i)break;t=a}if(this.runtimeDivert.hasVariableTarget){if(!this.divert.target)throw new Error;this.Error("Since '".concat(this.divert.target.dotSeparatedComponents,"' is a variable, it shouldn't be preceded by '->' here."))}this.runtimeDivert.targetPath&&(this.runtimeDivertTargetValue.targetPath=this.runtimeDivert.targetPath);var s=this.divert.targetContent;if(null!==s){var c=s.containerForCounting;if(null!==c){var f=E(this.parent,We);f&&f.isTurnsSince||(c.visitsShouldBeCounted=!0),c.turnIndexShouldBeCounted=!0}var h=E(s,Ne);if(null!=h&&null!==h.args){var d,p=S(h.args);try{for(p.s();!(d=p.n()).done;){var m=d.value;m.isByReference&&this.Error("Can't store a divert target to a knot or function that has by-reference arguments ('".concat(h.identifier,"' has 'ref ").concat(m.identifier,"')."))}}catch(e){p.e(e)}finally{p.f()}}}}}}]),r}(ne),Me=function(e){a(r,e);var t=d(r);function r(e,i){var a;return n(this,r),(a=t.call(this)).args=[],a.target=null,a.targetContent=null,a._runtimeDivert=null,a.isFunctionCall=!1,a.isEmpty=!1,a.isTunnel=!1,a.isThread=!1,a.GenerateRuntimeObject=function(){if(a.isEnd)return te.End();if(a.isDone)return te.Done();a.runtimeDivert=new pe,a.ResolveTargetContent(),a.CheckArgumentValidity();var e=null!==a.args&&a.args.length>0;if(e||a.isFunctionCall||a.isTunnel||a.isThread){var t=new ee;if(e){a.isFunctionCall||t.AddContent(te.EvalStart());var n=null;a.targetContent&&(n=a.targetContent.args);for(var r=0;r<a.args.length;++r){var i=a.args[r],o=null;if(n&&r<n.length&&(o=n[r]),o&&o.isByReference){var l=E(i,Fe);if(!l){a.Error("Expected variable name to pass by reference to 'ref ".concat(o.identifier,"' but saw ").concat(i));break}var u=new Pe(l.pathIdentifiers);if(u.ResolveFromContext(f(a))){a.Error("can't pass a read count by reference. '".concat(u.dotSeparatedComponents,"' is a knot/stitch/label, but '").concat(a.target.dotSeparatedComponents,"' requires the name of a VAR to be passed."));break}var s=new Y(l.name);t.AddContent(s)}else i.GenerateIntoContainer(t)}a.isFunctionCall||t.AddContent(te.EvalEnd())}return a.isThread?t.AddContent(te.StartThread()):(a.isFunctionCall||a.isTunnel)&&(a.runtimeDivert.pushesToStack=!0,a.runtimeDivert.stackPushType=a.isFunctionCall?ce.Function:ce.Tunnel),t.AddContent(a.runtimeDivert),t}return a.runtimeDivert},a.PathAsVariableName=function(){return a.target?a.target.firstComponent:null},a.ResolveTargetContent=function(){if(!a.isEmpty&&!a.isEnd&&null===a.targetContent){var e=a.PathAsVariableName();if(null!==e){var t=E(Te(f(a)),Ne);if(t){var n=t.ResolveVariableWithName(e,f(a));if(n.found){if(n.isArgument&&n.ownerFlow&&n.ownerFlow.args){var r=n.ownerFlow.args.find((function(t){var n;return(null===(n=t.identifier)||void 0===n?void 0:n.name)==e}));r&&!r.isDivertTarget&&a.Error("Since '".concat(r.identifier,"' is used as a variable divert target (on ").concat(a.debugMetadata,"), it should be marked as: -> ").concat(r.identifier),n.ownerFlow)}return void(a.runtimeDivert.variableDivertName=e)}}}if(!a.target)throw new Error;a.targetContent=a.target.ResolveFromContext(f(a))}},a.CheckArgumentValidity=function(){if(!a.isEmpty){var e=0;if(null!==a.args&&a.args.length>0&&(e=a.args.length),null!==a.targetContent){var t=E(a.targetContent,Ne);if(0!==e||null!==t&&t.hasParameters)if(null===t&&e>0)a.Error("target needs to be a knot or stitch in order to pass arguments");else if(null!==t&&(null===t.args||!t.args&&e>0))a.Error("target (".concat(t.name,") doesn't take parameters"));else if(a.parent instanceof je)e>0&&a.Error("can't store arguments in a divert target variable");else{var n,r=t.args.length;if(r!==e)return n=0===e?"but there weren't any passed to it":e<r?"but only got ".concat(e):"but got ".concat(e),void a.Error("to '".concat(t.identifier,"' requires ").concat(r," arguments, ").concat(n));for(var i=0;i<r;++i){var o=t.args[i],l=a.args[i];if(o.isDivertTarget){var u=E(l,Fe);if(l instanceof je||null!==u){if(u){var s=new Pe(u.pathIdentifiers);s.ResolveFromContext(u)&&a.Error("Passing read count of '".concat(s.dotSeparatedComponents,"' instead of a divert target. You probably meant '").concat(s,"'"))}}else a.Error("Target '".concat(t.identifier,"' expects a divert target for the parameter named -> ").concat(o.identifier," but saw ").concat(l),l)}}null!==t||a.Error("Can't call as a function or with arguments unless it's a knot or stitch")}}}},a.CheckExternalArgumentValidity=function(e){var t=a.target?a.target.firstComponent:null,n=e.externals.get(t);if(!n)throw new Error("external not found");var r=n.argumentNames.length,i=0;a.args&&(i=a.args.length),i!==r&&a.Error("incorrect number of arguments sent to external function '".concat(t,"'. Expected ").concat(r," but got ").concat(i))},a.toString=function(){var e="";return null===a.target?"-> <empty divert>":(e+=a.target.toString(),a.isTunnel&&(e+=" ->"),a.isFunctionCall&&(e+=" ()"),e)},e&&(a.target=e),i&&(a.args=i,a.AddContent(i)),a}return i(r,[{key:"runtimeDivert",get:function(){if(!this._runtimeDivert)throw new Error;return this._runtimeDivert},set:function(e){this._runtimeDivert=e}},{key:"isEnd",get:function(){return Boolean(this.target&&"END"===this.target.dotSeparatedComponents)}},{key:"isDone",get:function(){return Boolean(this.target&&"DONE"===this.target.dotSeparatedComponents)}},{key:"typeName",get:function(){return"Divert"}},{key:"ResolveReferences",value:function(e){if(!(this.isEmpty||this.isEnd||this.isDone)){if(!this.runtimeDivert)throw new Error;this.targetContent&&(this.runtimeDivert.targetPath=this.targetContent.runtimePath),v(o(r.prototype),"ResolveReferences",this).call(this,e);var t=E(this.targetContent,Ne);t&&(!t.isFunction&&this.isFunctionCall?v(o(r.prototype),"Error",this).call(this,"".concat(t.identifier," hasn't been marked as a function, but it's being called as one. Do you need to delcare the knot as '== function ").concat(t.identifier," =='?")):!t.isFunction||this.isFunctionCall||this.parent instanceof je||v(o(r.prototype),"Error",this).call(this,t.identifier+" can't be diverted to. It can only be called as a function since it's been marked as such: '"+t.identifier+"(...)'"));var n=null!==this.targetContent,i=!1,a=!1;if(!this.target)throw new Error;if(1===this.target.numberOfComponents){if(!this.target.firstComponent)throw new Error;if(i=We.IsBuiltIn(this.target.firstComponent),a=e.IsExternal(this.target.firstComponent),i||a)return this.isFunctionCall||v(o(r.prototype),"Error",this).call(this,"".concat(this.target.firstComponent," must be called as a function: ~ ").concat(this.target.firstComponent,"()")),void(a&&(this.runtimeDivert.isExternal=!0,null!==this.args&&(this.runtimeDivert.externalArgs=this.args.length),this.runtimeDivert.pushesToStack=!1,this.runtimeDivert.targetPath=new W(this.target.firstComponent),this.CheckExternalArgumentValidity(e)))}null==this.runtimeDivert.variableDivertName&&(n||i||a||this.Error("target not found: '".concat(this.target,"'")))}}},{key:"Error",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];t!==this&&t?v(o(r.prototype),"Error",this).call(this,e,t):this.isFunctionCall?v(o(r.prototype),"Error",this).call(this,"Function call ".concat(e),t,n):v(o(r.prototype),"Error",this).call(this,"Divert ".concat(e),t,n)}}]),r}(R),Ve=i((function e(t,r){n(this,e),this.divert=t,this.targetRuntimeObj=r})),Be=i((function e(t,r){n(this,e),this.divert=t,this.targetContent=r}));!function(e){e[e.Stopping=1]="Stopping",e[e.Cycle=2]="Cycle",e[e.Shuffle=4]="Shuffle",e[e.Once=8]="Once"}(Le||(Le={}));var ze,Ge=function(e){a(r,e);var t=d(r);function r(e,i){var a;n(this,r),(a=t.call(this)).sequenceType=i,a._sequenceDivertsToResolve=[],a.GenerateRuntimeObject=function(){var e=new ee;e.visitsShouldBeCounted=!0,e.countingAtStartOnly=!0,a._sequenceDivertsToResolve=[],e.AddContent(te.EvalStart()),e.AddContent(te.VisitIndex());var t=(a.sequenceType&Le.Once)>0,n=(a.sequenceType&Le.Cycle)>0,r=(a.sequenceType&Le.Stopping)>0,i=(a.sequenceType&Le.Shuffle)>0,o=a.sequenceElements.length;if(t&&(o+=1),r||t?(e.AddContent(new $(o-1)),e.AddContent(ie.CallWithName("MIN"))):n&&(e.AddContent(new $(a.sequenceElements.length)),e.AddContent(ie.CallWithName("%"))),i){var l=te.NoOp();if(t||r){var u=r?a.sequenceElements.length-1:a.sequenceElements.length;e.AddContent(te.Duplicate()),e.AddContent(new $(u)),e.AddContent(ie.CallWithName("=="));var s=new pe;s.isConditional=!0,e.AddContent(s),a.AddDivertToResolve(s,l)}var c=a.sequenceElements.length;r&&(c-=1),e.AddContent(new $(c)),e.AddContent(te.SequenceShuffleIndex()),(t||r)&&e.AddContent(l)}e.AddContent(te.EvalEnd());for(var f=te.NoOp(),h=0;h<o;h+=1){e.AddContent(te.EvalStart()),e.AddContent(te.Duplicate()),e.AddContent(new $(h)),e.AddContent(ie.CallWithName("==")),e.AddContent(te.EvalEnd());var d=new pe;d.isConditional=!0,e.AddContent(d);var p=void 0;(p=h<a.sequenceElements.length?a.sequenceElements[h].runtimeObject:new ee).name="s".concat(h),p.InsertContent(te.PopEvaluatedValue(),0);var v=new pe;p.AddContent(v),e.AddToNamedContentOnly(p),a.AddDivertToResolve(d,p),a.AddDivertToResolve(v,f)}return e.AddContent(f),e},a.AddDivertToResolve=function(e,t){a._sequenceDivertsToResolve.push(new Be(e,t))},a.sequenceType=i,a.sequenceElements=[];var o,l=S(e);try{for(l.s();!(o=l.n()).done;){var u,s=o.value,c=s.content;u=null===c||0===c.length?s:new Ke(c),a.sequenceElements.push(u),a.AddContent(u)}}catch(e){l.e(e)}finally{l.f()}return a}return i(r,[{key:"typeName",get:function(){return"Sequence"}},{key:"ResolveReferences",value:function(e){v(o(r.prototype),"ResolveReferences",this).call(this,e);var t,n=S(this._sequenceDivertsToResolve);try{for(n.s();!(t=n.n()).done;){var i=t.value;i.divert.targetPath=i.targetContent.path}}catch(e){n.e(e)}finally{n.f()}}}]),r}(R),Ue=function(e){a(r,e);var t=d(r);function r(){var e;return n(this,r),(e=t.apply(this,arguments))._overrideDivertTarget=null,e._divertAfter=null,e.GenerateRuntimeObject=function(){var t=new ee;if(t.AddContent(te.EvalStart()),e.divertAfter){var n=e.divertAfter.GenerateRuntimeObject();if(n){var r=e.divertAfter.args;if(null!==r&&r.length>0){for(var i=-1,a=-1,o=0;o<n.content.length;o+=1){var l=n.content[o];l&&(-1==i&&l.commandType===te.CommandType.EvalStart?i=o:l.commandType===te.CommandType.EvalEnd&&(a=o))}for(var u=i+1;u<a;u+=1)n.content[u].parent=null,t.AddContent(n.content[u])}}e._overrideDivertTarget=new Q,t.AddContent(e._overrideDivertTarget)}else t.AddContent(new re);return t.AddContent(te.EvalEnd()),t.AddContent(te.PopTunnel()),t},e.toString=function(){return" -> ".concat(e._divertAfter)},e}return i(r,[{key:"divertAfter",get:function(){return this._divertAfter},set:function(e){this._divertAfter=e,this._divertAfter&&this.AddContent(this._divertAfter)}},{key:"typeName",get:function(){return"TunnelOnwards"}},{key:"ResolveReferences",value:function(e){v(o(r.prototype),"ResolveReferences",this).call(this,e),this.divertAfter&&this.divertAfter.targetContent&&(this._overrideDivertTarget.targetPath=this.divertAfter.targetContent.runtimePath)}}]),r}(R),qe=function(){function e(t,r){n(this,e),this._name=t||"",this._items=null,this._itemNameToValues=r||new Map}return i(e,[{key:"name",get:function(){return this._name}},{key:"items",get:function(){if(null==this._items){this._items=new Map;var e,t=S(this._itemNameToValues);try{for(t.s();!(e=t.n()).done;){var n=m(e.value,2),r=n[0],i=n[1],a=new V(this.name,r);this._items.set(a.serialized(),i)}}catch(e){t.e(e)}finally{t.f()}}return this._items}},{key:"ValueForItem",value:function(e){if(!e.itemName)return 0;var t=this._itemNameToValues.get(e.itemName);return void 0!==t?t:0}},{key:"ContainsItem",value:function(e){return!!e.itemName&&e.originName==this.name&&this._itemNameToValues.has(e.itemName)}},{key:"ContainsItemWithName",value:function(e){return this._itemNameToValues.has(e)}},{key:"TryGetItemWithValue",value:function(e,t){var n,r=S(this._itemNameToValues);try{for(r.s();!(n=r.n()).done;){var i=m(n.value,2),a=i[0];if(i[1]==e)return{result:new V(this.name,a),exists:!0}}}catch(e){r.e(e)}finally{r.f()}return{result:V.Null,exists:!1}}},{key:"TryGetValueForItem",value:function(e,t){if(!e.itemName)return{result:0,exists:!1};var n=this._itemNameToValues.get(e.itemName);return n?{result:n,exists:!0}:{result:0,exists:!1}}}]),e}(),He=function(e){a(r,e);var t=d(r);function r(e){var i;n(this,r),(i=t.call(this)).itemDefinitions=e,i.identifier=null,i.variableAssignment=null,i._elementsByName=null,i.ItemNamed=function(e){if(null===i._elementsByName){i._elementsByName=new Map;var t,n=S(i.itemDefinitions);try{for(n.s();!(t=n.n()).done;){var r=t.value;i._elementsByName.set(r.name,r)}}catch(e){n.e(e)}finally{n.f()}}return i._elementsByName.get(e)||null},i.GenerateRuntimeObject=function(){var e,t,n,r=new B,a=S(i.itemDefinitions);try{for(a.s();!(n=a.n()).done;){var o=n.value;if(o.inInitialList){var l=new V((null===(e=i.identifier)||void 0===e?void 0:e.name)||null,o.name||null);r.Add(l,o.seriesValue)}}}catch(e){a.e(e)}finally{a.f()}return r.SetInitialOriginName((null===(t=i.identifier)||void 0===t?void 0:t.name)||""),new X(r)};var a,o=1,l=S(i.itemDefinitions);try{for(l.s();!(a=l.n()).done;){var u=a.value;null!==u.explicitValue&&(o=u.explicitValue),u.seriesValue=o,o+=1}}catch(e){l.e(e)}finally{l.f()}return i.AddContent(e),i}return i(r,[{key:"typeName",get:function(){return"ListDefinition"}},{key:"runtimeListDefinition",get:function(){var e,t,n=new Map,r=S(this.itemDefinitions);try{for(r.s();!(t=r.n()).done;){var i=t.value;n.has(i.name)?this.Error("List '".concat(this.identifier,"' contains duplicate items called '").concat(i.name,"'")):n.set(i.name,i.seriesValue)}}catch(e){r.e(e)}finally{r.f()}return new qe((null===(e=this.identifier)||void 0===e?void 0:e.name)||"",n)}},{key:"ResolveReferences",value:function(e){v(o(r.prototype),"ResolveReferences",this).call(this,e),e.CheckForNamingCollisions(this,this.identifier,he.List)}}]),r}(R),$e=function(e){a(r,e);var t=d(r);function r(e){var i,a=e.assignedExpression,o=e.isGlobalDeclaration,l=e.isTemporaryNewDeclaration,u=e.listDef,s=e.variableIdentifier;return n(this,r),(i=t.call(this))._runtimeAssignment=null,i.expression=null,i.listDefinition=null,i.GenerateRuntimeObject=function(){var e=null;if(i.isGlobalDeclaration?e=i.story:i.isNewTemporaryDeclaration&&(e=Te(f(i))),e&&e.AddNewVariableDeclaration(f(i)),i.isGlobalDeclaration)return null;var t=new ee;return i.expression?t.AddContent(i.expression.runtimeObject):i.listDefinition&&t.AddContent(i.listDefinition.runtimeObject),i._runtimeAssignment=new ve(i.variableName,i.isNewTemporaryDeclaration),t.AddContent(i._runtimeAssignment),t},i.toString=function(){return"".concat(i.isGlobalDeclaration?"VAR":i.isNewTemporaryDeclaration?"~ temp":""," ").concat(i.variableName)},i.variableIdentifier=s,i.isGlobalDeclaration=Boolean(o),i.isNewTemporaryDeclaration=Boolean(l),u instanceof He?(i.listDefinition=i.AddContent(u),i.listDefinition.variableAssignment=f(i),i.isGlobalDeclaration=!0):a&&(i.expression=i.AddContent(a)),i}return i(r,[{key:"variableName",get:function(){return this.variableIdentifier.name}},{key:"typeName",get:function(){return this.isNewTemporaryDeclaration?"temp":this.isGlobalDeclaration?null!==this.listDefinition?"LIST":"VAR":"variable assignment"}},{key:"isDeclaration",get:function(){return this.isGlobalDeclaration||this.isNewTemporaryDeclaration}},{key:"ResolveReferences",value:function(e){if(v(o(r.prototype),"ResolveReferences",this).call(this,e),this.isDeclaration&&null===this.listDefinition&&e.CheckForNamingCollisions(this,this.variableIdentifier,this.isGlobalDeclaration?he.Var:he.Temp),this.isGlobalDeclaration){var t=E(this.expression,Fe);!t||t.isConstantReference||t.isListItemReference||this.Error("global variable assignments cannot refer to other variables, only literal values, constants and list items")}if(!this.isNewTemporaryDeclaration){var n=e.ResolveVariableWithName(this.variableName,this);n.found||(this.variableName in this.story.constants?this.Error("Can't re-assign to a constant (do you need to use VAR when declaring '".concat(this.variableName,"'?)"),this):this.Error("Variable could not be found to assign to: '".concat(this.variableName,"'"),this)),this._runtimeAssignment&&(this._runtimeAssignment.isGlobal=n.isGlobal)}}}]),r}(R),Ke=function(e){a(r,e);var t=d(r);function r(e){var i,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;return n(this,r),(i=t.call(this)).previousWeavePoint=null,i.addContentToPreviousWeavePoint=!1,i.hasSeenChoiceInSection=!1,i.currentContainer=null,i._unnamedGatherCount=0,i._choiceCount=0,i._rootContainer=null,i._namedWeavePoints=new Map,i.looseEnds=[],i.gatherPointsToResolve=[],i.ResolveWeavePointNaming=function(){var e,t,n,r=[].concat(y(i.FindAll(xe)((function(e){return!(null===e.name||void 0===e.name)}))),y(i.FindAll(me)((function(e){return!(null===e.name||void 0===e.name)}))));i._namedWeavePoints=new Map;var a,o=S(r);try{for(o.s();!(a=o.n()).done;){var l=a.value,u=i.namedWeavePoints.get((null===(e=l.identifier)||void 0===e?void 0:e.name)||"");if(u){var s=u instanceof xe?"gather":"choice",c=u;i.Error("A ".concat(s," with the same label name '").concat(l.name,"' already exists in this context on line ").concat(c.debugMetadata?c.debugMetadata.startLineNumber:"NO DEBUG METADATA AVAILABLE"),l)}(null===(t=l.identifier)||void 0===t?void 0:t.name)&&i.namedWeavePoints.set(null===(n=l.identifier)||void 0===n?void 0:n.name,l)}}catch(e){o.e(e)}finally{o.f()}},i.ConstructWeaveHierarchyFromIndentation=function(){for(var e=0;e<i.content.length;){var t=i.content[e];if(t instanceof me||t instanceof xe){var n=t.indentationDepth-1;if(n>i.baseIndentIndex){for(var a=e;e<i.content.length;){var o=E(i.content[e],me)||E(i.content[e],xe);if(null!==o&&o.indentationDepth-1<=i.baseIndentIndex)break;e+=1}var l=e-a,u=i.content.slice(a,a+l);i.content.splice(a,l);var s=new r(u,n);i.InsertContent(a,s),e=a}}e+=1}},i.DetermineBaseIndentationFromContent=function(e){var t,n=S(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r instanceof me||r instanceof xe)return r.indentationDepth-1}}catch(e){n.e(e)}finally{n.f()}return 0},i.GenerateRuntimeObject=function(){i._rootContainer=new ee,i.currentContainer=i._rootContainer,i.looseEnds=[],i.gatherPointsToResolve=[];var e,t=S(i.content);try{for(t.s();!(e=t.n()).done;){var n=e.value;if(n instanceof me||n instanceof xe)i.AddRuntimeForWeavePoint(n);else if(n instanceof r){var a,o=n;i.AddRuntimeForNestedWeave(o),(a=i.gatherPointsToResolve).splice.apply(a,[0,0].concat(y(o.gatherPointsToResolve)))}else i.AddGeneralRuntimeContent(n.runtimeObject)}}catch(e){t.e(e)}finally{t.f()}return i.PassLooseEndsToAncestors(),i._rootContainer},i.AddRuntimeForGather=function(e){var t=!i.hasSeenChoiceInSection;i.hasSeenChoiceInSection=!1;var n=e.runtimeContainer;if(e.name||(n.name="g-".concat(i._unnamedGatherCount),i._unnamedGatherCount+=1),t){if(!i.currentContainer)throw new Error;i.currentContainer.AddContent(n)}else i.rootContainer.AddToNamedContentOnly(n);var r,a=S(i.looseEnds);try{for(a.s();!(r=a.n()).done;){var o=r.value;if(!(o instanceof xe&&o.indentationDepth==e.indentationDepth)){var l=null;if(o instanceof Me)l=o.runtimeObject;else{l=new pe;var u=o;if(!u.runtimeContainer)throw new Error;u.runtimeContainer.AddContent(l)}i.gatherPointsToResolve.push(new Ve(l,n))}}}catch(e){a.e(e)}finally{a.f()}i.looseEnds=[],i.currentContainer=n},i.AddRuntimeForWeavePoint=function(e){if(e instanceof xe)i.AddRuntimeForGather(e);else if(e instanceof me){if(!i.currentContainer)throw new Error;i.previousWeavePoint instanceof xe&&i.looseEnds.splice(i.looseEnds.indexOf(i.previousWeavePoint),1);var t=e;if(i.currentContainer.AddContent(t.runtimeObject),!t.innerContentContainer)throw new Error;t.innerContentContainer.name="c-".concat(i._choiceCount),i.currentContainer.AddToNamedContentOnly(t.innerContentContainer),i._choiceCount+=1,i.hasSeenChoiceInSection=!0}i.addContentToPreviousWeavePoint=!1,i.WeavePointHasLooseEnd(e)&&(i.looseEnds.push(e),E(e,me)&&(i.addContentToPreviousWeavePoint=!0)),i.previousWeavePoint=e},i.AddRuntimeForNestedWeave=function(e){i.AddGeneralRuntimeContent(e.rootContainer),null!==i.previousWeavePoint&&(i.looseEnds.splice(i.looseEnds.indexOf(i.previousWeavePoint),1),i.addContentToPreviousWeavePoint=!1)},i.AddGeneralRuntimeContent=function(e){if(null!==e)if(i.addContentToPreviousWeavePoint){if(!i.previousWeavePoint||!i.previousWeavePoint.runtimeContainer)throw new Error;i.previousWeavePoint.runtimeContainer.AddContent(e)}else{if(!i.currentContainer)throw new Error;i.currentContainer.AddContent(e)}},i.PassLooseEndsToAncestors=function(){if(0!==i.looseEnds.length){for(var e=null,t=null,n=!1,a=i.parent;null!==a;a=a.parent){var o=E(a,r);o&&(n||null!==e||(e=o),n&&null===t&&(t=o)),(a instanceof Ge||a instanceof ke)&&(n=!0)}if(null!==e||null!==t)for(var l=i.looseEnds.length-1;l>=0;l-=1){var u=i.looseEnds[l],s=!1;if(n){if(u instanceof me&&null!==e)e.ReceiveLooseEnd(u),s=!0;else if(!(u instanceof me)){var c=e||t;null!==c&&(c.ReceiveLooseEnd(u),s=!0)}}else(null==e?void 0:e.hasOwnProperty("ReceiveLooseEnd"))&&e.ReceiveLooseEnd(u),s=!0;s&&i.looseEnds.splice(l,1)}}},i.ReceiveLooseEnd=function(e){i.looseEnds.push(e)},i.WeavePointNamed=function(e){return i.namedWeavePoints&&i.namedWeavePoints.get(e)||null},i.IsGlobalDeclaration=function(e){var t=E(e,$e);return!!(t&&t.isGlobalDeclaration&&t.isDeclaration)||!!E(e,Ee)},i.ContentThatFollowsWeavePoint=function(e){var t=[],n=e;if(null!==n.content){var a,o=S(n.content);try{for(o.s();!(a=o.n()).done;){var l=a.value;i.IsGlobalDeclaration(l)||t.push(l)}}catch(e){o.e(e)}finally{o.f()}}var u=E(n.parent,r);if(null===u)throw new Error("Expected weave point parent to be weave?");for(var s=u.content.indexOf(n)+1;s<u.content.length;s+=1){var c=u.content[s];if(!i.IsGlobalDeclaration(c)){if(c instanceof me||c instanceof xe)break;if(c instanceof r)break;t.push(c)}}return t},i.ValidateTermination=function(e){if(!(i.lastParsedSignificantObject instanceof F))if(null!==i.looseEnds&&i.looseEnds.length>0){var t,n=S(i.looseEnds);try{for(n.s();!(t=n.n()).done;){var r=t.value,a=i.ContentThatFollowsWeavePoint(r);i.ValidateFlowOfObjectsTerminates(a,r,e)}}catch(e){n.e(e)}finally{n.f()}}else{var o,l=S(i.content);try{for(l.s();!(o=l.n()).done;){var u=o.value;if(u instanceof me||u instanceof Me)return}}catch(e){l.e(e)}finally{l.f()}i.ValidateFlowOfObjectsTerminates(i.content,f(i),e)}},i.BadNestedTerminationHandler=function(e){for(var t=null,n=e.parent;null!==n;n=n.parent)if(n instanceof Ge||n instanceof ke){t=E(n,ke);break}var r="Choices nested in conditionals or sequences need to explicitly divert afterwards.";null!==t&&1===t.FindAll(me)().length&&(r="Choices with conditions should be written: '* {condition} choice'. Otherwise, ".concat(r.toLowerCase())),i.Error(r,e)},i.ValidateFlowOfObjectsTerminates=function(e,t,n){var r,i=!1,a=t,o=S(e);try{for(o.s();!(r=o.n()).done;){var l=r.value;if(null!==l.Find(Me)((function(e){return!(e.isThread||e.isTunnel||e.isFunctionCall||e.parent instanceof je)}))&&(i=!0),null!=l.Find(Ue)()){i=!0;break}a=l}}catch(e){o.e(e)}finally{o.f()}if(!i){if(a instanceof F)return;n(a)}},i.WeavePointHasLooseEnd=function(e){if(null===e.content)return!0;for(var t=e.content.length-1;t>=0;--t){var n=E(e.content[t],Me);if(n&&!(n.isThread||n.isTunnel||n.isFunctionCall))return!1}return!0},i.CheckForWeavePointNamingCollisions=function(){if(i.namedWeavePoints){var e,t=[],n=S(i.ancestry);try{for(n.s();!(e=n.n()).done;){var r=E(e.value,Ne);if(!r)break;t.push(r)}}catch(e){n.e(e)}finally{n.f()}var a,o=S(i.namedWeavePoints);try{for(o.s();!(a=o.n()).done;){var l,u=m(a.value,2),s=u[0],c=u[1],f=S(t);try{for(f.s();!(l=f.n()).done;){var h=l.value.ContentWithNameAtLevel(s);if(h&&h!==c){var d="".concat(c.GetType()," '").concat(s,"' has the same label name as a ").concat(h.GetType()," (on ").concat(h.debugMetadata,")");i.Error(d,c)}}}catch(e){f.e(e)}finally{f.f()}}}catch(e){o.e(e)}finally{o.f()}}},i.baseIndentIndex=-1==a?i.DetermineBaseIndentationFromContent(e):a,i.AddContent(e),i.ConstructWeaveHierarchyFromIndentation(),i}return i(r,[{key:"rootContainer",get:function(){return this._rootContainer||(this._rootContainer=this.GenerateRuntimeObject()),this._rootContainer}},{key:"namedWeavePoints",get:function(){return this._namedWeavePoints}},{key:"lastParsedSignificantObject",get:function(){if(0===this.content.length)return null;for(var e=null,t=this.content.length-1;t>=0;--t){var n=E(e=this.content[t],_e);if(!(n&&"\n"===n.text||this.IsGlobalDeclaration(e)))break}var i=E(e,r);return i&&(e=i.lastParsedSignificantObject),e}},{key:"typeName",get:function(){return"Weave"}},{key:"ResolveReferences",value:function(e){if(v(o(r.prototype),"ResolveReferences",this).call(this,e),null!==this.looseEnds&&this.looseEnds.length>0){for(var t=!1,n=this.parent;null!==n;n=n.parent)if(n instanceof Ge||n instanceof ke){t=!0;break}t&&this.ValidateTermination(this.BadNestedTerminationHandler)}var i,a=S(this.gatherPointsToResolve);try{for(a.s();!(i=a.n()).done;){var l=i.value;l.divert.targetPath=l.targetRuntimeObj.path}}catch(e){a.e(e)}finally{a.f()}this.CheckForWeavePointNamingCollisions()}}]),r}(R),Je=function(e){a(r,e);var t=d(r);function r(e){var i;return n(this,r),(i=t.call(this))._contentContainer=null,i._conditionalDivert=null,i._ownExpression=null,i._innerWeave=null,i.isTrueBranch=!1,i.matchingEquality=!1,i.isElse=!1,i.isInline=!1,i.returnDivert=null,i.GenerateRuntimeObject=function(){if(i._innerWeave){var e,t=S(i._innerWeave.content);try{for(t.s();!(e=t.n()).done;){var n=E(e.value,_e);n&&n.text.startsWith("else:")&&i.Warning("Saw the text 'else:' which is being treated as content. Did you mean '- else:'?",n)}}catch(e){t.e(e)}finally{t.f()}}var r=new ee,a=i.matchingEquality&&!i.isElse;if(a&&r.AddContent(te.Duplicate()),i._conditionalDivert=new pe,i._conditionalDivert.isConditional=!i.isElse,!i.isTrueBranch&&!i.isElse){var o=null!==i.ownExpression;o&&r.AddContent(te.EvalStart()),i.ownExpression&&i.ownExpression.GenerateIntoContainer(r),i.matchingEquality&&r.AddContent(ie.CallWithName("==")),o&&r.AddContent(te.EvalEnd())}return r.AddContent(i._conditionalDivert),i._contentContainer=i.GenerateRuntimeForContent(),i._contentContainer.name="b",i.isInline||i._contentContainer.InsertContent(new J("\n"),0),(a||i.isElse&&i.matchingEquality)&&i._contentContainer.InsertContent(te.PopEvaluatedValue(),0),r.AddToNamedContentOnly(i._contentContainer),i.returnDivert=new pe,i._contentContainer.AddContent(i.returnDivert),r},i.GenerateRuntimeForContent=function(){return null===i._innerWeave?new ee:i._innerWeave.rootContainer},e&&(i._innerWeave=new Ke(e),i.AddContent(i._innerWeave)),i}return i(r,[{key:"ownExpression",get:function(){return this._ownExpression},set:function(e){this._ownExpression=e,this._ownExpression&&this.AddContent(this._ownExpression)}},{key:"typeName",get:function(){return"ConditionalSingleBranch"}},{key:"ResolveReferences",value:function(e){if(!this._conditionalDivert||!this._contentContainer)throw new Error;this._conditionalDivert.targetPath=this._contentContainer.path,v(o(r.prototype),"ResolveReferences",this).call(this,e)}}]),r}(R);!function(e){e[e.ParsingString=1]="ParsingString"}(ze||(ze={}));var Qe,Ye=function(){function e(){n(this,e),this.startLineNumber=0,this.endLineNumber=0,this.startCharacterNumber=0,this.endCharacterNumber=0,this.fileName=null,this.sourceName=null}return i(e,[{key:"Merge",value:function(t){var n=new e;return n.fileName=this.fileName,n.sourceName=this.sourceName,this.startLineNumber<t.startLineNumber?(n.startLineNumber=this.startLineNumber,n.startCharacterNumber=this.startCharacterNumber):this.startLineNumber>t.startLineNumber?(n.startLineNumber=t.startLineNumber,n.startCharacterNumber=t.startCharacterNumber):(n.startLineNumber=this.startLineNumber,n.startCharacterNumber=Math.min(this.startCharacterNumber,t.startCharacterNumber)),this.endLineNumber>t.endLineNumber?(n.endLineNumber=this.endLineNumber,n.endCharacterNumber=this.endCharacterNumber):this.endLineNumber<t.endLineNumber?(n.endLineNumber=t.endLineNumber,n.endCharacterNumber=t.endCharacterNumber):(n.endLineNumber=this.endLineNumber,n.endCharacterNumber=Math.max(this.endCharacterNumber,t.endCharacterNumber)),n}},{key:"toString",value:function(){return null!==this.fileName?"line ".concat(this.startLineNumber," of ").concat(this.fileName,'"'):"line "+this.startLineNumber}}]),e}(),Xe=function(e){a(r,e);var t=d(r);function r(e,i){var a;return n(this,r),(a=t.call(this)).identifier=e,a.argumentNames=i,a.GenerateRuntimeObject=function(){return a.story.AddExternal(f(a)),null},a}return i(r,[{key:"name",get:function(){var e;return(null===(e=this.identifier)||void 0===e?void 0:e.name)||null}},{key:"typeName",get:function(){return"EXTERNAL"}},{key:"toString",value:function(){var e;return"EXTERNAL ".concat(null===(e=this.identifier)||void 0===e?void 0:e.name)}}]),r}(R),Ze=i((function e(t,r,i){n(this,e),this.name=t,this.args=r,this.isFunction=i})),et=function(e){a(r,e);var t=d(r);function r(e){var i;return n(this,r),(i=t.call(this))._objToWrap=e,i.GenerateRuntimeObject=function(){return i._objToWrap},i}return i(r)}(R),tt=function(e){a(r,e);var t=d(r);function r(e){return n(this,r),t.call(this,e)}return i(r,[{key:"typeName",get:function(){return"Glue"}}]),r}(et),nt=function(e){a(r,e);var t=d(r);function r(){return n(this,r),t.apply(this,arguments)}return i(r,[{key:"toString",value:function(){return"Glue"}}]),r}(j),rt=function(e){a(r,e);var t=d(r);function r(e,i,a){var o;return n(this,r),(o=t.call(this)).varIdentifier=e,o._runtimeAssignment=null,o.expression=null,o.GenerateIntoContainer=function(e){var t,n;e.AddContent(new Re((null===(t=o.varIdentifier)||void 0===t?void 0:t.name)||null)),o.expression?o.expression.GenerateIntoContainer(e):e.AddContent(new $(1)),e.AddContent(ie.CallWithName(o.isInc?"+":"-")),o._runtimeAssignment=new ve((null===(n=o.varIdentifier)||void 0===n?void 0:n.name)||null,!1),e.AddContent(o._runtimeAssignment)},o.toString=function(){var e,t;return o.expression?"".concat(null===(e=o.varIdentifier)||void 0===e?void 0:e.name).concat(o.isInc?" += ":" -= ").concat(o.expression):"".concat(null===(t=o.varIdentifier)||void 0===t?void 0:t.name)+(o.isInc?"++":"--")},i instanceof ne?(o.expression=i,o.AddContent(o.expression),o.isInc=Boolean(a)):o.isInc=i,o}return i(r,[{key:"typeName",get:function(){return"IncDecExpression"}},{key:"ResolveReferences",value:function(e){var t;v(o(r.prototype),"ResolveReferences",this).call(this,e);var n=e.ResolveVariableWithName((null===(t=this.varIdentifier)||void 0===t?void 0:t.name)||"",this);if(n.found||this.Error("variable for ".concat(this.incrementDecrementWord," could not be found: '").concat(this.varIdentifier,"' after searching: {this.descriptionOfScope}")),!this._runtimeAssignment)throw new Error;this._runtimeAssignment.isGlobal=n.isGlobal,this.parent instanceof Ke||this.parent instanceof Ne||this.parent instanceof Ie||this.Error("Can't use ".concat(this.incrementDecrementWord," as sub-expression"))}},{key:"incrementDecrementWord",get:function(){return this.isInc?"increment":"decrement"}}]),r}(ne),it=function(e){a(r,e);var t=d(r);function r(e){var i;return n(this,r),(i=t.call(this)).includedStory=e,i.GenerateRuntimeObject=function(){return null},i}return i(r)}(R),at=i((function e(t,r,i){var a=this;n(this,e),this.type=t,this.precedence=r,this.requireWhitespace=i,this.toString=function(){return a.type}})),ot=function(e){a(r,e);var t=d(r);function r(e,i,a,o){return n(this,r),t.call(this,e,i,a,o)}return i(r,[{key:"flowLevel",get:function(){return Ce.Knot}},{key:"typeName",get:function(){return this.isFunction?"Function":"Knot"}},{key:"ResolveReferences",value:function(e){v(o(r.prototype),"ResolveReferences",this).call(this,e);var t=this.story;for(var n in this.subFlowsByName){var i=t.ContentWithNameAtLevel(n,Ce.Knot,!1);if(i){var a=this.subFlowsByName.get(n),l="Stitch '".concat(a?a.name:"NO STITCH FOUND","' has the same name as a knot (on ").concat(i.debugMetadata,")");this.Error(l,a)}}}}]),r}(Ne),lt=function(e){a(r,e);var t=d(r);function r(e){var i;return n(this,r),(i=t.call(this)).itemIdentifierList=e,i.GenerateIntoContainer=function(e){var t,n,r=new B;if(null!=i.itemIdentifierList){var a,o=S(i.itemIdentifierList);try{for(o.s();!(a=o.n()).done;){var l=a.value,u=(null===(t=null==l?void 0:l.name)||void 0===t?void 0:t.split("."))||[],s=null,c="";u.length>1?(s=u[0],c=u[1]):c=u[0];var h=i.story.ResolveListItem(s,c,f(i));if(null===h)null===s?i.Error("Could not find list definition that contains item '".concat(l,"'")):i.Error("Could not find list item ".concat(l));else{if(null==h.parent)return void i.Error("Could not find list definition for item ".concat(l));s||(s=(null===(n=h.parent.identifier)||void 0===n?void 0:n.name)||null);var d=new V(s,h.name||null);r.has(d.serialized())?i.Warning("Duplicate of item '".concat(l,"' in list.")):r.Add(d,h.seriesValue)}}}catch(e){o.e(e)}finally{o.f()}}e.AddContent(new X(r))},i}return i(r,[{key:"typeName",get:function(){return"List"}}]),r}(ne),ut=function(e){a(r,e);var t=d(r);function r(e,i){var a,l,u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return n(this,r),(l=t.call(this)).indentifier=e,l.inInitialList=i,l.explicitValue=u,l.seriesValue=0,l.parent=null,l.GenerateRuntimeObject=function(){throw new Error("Not implemented.")},l.toString=function(){return l.fullName},l.parent=v((a=f(l),o(r.prototype)),"parent",a),l}return i(r,[{key:"fullName",get:function(){var e,t=this.parent;if(null===t)throw new Error("Can't get full name without a parent list.");return"".concat(null===(e=t.identifier)||void 0===e?void 0:e.name,".").concat(this.name)}},{key:"typeName",get:function(){return"ListElement"}},{key:"name",get:function(){var e;return(null===(e=this.indentifier)||void 0===e?void 0:e.name)||null}},{key:"ResolveReferences",value:function(e){v(o(r.prototype),"ResolveReferences",this).call(this,e),e.CheckForNamingCollisions(this,this.indentifier,he.ListItem)}}]),r}(R);!function(e){e[e.InnerBlock=0]="InnerBlock",e[e.Stitch=1]="Stitch",e[e.Knot=2]="Knot",e[e.Top=3]="Top"}(Qe||(Qe={}));var st=function(e){a(r,e);var t=d(r);function r(e,i,a,l){var u,s;return n(this,r),(s=t.call(this,e,i,a,l)).toString=function(){return"".concat(null!==s.parent?s.parent+" > ":"").concat(v((u=f(s),o(r.prototype)),"toString",u).call(u))},s}return i(r,[{key:"flowLevel",get:function(){return Ce.Stitch}},{key:"typeName",get:function(){return"Stitch"}}]),r}(Ne),ct=function(e){a(r,e);var t=d(r);function r(e){var i;return n(this,r),(i=t.call(this)).text=e.toString()||"",i}return i(r,[{key:"toString",value:function(){return"# "+this.text}}]),r}(j),ft=function(e){a(r,e);var t=d(r);function r(){var e;return n(this,r),(e=t.apply(this,arguments)).text="",e.index=0,e.threadAtGeneration=null,e.sourcePath="",e.targetPath=null,e.isInvisibleDefault=!1,e.originalThreadIndex=0,e}return i(r,[{key:"pathStringOnChoice",get:function(){return null===this.targetPath?D("Choice.targetPath"):this.targetPath.toString()},set:function(e){this.targetPath=new W(e)}}]),r}(j),ht=function(){function e(t){n(this,e),this._lists=new Map,this._allUnambiguousListValueCache=new Map;var r,i=S(t);try{for(i.s();!(r=i.n()).done;){var a=r.value;this._lists.set(a.name,a);var o,l=S(a.items);try{for(l.s();!(o=l.n()).done;){var u=m(o.value,2),s=u[0],c=u[1],f=V.fromSerializedKey(s),h=new X(f,c);if(!f.itemName)throw new Error("item.itemName is null or undefined.");this._allUnambiguousListValueCache.set(f.itemName,h),this._allUnambiguousListValueCache.set(f.fullName,h)}}catch(e){l.e(e)}finally{l.f()}}}catch(e){i.e(e)}finally{i.f()}}return i(e,[{key:"lists",get:function(){var e,t=[],n=S(this._lists);try{for(n.s();!(e=n.n()).done;){var r=m(e.value,2)[1];t.push(r)}}catch(e){n.e(e)}finally{n.f()}return t}},{key:"TryListGetDefinition",value:function(e,t){if(null===e)return{result:t,exists:!1};var n=this._lists.get(e);return n?{result:n,exists:!0}:{result:t,exists:!1}}},{key:"FindSingleItemListWithName",value:function(e){if(null===e)return D("name");var t=this._allUnambiguousListValueCache.get(e);return void 0!==t?t:null}}]),e}(),dt=function(){function e(){n(this,e)}return i(e,null,[{key:"JArrayToRuntimeObjList",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.length;t&&n--;for(var r=[],i=0;i<n;i++){var a=e[i],o=this.JTokenToRuntimeObject(a);if(null===o)return D("runtimeObj");r.push(o)}return r}},{key:"WriteDictionaryRuntimeObjs",value:function(e,t){e.WriteObjectStart();var n,r=S(t);try{for(r.s();!(n=r.n()).done;){var i=m(n.value,2),a=i[0],o=i[1];e.WritePropertyStart(a),this.WriteRuntimeObject(e,o),e.WritePropertyEnd()}}catch(e){r.e(e)}finally{r.f()}e.WriteObjectEnd()}},{key:"WriteListRuntimeObjs",value:function(e,t){e.WriteArrayStart();var n,r=S(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;this.WriteRuntimeObject(e,i)}}catch(e){r.e(e)}finally{r.f()}e.WriteArrayEnd()}},{key:"WriteIntDictionary",value:function(e,t){e.WriteObjectStart();var n,r=S(t);try{for(r.s();!(n=r.n()).done;){var i=m(n.value,2),a=i[0],o=i[1];e.WriteIntProperty(a,o)}}catch(e){r.e(e)}finally{r.f()}e.WriteObjectEnd()}},{key:"WriteRuntimeObject",value:function(t,n){var r=E(n,ee);if(r)this.WriteRuntimeContainer(t,r);else{var i=E(n,pe);if(i){var a,o="->";return i.isExternal?o="x()":i.pushesToStack&&(i.stackPushType==ce.Function?o="f()":i.stackPushType==ce.Tunnel&&(o="->t->")),a=i.hasVariableTarget?i.variableDivertName:i.targetPathString,t.WriteObjectStart(),t.WriteProperty(o,a),i.hasVariableTarget&&t.WriteProperty("var",!0),i.isConditional&&t.WriteProperty("c",!0),i.externalArgs>0&&t.WriteIntProperty("exArgs",i.externalArgs),void t.WriteObjectEnd()}var l=E(n,fe);if(l)return t.WriteObjectStart(),t.WriteProperty("*",l.pathStringOnChoice),t.WriteIntProperty("flg",l.flags),void t.WriteObjectEnd();var u=E(n,H);if(u)t.WriteBool(u.value);else{var s=E(n,$);if(s)t.WriteInt(s.value);else{var c=E(n,K);if(c)t.WriteFloat(c.value);else{var f=E(n,J);if(f)f.isNewline?t.Write("\n",!1):(t.WriteStringStart(),t.WriteStringInner("^"),t.WriteStringInner(f.value),t.WriteStringEnd());else{var h=E(n,X);if(h)this.WriteInkList(t,h);else{var d=E(n,Q);if(d)return t.WriteObjectStart(),null===d.value?D("divTargetVal.value"):(t.WriteProperty("^->",d.value.componentsString),void t.WriteObjectEnd());var p=E(n,Y);if(p)return t.WriteObjectStart(),t.WriteProperty("^var",p.value),t.WriteIntProperty("ci",p.contextIndex),void t.WriteObjectEnd();if(E(n,nt))t.Write("<>");else{var v=E(n,te);if(v)t.Write(e._controlCommandNames[v.commandType]);else{var m=E(n,ie);if(m){var y=m.name;return"^"==y&&(y="L^"),void t.Write(y)}var g=E(n,Re);if(g){t.WriteObjectStart();var b=g.pathStringForCount;return null!=b?t.WriteProperty("CNT?",b):t.WriteProperty("VAR?",g.name),void t.WriteObjectEnd()}var S=E(n,ve);if(S){t.WriteObjectStart();var C=S.isGlobal?"VAR=":"temp=";return t.WriteProperty(C,S.variableName),S.isNewDeclaration||t.WriteProperty("re",!0),void t.WriteObjectEnd()}if(E(n,re))t.Write("void");else{var w=E(n,ct);if(w)return t.WriteObjectStart(),t.WriteProperty("#",w.text),void t.WriteObjectEnd();var k=E(n,ft);if(!k)throw new Error("Failed to convert runtime object to Json token: "+n);this.WriteChoice(t,k)}}}}}}}}}}},{key:"JObjectToDictionaryRuntimeObjs",value:function(e){var t=new Map;for(var n in e)if(e.hasOwnProperty(n)){var r=this.JTokenToRuntimeObject(e[n]);if(null===r)return D("inkObject");t.set(n,r)}return t}},{key:"JObjectToIntDictionary",value:function(e){var t=new Map;for(var n in e)e.hasOwnProperty(n)&&t.set(n,parseInt(e[n]));return t}},{key:"JTokenToRuntimeObject",value:function(n){if("number"==typeof n&&!isNaN(n)||"boolean"==typeof n)return q.Create(n);if("string"==typeof n){var r=n.toString(),i=r[0];if("^"==i)return new J(r.substring(1));if("\n"==i&&1==r.length)return new J("\n");if("<>"==r)return new nt;for(var a=0;a<e._controlCommandNames.length;++a)if(r==e._controlCommandNames[a])return new te(a);if("L^"==r&&(r="^"),ie.CallExistsWithName(r))return ie.CallWithName(r);if("->->"==r)return te.PopTunnel();if("~ret"==r)return te.PopFunction();if("void"==r)return new re}if("object"===t(n)&&!Array.isArray(n)){var o,l=n;if(l["^->"])return o=l["^->"],new Q(new W(o.toString()));if(l["^var"]){o=l["^var"];var u=new Y(o.toString());return"ci"in l&&(o=l.ci,u.contextIndex=parseInt(o)),u}var s=!1,c=!1,f=ce.Function,h=!1;if((o=l["->"])?s=!0:(o=l["f()"])?(s=!0,c=!0,f=ce.Function):(o=l["->t->"])?(s=!0,c=!0,f=ce.Tunnel):(o=l["x()"])&&(s=!0,h=!0,c=!1,f=ce.Function),s){var d=new pe;d.pushesToStack=c,d.stackPushType=f,d.isExternal=h;var p=o.toString();return(o=l.var)?d.variableDivertName=p:d.targetPathString=p,d.isConditional=!!l.c,h&&(o=l.exArgs)&&(d.externalArgs=parseInt(o)),d}if(o=l["*"]){var v=new fe;return v.pathStringOnChoice=o.toString(),(o=l.flg)&&(v.flags=parseInt(o)),v}if(o=l["VAR?"])return new Re(o.toString());if(o=l["CNT?"]){var m=new Re;return m.pathStringForCount=o.toString(),m}var y=!1,g=!1;if((o=l["VAR="])?(y=!0,g=!0):(o=l["temp="])&&(y=!0,g=!1),y){var b=o.toString(),S=!l.re,C=new ve(b,S);return C.isGlobal=g,C}if(void 0!==l["#"])return o=l["#"],new ct(o.toString());if(o=l.list){var w=o,k=new B;if(o=l.origins){var _=o;k.SetInitialOriginNames(_)}for(var E in w)if(w.hasOwnProperty(E)){var x=w[E],P=new V(E),O=parseInt(x);k.Add(P,O)}return new X(k)}if(null!=l.originalChoicePath)return this.JObjectToChoice(l)}if(Array.isArray(n))return this.JArrayToContainer(n);if(null==n)return null;throw new Error("Failed to convert token to runtime object: "+this.toJson(n,["parent"]))}},{key:"toJson",value:function(e,t,n){return JSON.stringify(e,(function(e,n){return(null==t?void 0:t.some((function(t){return t===e})))?void 0:n}),n)}},{key:"WriteRuntimeContainer",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(e.WriteArrayStart(),null===t)return D("container");var r,i=S(t.content);try{for(i.s();!(r=i.n()).done;){var a=r.value;this.WriteRuntimeObject(e,a)}}catch(e){i.e(e)}finally{i.f()}var o=t.namedOnlyContent,l=t.countFlags,u=null!=t.name&&!n,s=null!=o||l>0||u;if(s&&e.WriteObjectStart(),null!=o){var c,f=S(o);try{for(f.s();!(c=f.n()).done;){var h=m(c.value,2),d=h[0],p=h[1],v=d,y=E(p,ee);e.WritePropertyStart(v),this.WriteRuntimeContainer(e,y,!0),e.WritePropertyEnd()}}catch(e){f.e(e)}finally{f.f()}}l>0&&e.WriteIntProperty("#f",l),u&&e.WriteProperty("#n",t.name),s?e.WriteObjectEnd():e.WriteNull(),e.WriteArrayEnd()}},{key:"JArrayToContainer",value:function(e){var t=new ee;t.content=this.JArrayToRuntimeObjList(e,!0);var n=e[e.length-1];if(null!=n){var r=new Map;for(var i in n)if("#f"==i)t.countFlags=parseInt(n[i]);else if("#n"==i)t.name=n[i].toString();else{var a=this.JTokenToRuntimeObject(n[i]),o=E(a,ee);o&&(o.name=i),r.set(i,a)}t.namedOnlyContent=r}return t}},{key:"JObjectToChoice",value:function(e){var t=new ft;return t.text=e.text.toString(),t.index=parseInt(e.index),t.sourcePath=e.originalChoicePath.toString(),t.originalThreadIndex=parseInt(e.originalThreadIndex),t.pathStringOnChoice=e.targetPath.toString(),t}},{key:"WriteChoice",value:function(e,t){e.WriteObjectStart(),e.WriteProperty("text",t.text),e.WriteIntProperty("index",t.index),e.WriteProperty("originalChoicePath",t.sourcePath),e.WriteIntProperty("originalThreadIndex",t.originalThreadIndex),e.WriteProperty("targetPath",t.pathStringOnChoice),e.WriteObjectEnd()}},{key:"WriteInkList",value:function(e,t){var n=t.value;if(null===n)return D("rawList");e.WriteObjectStart(),e.WritePropertyStart("list"),e.WriteObjectStart();var r,i=S(n);try{for(i.s();!(r=i.n()).done;){var a=m(r.value,2),o=a[0],l=a[1],u=V.fromSerializedKey(o),s=l;if(null===u.itemName)return D("item.itemName");e.WritePropertyNameStart(),e.WritePropertyNameInner(u.originName?u.originName:"?"),e.WritePropertyNameInner("."),e.WritePropertyNameInner(u.itemName),e.WritePropertyNameEnd(),e.Write(s),e.WritePropertyEnd()}}catch(e){i.e(e)}finally{i.f()}if(e.WriteObjectEnd(),e.WritePropertyEnd(),0==n.Count&&null!=n.originNames&&n.originNames.length>0){e.WritePropertyStart("origins"),e.WriteArrayStart();var c,f=S(n.originNames);try{for(f.s();!(c=f.n()).done;){var h=c.value;e.Write(h)}}catch(e){f.e(e)}finally{f.f()}e.WriteArrayEnd(),e.WritePropertyEnd()}e.WriteObjectEnd()}},{key:"ListDefinitionsToJToken",value:function(e){var t,n={},r=S(e.lists);try{for(r.s();!(t=r.n()).done;){var i,a=t.value,o={},l=S(a.items);try{for(l.s();!(i=l.n()).done;){var u=m(i.value,2),s=u[0],c=u[1],f=V.fromSerializedKey(s);if(null===f.itemName)return D("item.itemName");o[f.itemName]=c}}catch(e){l.e(e)}finally{l.f()}n[a.name]=o}}catch(e){r.e(e)}finally{r.f()}return n}},{key:"JTokenToListDefinitions",value:function(e){var t=e,n=[];for(var r in t)if(t.hasOwnProperty(r)){var i=r.toString(),a=t[r],o=new Map;for(var l in a)if(t.hasOwnProperty(r)){var u=a[l];o.set(l,parseInt(u))}var s=new qe(i,o);n.push(s)}return new ht(n)}}]),e}();dt._controlCommandNames=function(){var e=[];e[te.CommandType.EvalStart]="ev",e[te.CommandType.EvalOutput]="out",e[te.CommandType.EvalEnd]="/ev",e[te.CommandType.Duplicate]="du",e[te.CommandType.PopEvaluatedValue]="pop",e[te.CommandType.PopFunction]="~ret",e[te.CommandType.PopTunnel]="->->",e[te.CommandType.BeginString]="str",e[te.CommandType.EndString]="/str",e[te.CommandType.NoOp]="nop",e[te.CommandType.ChoiceCount]="choiceCnt",e[te.CommandType.Turns]="turn",e[te.CommandType.TurnsSince]="turns",e[te.CommandType.ReadCount]="readc",e[te.CommandType.Random]="rnd",e[te.CommandType.SeedRandom]="srnd",e[te.CommandType.VisitIndex]="visit",e[te.CommandType.SequenceShuffleIndex]="seq",e[te.CommandType.StartThread]="thread",e[te.CommandType.Done]="done",e[te.CommandType.End]="end",e[te.CommandType.ListFromInt]="listInt",e[te.CommandType.ListRange]="range",e[te.CommandType.ListRandom]="lrnd";for(var t=0;t<te.CommandType.TOTAL_VALUES;++t)if(null==e[t])throw new Error("Control command not accounted for in serialisation");return e}();var pt=function(){function t(){if(n(this,t),this._threadCounter=0,this._startOfRoot=de.Null,arguments[0]instanceof e.Story){var r=arguments[0];this._startOfRoot=de.StartOf(r.rootContentContainer),this.Reset()}else{var i=arguments[0];this._threads=[];var a,o=S(i._threads);try{for(o.s();!(a=o.n()).done;){var l=a.value;this._threads.push(l.Copy())}}catch(e){o.e(e)}finally{o.f()}this._threadCounter=i._threadCounter,this._startOfRoot=i._startOfRoot.copy()}}return i(t,[{key:"elements",get:function(){return this.callStack}},{key:"depth",get:function(){return this.elements.length}},{key:"currentElement",get:function(){var e=this._threads[this._threads.length-1].callstack;return e[e.length-1]}},{key:"currentElementIndex",get:function(){return this.callStack.length-1}},{key:"currentThread",get:function(){return this._threads[this._threads.length-1]},set:function(e){I.Assert(1==this._threads.length,"Shouldn't be directly setting the current thread when we have a stack of them"),this._threads.length=0,this._threads.push(e)}},{key:"canPop",get:function(){return this.callStack.length>1}},{key:"Reset",value:function(){this._threads=[],this._threads.push(new t.Thread),this._threads[0].callstack.push(new t.Element(ce.Tunnel,this._startOfRoot))}},{key:"SetJsonToken",value:function(e,n){this._threads.length=0;var r,i=S(e.threads);try{for(i.s();!(r=i.n()).done;){var a=r.value,o=new t.Thread(a,n);this._threads.push(o)}}catch(e){i.e(e)}finally{i.f()}this._threadCounter=parseInt(e.threadCounter),this._startOfRoot=de.StartOf(n.rootContentContainer)}},{key:"WriteJson",value:function(e){var t=this;e.WriteObject((function(e){e.WritePropertyStart("threads"),e.WriteArrayStart();var n,r=S(t._threads);try{for(r.s();!(n=r.n()).done;)n.value.WriteJson(e)}catch(e){r.e(e)}finally{r.f()}e.WriteArrayEnd(),e.WritePropertyEnd(),e.WritePropertyStart("threadCounter"),e.WriteInt(t._threadCounter),e.WritePropertyEnd()}))}},{key:"PushThread",value:function(){var e=this.currentThread.Copy();this._threadCounter++,e.threadIndex=this._threadCounter,this._threads.push(e)}},{key:"ForkThread",value:function(){var e=this.currentThread.Copy();return this._threadCounter++,e.threadIndex=this._threadCounter,e}},{key:"PopThread",value:function(){if(!this.canPopThread)throw new Error("Can't pop thread");this._threads.splice(this._threads.indexOf(this.currentThread),1)}},{key:"canPopThread",get:function(){return this._threads.length>1&&!this.elementIsEvaluateFromGame}},{key:"elementIsEvaluateFromGame",get:function(){return this.currentElement.type==ce.FunctionEvaluationFromGame}},{key:"Push",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=new t.Element(e,this.currentElement.currentPointer,!1);i.evaluationStackHeightWhenPushed=n,i.functionStartInOutputStream=r,this.callStack.push(i)}},{key:"CanPop",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return!!this.canPop&&(null==e||this.currentElement.type==e)}},{key:"Pop",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(!this.CanPop(e))throw new Error("Mismatched push/pop in Callstack");this.callStack.pop()}},{key:"GetTemporaryVariableWithName",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;-1==t&&(t=this.currentElementIndex+1);var n=G(this.callStack[t-1].temporaryVariables,e,null);return n.exists?n.result:null}},{key:"SetTemporaryVariable",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1;-1==r&&(r=this.currentElementIndex+1);var i=this.callStack[r-1];if(!n&&!i.temporaryVariables.get(e))throw new Error("Could not find temporary variable to set: "+e);var a=G(i.temporaryVariables,e,null);a.exists&&X.RetainListOriginsForAssignment(a.result,t),i.temporaryVariables.set(e,t)}},{key:"ContextForVariableNamed",value:function(e){return this.currentElement.temporaryVariables.get(e)?this.currentElementIndex+1:0}},{key:"ThreadWithIndex",value:function(e){var t=this._threads.filter((function(t){if(t.threadIndex==e)return t}));return t.length>0?t[0]:null}},{key:"callStack",get:function(){return this.currentThread.callstack}},{key:"callStackTrace",get:function(){for(var e=new M,t=0;t<this._threads.length;t++){var n=this._threads[t],r=t==this._threads.length-1;e.AppendFormat("=== THREAD {0}/{1} {2}===\n",t+1,this._threads.length,r?"(current) ":"");for(var i=0;i<n.callstack.length;i++){n.callstack[i].type==ce.Function?e.Append("  [FUNCTION] "):e.Append("  [TUNNEL] ");var a=n.callstack[i].currentPointer;if(!a.isNull){if(e.Append("<SOMEWHERE IN "),null===a.container)return D("pointer.container");e.Append(a.container.path.toString()),e.AppendLine(">")}}}return e.toString()}}]),t}();!function(e){var t=function(){function e(t,r){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];n(this,e),this.evaluationStackHeightWhenPushed=0,this.functionStartInOutputStream=0,this.currentPointer=r.copy(),this.inExpressionEvaluation=i,this.temporaryVariables=new Map,this.type=t}return i(e,[{key:"Copy",value:function(){var t=new e(this.type,this.currentPointer,this.inExpressionEvaluation);return t.temporaryVariables=new Map(this.temporaryVariables),t.evaluationStackHeightWhenPushed=this.evaluationStackHeightWhenPushed,t.functionStartInOutputStream=this.functionStartInOutputStream,t}}]),e}();e.Element=t;var r=function(){function e(){if(n(this,e),this.threadIndex=0,this.previousPointer=de.Null,this.callstack=[],arguments[0]&&arguments[1]){var r=arguments[0],i=arguments[1];this.threadIndex=parseInt(r.threadIndex);var a,o=S(r.callstack);try{for(o.s();!(a=o.n()).done;){var l=a.value,u=parseInt(l.type),s=de.Null,c=void 0,f=l.cPath;if(void 0!==f){c=f.toString();var h=i.ContentAtPath(new W(c));if(s.container=h.container,s.index=parseInt(l.idx),null==h.obj)throw new Error("When loading state, internal story location couldn't be found: "+c+". Has the story changed since this save data was created?");if(h.approximate){if(null===s.container)return D("pointer.container");i.Warning("When loading state, exact internal story location couldn't be found: '"+c+"', so it was approximated to '"+s.container.path.toString()+"' to recover. Has the story changed since this save data was created?")}}var d=!!l.exp,p=new t(u,s,d),v=l.temp;void 0!==v?p.temporaryVariables=dt.JObjectToDictionaryRuntimeObjs(v):p.temporaryVariables.clear(),this.callstack.push(p)}}catch(e){o.e(e)}finally{o.f()}var m=r.previousContentObject;if(void 0!==m){var y=new W(m.toString());this.previousPointer=i.PointerAtPath(y)}}}return i(e,[{key:"Copy",value:function(){var t=new e;t.threadIndex=this.threadIndex;var n,r=S(this.callstack);try{for(r.s();!(n=r.n()).done;){var i=n.value;t.callstack.push(i.Copy())}}catch(e){r.e(e)}finally{r.f()}return t.previousPointer=this.previousPointer.copy(),t}},{key:"WriteJson",value:function(e){e.WriteObjectStart(),e.WritePropertyStart("callstack"),e.WriteArrayStart();var t,n=S(this.callstack);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(e.WriteObjectStart(),!r.currentPointer.isNull){if(null===r.currentPointer.container)return D("el.currentPointer.container");e.WriteProperty("cPath",r.currentPointer.container.path.componentsString),e.WriteIntProperty("idx",r.currentPointer.index)}e.WriteProperty("exp",r.inExpressionEvaluation),e.WriteIntProperty("type",r.type),r.temporaryVariables.size>0&&(e.WritePropertyStart("temp"),dt.WriteDictionaryRuntimeObjs(e,r.temporaryVariables),e.WritePropertyEnd()),e.WriteObjectEnd()}}catch(e){n.e(e)}finally{n.f()}if(e.WriteArrayEnd(),e.WritePropertyEnd(),e.WriteIntProperty("threadIndex",this.threadIndex),!this.previousPointer.isNull){var i=this.previousPointer.Resolve();if(null===i)return D("this.previousPointer.Resolve()");e.WriteProperty("previousContentObject",i.path.toString())}e.WriteObjectEnd()}}]),e}();e.Thread=r}(pt||(pt={}));var vt=function(){function e(t,r){n(this,e),this.variableChangedEventCallbacks=[],this.patch=null,this._batchObservingVariableChanges=!1,this._defaultGlobalVariables=new Map,this._changedVariablesForBatchObs=new Set,this._globalVariables=new Map,this._callStack=t,this._listDefsOrigin=r;try{return new Proxy(this,{get:function(e,t){return t in e?e[t]:e.$(t)},set:function(e,t,n){return t in e?e[t]=n:e.$(t,n),!0}})}catch(e){}}return i(e,[{key:"variableChangedEvent",value:function(e,t){var n,r=S(this.variableChangedEventCallbacks);try{for(r.s();!(n=r.n()).done;)(0,n.value)(e,t)}catch(e){r.e(e)}finally{r.f()}}},{key:"batchObservingVariableChanges",get:function(){return this._batchObservingVariableChanges},set:function(e){if(this._batchObservingVariableChanges=e,e)this._changedVariablesForBatchObs=new Set;else if(null!=this._changedVariablesForBatchObs){var t,n=S(this._changedVariablesForBatchObs);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=this._globalVariables.get(r);i?this.variableChangedEvent(r,i):D("currentValue")}}catch(e){n.e(e)}finally{n.f()}this._changedVariablesForBatchObs=null}}},{key:"callStack",get:function(){return this._callStack},set:function(e){this._callStack=e}},{key:"$",value:function(e,t){if(void 0===t){var n=null;return null!==this.patch&&(n=this.patch.TryGetGlobal(e,null)).exists?n.result.valueObject:(void 0===(n=this._globalVariables.get(e))&&(n=this._defaultGlobalVariables.get(e)),void 0!==n?n.valueObject:null)}if(void 0===this._defaultGlobalVariables.get(e))throw new z("Cannot assign to a variable ("+e+") that hasn't been declared in the story");var r=q.Create(t);if(null==r)throw null==t?new Error("Cannot pass null to VariableState"):new Error("Invalid value passed to VariableState: "+t.toString());this.SetGlobal(e,r)}},{key:"ApplyPatch",value:function(){if(null===this.patch)return D("this.patch");var e,t=S(this.patch.globals);try{for(t.s();!(e=t.n()).done;){var n=m(e.value,2),r=n[0],i=n[1];this._globalVariables.set(r,i)}}catch(e){t.e(e)}finally{t.f()}if(null!==this._changedVariablesForBatchObs){var a,o=S(this.patch.changedVariables);try{for(o.s();!(a=o.n()).done;){var l=a.value;this._changedVariablesForBatchObs.add(l)}}catch(e){o.e(e)}finally{o.f()}}this.patch=null}},{key:"SetJsonToken",value:function(e){this._globalVariables.clear();var t,n=S(this._defaultGlobalVariables);try{for(n.s();!(t=n.n()).done;){var r=m(t.value,2),i=r[0],a=r[1],o=e[i];if(void 0!==o){var l=dt.JTokenToRuntimeObject(o);if(null===l)return D("tokenInkObject");this._globalVariables.set(i,l)}else this._globalVariables.set(i,a)}}catch(e){n.e(e)}finally{n.f()}}},{key:"WriteJson",value:function(t){t.WriteObjectStart();var n,r=S(this._globalVariables);try{for(r.s();!(n=r.n()).done;){var i=m(n.value,2),a=i[0],o=i[1],l=a,u=o;if(e.dontSaveDefaultValues&&this._defaultGlobalVariables.has(l)){var s=this._defaultGlobalVariables.get(l);if(this.RuntimeObjectsEqual(u,s))continue}t.WritePropertyStart(l),dt.WriteRuntimeObject(t,u),t.WritePropertyEnd()}}catch(e){r.e(e)}finally{r.f()}t.WriteObjectEnd()}},{key:"RuntimeObjectsEqual",value:function(e,t){if(null===e)return D("obj1");if(null===t)return D("obj2");if(e.constructor!==t.constructor)return!1;var n=E(e,H);if(null!==n)return n.value===x(t,H).value;var r=E(e,$);if(null!==r)return r.value===x(t,$).value;var i=E(e,K);if(null!==i)return i.value===x(t,K).value;var a=E(e,q),o=E(t,q);if(null!==a&&null!==o)return T(a.valueObject)&&T(o.valueObject)?a.valueObject.Equals(o.valueObject):a.valueObject===o.valueObject;throw new Error("FastRoughDefinitelyEquals: Unsupported runtime object type: "+e.constructor.name)}},{key:"GetVariableWithName",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,n=this.GetRawVariableWithName(e,t),r=E(n,Y);return null!==r&&(n=this.ValueAtVariablePointer(r)),n}},{key:"TryGetDefaultVariableValue",value:function(e){var t=G(this._defaultGlobalVariables,e,null);return t.exists?t.result:null}},{key:"GlobalVariableExistsWithName",value:function(e){return this._globalVariables.has(e)||null!==this._defaultGlobalVariables&&this._defaultGlobalVariables.has(e)}},{key:"GetRawVariableWithName",value:function(e,t){if(0==t||-1==t){var n=null;if(null!==this.patch&&(n=this.patch.TryGetGlobal(e,null)).exists)return n.result;if((n=G(this._globalVariables,e,null)).exists)return n.result;if(null!==this._defaultGlobalVariables&&(n=G(this._defaultGlobalVariables,e,null)).exists)return n.result;if(null===this._listDefsOrigin)return D("VariablesState._listDefsOrigin");var r=this._listDefsOrigin.FindSingleItemListWithName(e);if(r)return r}return this._callStack.GetTemporaryVariableWithName(e,t)}},{key:"ValueAtVariablePointer",value:function(e){return this.GetVariableWithName(e.variableName,e.contextIndex)}},{key:"Assign",value:function(e,t){var n=e.variableName;if(null===n)return D("name");var r=-1,i=!1;if(i=e.isNewDeclaration?e.isGlobal:this.GlobalVariableExistsWithName(n),e.isNewDeclaration){var a=E(t,Y);null!==a&&(t=this.ResolveVariablePointer(a))}else{var o=null;do{null!=(o=E(this.GetRawVariableWithName(n,r),Y))&&(n=o.variableName,i=0==(r=o.contextIndex))}while(null!=o)}i?this.SetGlobal(n,t):this._callStack.SetTemporaryVariable(n,t,e.isNewDeclaration,r)}},{key:"SnapshotDefaultGlobals",value:function(){this._defaultGlobalVariables=new Map(this._globalVariables)}},{key:"RetainListOriginsForAssignment",value:function(e,t){var n=x(e,X),r=x(t,X);n.value&&r.value&&0==r.value.Count&&r.value.SetInitialOriginNames(n.value.originNames)}},{key:"SetGlobal",value:function(e,t){var n=null;if(null===this.patch&&(n=G(this._globalVariables,e,null)),null!==this.patch&&((n=this.patch.TryGetGlobal(e,null)).exists||(n=G(this._globalVariables,e,null))),X.RetainListOriginsForAssignment(n.result,t),null===e)return D("variableName");if(null!==this.patch?this.patch.SetGlobal(e,t):this._globalVariables.set(e,t),null!==this.variableChangedEvent&&null!==n&&t!==n.result)if(this.batchObservingVariableChanges){if(null===this._changedVariablesForBatchObs)return D("this._changedVariablesForBatchObs");null!==this.patch?this.patch.AddChangedVariable(e):null!==this._changedVariablesForBatchObs&&this._changedVariablesForBatchObs.add(e)}else this.variableChangedEvent(e,t)}},{key:"ResolveVariablePointer",value:function(e){var t=e.contextIndex;-1==t&&(t=this.GetContextIndexOfVariableNamed(e.variableName));var n=E(this.GetRawVariableWithName(e.variableName,t),Y);return null!=n?n:new Y(e.variableName,t)}},{key:"GetContextIndexOfVariableNamed",value:function(e){return this.GlobalVariableExistsWithName(e)?0:this._callStack.currentElementIndex}},{key:"ObserveVariableChange",value:function(e){this.variableChangedEventCallbacks.push(e)}}]),e}();vt.dontSaveDefaultValues=!0;var mt=function(){function e(t){n(this,e),this.seed=t%2147483647,this.seed<=0&&(this.seed+=2147483646)}return i(e,[{key:"next",value:function(){return this.seed=48271*this.seed%2147483647}},{key:"nextFloat",value:function(){return(this.next()-1)/2147483646}}]),e}(),yt=function(){function e(){if(n(this,e),this._changedVariables=new Set,this._visitCounts=new Map,this._turnIndices=new Map,1===arguments.length&&null!==arguments[0]){var t=arguments[0];this._globals=new Map(t._globals),this._changedVariables=new Set(t._changedVariables),this._visitCounts=new Map(t._visitCounts),this._turnIndices=new Map(t._turnIndices)}else this._globals=new Map,this._changedVariables=new Set,this._visitCounts=new Map,this._turnIndices=new Map}return i(e,[{key:"globals",get:function(){return this._globals}},{key:"changedVariables",get:function(){return this._changedVariables}},{key:"visitCounts",get:function(){return this._visitCounts}},{key:"turnIndices",get:function(){return this._turnIndices}},{key:"TryGetGlobal",value:function(e,t){return null!==e&&this._globals.has(e)?{result:this._globals.get(e),exists:!0}:{result:t,exists:!1}}},{key:"SetGlobal",value:function(e,t){this._globals.set(e,t)}},{key:"AddChangedVariable",value:function(e){return this._changedVariables.add(e)}},{key:"TryGetVisitCount",value:function(e,t){return this._visitCounts.has(e)?{result:this._visitCounts.get(e),exists:!0}:{result:t,exists:!1}}},{key:"SetVisitCount",value:function(e,t){this._visitCounts.set(e,t)}},{key:"SetTurnIndex",value:function(e,t){this._turnIndices.set(e,t)}},{key:"TryGetTurnIndex",value:function(e,t){return this._turnIndices.has(e)?{result:this._turnIndices.get(e),exists:!0}:{result:t,exists:!1}}}]),e}(),gt=function(){function e(){n(this,e)}return i(e,null,[{key:"TextToDictionary",value:function(t){return new e.Reader(t).ToDictionary()}},{key:"TextToArray",value:function(t){return new e.Reader(t).ToArray()}}]),e}();!function(e){var t=function(){function e(t){n(this,e),this._rootObject=JSON.parse(t)}return i(e,[{key:"ToDictionary",value:function(){return this._rootObject}},{key:"ToArray",value:function(){return this._rootObject}}]),e}();e.Reader=t;var r=function(){function t(){n(this,t),this._currentPropertyName=null,this._currentString=null,this._stateStack=[],this._collectionStack=[],this._propertyNameStack=[],this._jsonObject=null}return i(t,[{key:"WriteObject",value:function(e){this.WriteObjectStart(),e(this),this.WriteObjectEnd()}},{key:"WriteObjectStart",value:function(){this.StartNewObject(!0);var t={};if(this.state===e.Writer.State.Property){this.Assert(null!==this.currentCollection),this.Assert(null!==this.currentPropertyName);var n=this._propertyNameStack.pop();this.currentCollection[n]=t,this._collectionStack.push(t)}else this.state===e.Writer.State.Array?(this.Assert(null!==this.currentCollection),this.currentCollection.push(t),this._collectionStack.push(t)):(this.Assert(this.state===e.Writer.State.None),this._jsonObject=t,this._collectionStack.push(t));this._stateStack.push(new e.Writer.StateElement(e.Writer.State.Object))}},{key:"WriteObjectEnd",value:function(){this.Assert(this.state===e.Writer.State.Object),this._collectionStack.pop(),this._stateStack.pop()}},{key:"WriteProperty",value:function(e,t){if(this.WritePropertyStart(e),arguments[1]instanceof Function)(0,arguments[1])(this);else{var n=arguments[1];this.Write(n)}this.WritePropertyEnd()}},{key:"WriteIntProperty",value:function(e,t){this.WritePropertyStart(e),this.WriteInt(t),this.WritePropertyEnd()}},{key:"WriteFloatProperty",value:function(e,t){this.WritePropertyStart(e),this.WriteFloat(t),this.WritePropertyEnd()}},{key:"WritePropertyStart",value:function(t){this.Assert(this.state===e.Writer.State.Object),this._propertyNameStack.push(t),this.IncrementChildCount(),this._stateStack.push(new e.Writer.StateElement(e.Writer.State.Property))}},{key:"WritePropertyEnd",value:function(){this.Assert(this.state===e.Writer.State.Property),this.Assert(1===this.childCount),this._stateStack.pop()}},{key:"WritePropertyNameStart",value:function(){this.Assert(this.state===e.Writer.State.Object),this.IncrementChildCount(),this._currentPropertyName="",this._stateStack.push(new e.Writer.StateElement(e.Writer.State.Property)),this._stateStack.push(new e.Writer.StateElement(e.Writer.State.PropertyName))}},{key:"WritePropertyNameEnd",value:function(){this.Assert(this.state===e.Writer.State.PropertyName),this.Assert(null!==this._currentPropertyName),this._propertyNameStack.push(this._currentPropertyName),this._currentPropertyName=null,this._stateStack.pop()}},{key:"WritePropertyNameInner",value:function(t){this.Assert(this.state===e.Writer.State.PropertyName),this.Assert(null!==this._currentPropertyName),this._currentPropertyName+=t}},{key:"WriteArrayStart",value:function(){this.StartNewObject(!0);var t=[];if(this.state===e.Writer.State.Property){this.Assert(null!==this.currentCollection),this.Assert(null!==this.currentPropertyName);var n=this._propertyNameStack.pop();this.currentCollection[n]=t,this._collectionStack.push(t)}else this.state===e.Writer.State.Array?(this.Assert(null!==this.currentCollection),this.currentCollection.push(t),this._collectionStack.push(t)):(this.Assert(this.state===e.Writer.State.None),this._jsonObject=t,this._collectionStack.push(t));this._stateStack.push(new e.Writer.StateElement(e.Writer.State.Array))}},{key:"WriteArrayEnd",value:function(){this.Assert(this.state===e.Writer.State.Array),this._collectionStack.pop(),this._stateStack.pop()}},{key:"Write",value:function(e){null!==e?(this.StartNewObject(!1),this._addToCurrentObject(e)):console.error("Warning: trying to write a null value")}},{key:"WriteBool",value:function(e){null!==e&&(this.StartNewObject(!1),this._addToCurrentObject(e))}},{key:"WriteInt",value:function(e){null!==e&&(this.StartNewObject(!1),this._addToCurrentObject(Math.floor(e)))}},{key:"WriteFloat",value:function(e){null!==e&&(this.StartNewObject(!1),e==Number.POSITIVE_INFINITY?this._addToCurrentObject(34e37):e==Number.NEGATIVE_INFINITY?this._addToCurrentObject(-34e37):isNaN(e)?this._addToCurrentObject(0):this._addToCurrentObject(e))}},{key:"WriteNull",value:function(){this.StartNewObject(!1),this._addToCurrentObject(null)}},{key:"WriteStringStart",value:function(){this.StartNewObject(!1),this._currentString="",this._stateStack.push(new e.Writer.StateElement(e.Writer.State.String))}},{key:"WriteStringEnd",value:function(){this.Assert(this.state==e.Writer.State.String),this._stateStack.pop(),this._addToCurrentObject(this._currentString),this._currentString=null}},{key:"WriteStringInner",value:function(t){this.Assert(this.state===e.Writer.State.String),null!==t?this._currentString+=t:console.error("Warning: trying to write a null string")}},{key:"toString",value:function(){return null===this._jsonObject?"":JSON.stringify(this._jsonObject)}},{key:"StartNewObject",value:function(t){t?this.Assert(this.state===e.Writer.State.None||this.state===e.Writer.State.Property||this.state===e.Writer.State.Array):this.Assert(this.state===e.Writer.State.Property||this.state===e.Writer.State.Array),this.state===e.Writer.State.Property&&this.Assert(0===this.childCount),this.state!==e.Writer.State.Array&&this.state!==e.Writer.State.Property||this.IncrementChildCount()}},{key:"state",get:function(){return this._stateStack.length>0?this._stateStack[this._stateStack.length-1].type:e.Writer.State.None}},{key:"childCount",get:function(){return this._stateStack.length>0?this._stateStack[this._stateStack.length-1].childCount:0}},{key:"currentCollection",get:function(){return this._collectionStack.length>0?this._collectionStack[this._collectionStack.length-1]:null}},{key:"currentPropertyName",get:function(){return this._propertyNameStack.length>0?this._propertyNameStack[this._propertyNameStack.length-1]:null}},{key:"IncrementChildCount",value:function(){this.Assert(this._stateStack.length>0);var e=this._stateStack.pop();e.childCount++,this._stateStack.push(e)}},{key:"Assert",value:function(e){if(!e)throw Error("Assert failed while writing JSON")}},{key:"_addToCurrentObject",value:function(t){this.Assert(null!==this.currentCollection),this.state===e.Writer.State.Array?(this.Assert(Array.isArray(this.currentCollection)),this.currentCollection.push(t)):this.state===e.Writer.State.Property&&(this.Assert(!Array.isArray(this.currentCollection)),this.Assert(null!==this.currentPropertyName),this.currentCollection[this.currentPropertyName]=t,this._propertyNameStack.pop())}}]),t}();e.Writer=r,function(t){var r;(r=t.State||(t.State={}))[r.None=0]="None",r[r.Object=1]="Object",r[r.Array=2]="Array",r[r.Property=3]="Property",r[r.PropertyName=4]="PropertyName",r[r.String=5]="String";var a=i((function t(r){n(this,t),this.type=e.Writer.State.None,this.childCount=0,this.type=r}));t.StateElement=a}(r=e.Writer||(e.Writer={}))}(gt||(gt={}));var bt,St=function(){function e(){n(this,e);var t=arguments[0],r=arguments[1];if(this.name=t,this.callStack=new pt(r),arguments[2]){var i=arguments[2];this.callStack.SetJsonToken(i.callstack,r),this.outputStream=dt.JArrayToRuntimeObjList(i.outputStream),this.currentChoices=dt.JArrayToRuntimeObjList(i.currentChoices);var a=i.choiceThreads;void 0!==a&&this.LoadFlowChoiceThreads(a,r)}else this.outputStream=[],this.currentChoices=[]}return i(e,[{key:"WriteJson",value:function(e){var t=this;e.WriteObjectStart(),e.WriteProperty("callstack",(function(e){return t.callStack.WriteJson(e)})),e.WriteProperty("outputStream",(function(e){return dt.WriteListRuntimeObjs(e,t.outputStream)}));var n,r=!1,i=S(this.currentChoices);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(null===a.threadAtGeneration)return D("c.threadAtGeneration");a.originalThreadIndex=a.threadAtGeneration.threadIndex,null===this.callStack.ThreadWithIndex(a.originalThreadIndex)&&(r||(r=!0,e.WritePropertyStart("choiceThreads"),e.WriteObjectStart()),e.WritePropertyStart(a.originalThreadIndex),a.threadAtGeneration.WriteJson(e),e.WritePropertyEnd())}}catch(e){i.e(e)}finally{i.f()}r&&(e.WriteObjectEnd(),e.WritePropertyEnd()),e.WriteProperty("currentChoices",(function(e){e.WriteArrayStart();var n,r=S(t.currentChoices);try{for(r.s();!(n=r.n()).done;){var i=n.value;dt.WriteChoice(e,i)}}catch(e){r.e(e)}finally{r.f()}e.WriteArrayEnd()})),e.WriteObjectEnd()}},{key:"LoadFlowChoiceThreads",value:function(e,t){var n,r=S(this.currentChoices);try{for(r.s();!(n=r.n()).done;){var i=n.value,a=this.callStack.ThreadWithIndex(i.originalThreadIndex);if(null!==a)i.threadAtGeneration=a.Copy();else{var o=e["".concat(i.originalThreadIndex)];i.threadAtGeneration=new pt.Thread(o,t)}}}catch(e){r.e(e)}finally{r.f()}}}]),e}(),Ct=function(){function t(e){n(this,t),this.kInkSaveStateVersion=9,this.kMinCompatibleLoadVersion=8,this.onDidLoadState=null,this._currentErrors=null,this._currentWarnings=null,this.divertedPointer=de.Null,this._currentTurnIndex=0,this.storySeed=0,this.previousRandom=0,this.didSafeExit=!1,this._currentText=null,this._currentTags=null,this._outputStreamTextDirty=!0,this._outputStreamTagsDirty=!0,this._patch=null,this._namedFlows=null,this.kDefaultFlowName="DEFAULT_FLOW",this.story=e,this._currentFlow=new St(this.kDefaultFlowName,e),this.OutputStreamDirty(),this._evaluationStack=[],this._variablesState=new vt(this.callStack,e.listDefinitions),this._visitCounts=new Map,this._turnIndices=new Map,this.currentTurnIndex=-1;var r=(new Date).getTime();this.storySeed=new mt(r).next()%100,this.previousRandom=0,this.GoToStart()}return i(t,[{key:"ToJson",value:function(){var e=new gt.Writer;return this.WriteJson(e),e.toString()}},{key:"toJson",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.ToJson(e)}},{key:"LoadJson",value:function(e){var t=gt.TextToDictionary(e);this.LoadJsonObj(t),null!==this.onDidLoadState&&this.onDidLoadState()}},{key:"VisitCountAtPathString",value:function(e){var t;if(null!==this._patch){var n=this.story.ContentAtPath(new W(e)).container;if(null===n)throw new Error("Content at path not found: "+e);if((t=this._patch.TryGetVisitCount(n,0)).exists)return t.result}return(t=G(this._visitCounts,e,null)).exists?t.result:0}},{key:"VisitCountForContainer",value:function(e){if(null===e)return D("container");if(!e.visitsShouldBeCounted)return this.story.Error("Read count for target ("+e.name+" - on "+e.debugMetadata+") unknown. The story may need to be compiled with countAllVisits flag (-c)."),0;if(null!==this._patch){var t=this._patch.TryGetVisitCount(e,0);if(t.exists)return t.result}var n=e.path.toString(),r=G(this._visitCounts,n,null);return r.exists?r.result:0}},{key:"IncrementVisitCountForContainer",value:function(e){if(null!==this._patch){var t=this.VisitCountForContainer(e);return t++,void this._patch.SetVisitCount(e,t)}var n=e.path.toString(),r=G(this._visitCounts,n,null);r.exists?this._visitCounts.set(n,r.result+1):this._visitCounts.set(n,1)}},{key:"RecordTurnIndexVisitToContainer",value:function(e){if(null===this._patch){var t=e.path.toString();this._turnIndices.set(t,this.currentTurnIndex)}else this._patch.SetTurnIndex(e,this.currentTurnIndex)}},{key:"TurnsSinceForContainer",value:function(e){if(e.turnIndexShouldBeCounted||this.story.Error("TURNS_SINCE() for target ("+e.name+" - on "+e.debugMetadata+") unknown. The story may need to be compiled with countAllVisits flag (-c)."),null!==this._patch){var t=this._patch.TryGetTurnIndex(e,0);if(t.exists)return this.currentTurnIndex-t.result}var n=e.path.toString(),r=G(this._turnIndices,n,0);return r.exists?this.currentTurnIndex-r.result:-1}},{key:"callstackDepth",get:function(){return this.callStack.depth}},{key:"outputStream",get:function(){return this._currentFlow.outputStream}},{key:"currentChoices",get:function(){return this.canContinue?[]:this._currentFlow.currentChoices}},{key:"generatedChoices",get:function(){return this._currentFlow.currentChoices}},{key:"currentErrors",get:function(){return this._currentErrors}},{key:"currentWarnings",get:function(){return this._currentWarnings}},{key:"variablesState",get:function(){return this._variablesState},set:function(e){this._variablesState=e}},{key:"callStack",get:function(){return this._currentFlow.callStack}},{key:"evaluationStack",get:function(){return this._evaluationStack}},{key:"currentTurnIndex",get:function(){return this._currentTurnIndex},set:function(e){this._currentTurnIndex=e}},{key:"currentPathString",get:function(){var e=this.currentPointer;return e.isNull?null:null===e.path?D("pointer.path"):e.path.toString()}},{key:"currentPointer",get:function(){return this.callStack.currentElement.currentPointer.copy()},set:function(e){this.callStack.currentElement.currentPointer=e.copy()}},{key:"previousPointer",get:function(){return this.callStack.currentThread.previousPointer.copy()},set:function(e){this.callStack.currentThread.previousPointer=e.copy()}},{key:"canContinue",get:function(){return!this.currentPointer.isNull&&!this.hasError}},{key:"hasError",get:function(){return null!=this.currentErrors&&this.currentErrors.length>0}},{key:"hasWarning",get:function(){return null!=this.currentWarnings&&this.currentWarnings.length>0}},{key:"currentText",get:function(){if(this._outputStreamTextDirty){var e,t=new M,n=S(this.outputStream);try{for(n.s();!(e=n.n()).done;){var r=E(e.value,J);null!==r&&t.Append(r.value)}}catch(e){n.e(e)}finally{n.f()}this._currentText=this.CleanOutputWhitespace(t.toString()),this._outputStreamTextDirty=!1}return this._currentText}},{key:"CleanOutputWhitespace",value:function(e){for(var t=new M,n=-1,r=0,i=0;i<e.length;i++){var a=e.charAt(i),o=" "==a||"\t"==a;o&&-1==n&&(n=i),o||("\n"!=a&&n>0&&n!=r&&t.Append(" "),n=-1),"\n"==a&&(r=i+1),o||t.Append(a)}return t.toString()}},{key:"currentTags",get:function(){if(this._outputStreamTagsDirty){this._currentTags=[];var e,t=S(this.outputStream);try{for(t.s();!(e=t.n()).done;){var n=E(e.value,ct);null!==n&&this._currentTags.push(n.text)}}catch(e){t.e(e)}finally{t.f()}this._outputStreamTagsDirty=!1}return this._currentTags}},{key:"currentFlowName",get:function(){return this._currentFlow.name}},{key:"inExpressionEvaluation",get:function(){return this.callStack.currentElement.inExpressionEvaluation},set:function(e){this.callStack.currentElement.inExpressionEvaluation=e}},{key:"GoToStart",value:function(){this.callStack.currentElement.currentPointer=de.StartOf(this.story.mainContentContainer)}},{key:"SwitchFlow_Internal",value:function(e){if(null===e)throw new Error("Must pass a non-null string to Story.SwitchFlow");if(null===this._namedFlows&&(this._namedFlows=new Map,this._namedFlows.set(this.kDefaultFlowName,this._currentFlow)),e!==this._currentFlow.name){var t,n=G(this._namedFlows,e,null);n.exists?t=n.result:(t=new St(e,this.story),this._namedFlows.set(e,t)),this._currentFlow=t,this.variablesState.callStack=this._currentFlow.callStack,this.OutputStreamDirty()}}},{key:"SwitchToDefaultFlow_Internal",value:function(){null!==this._namedFlows&&this.SwitchFlow_Internal(this.kDefaultFlowName)}},{key:"RemoveFlow_Internal",value:function(e){if(null===e)throw new Error("Must pass a non-null string to Story.DestroyFlow");if(e===this.kDefaultFlowName)throw new Error("Cannot destroy default flow");if(this._currentFlow.name===e&&this.SwitchToDefaultFlow_Internal(),null===this._namedFlows)return D("this._namedFlows");this._namedFlows.delete(e)}},{key:"CopyAndStartPatching",value:function(){var e,n,r,i,a,o=new t(this.story);if(o._patch=new yt(this._patch),o._currentFlow.name=this._currentFlow.name,o._currentFlow.callStack=new pt(this._currentFlow.callStack),(e=o._currentFlow.currentChoices).push.apply(e,y(this._currentFlow.currentChoices)),(n=o._currentFlow.outputStream).push.apply(n,y(this._currentFlow.outputStream)),o.OutputStreamDirty(),null!==this._namedFlows){o._namedFlows=new Map;var l,u=S(this._namedFlows);try{for(u.s();!(l=u.n()).done;){var s=m(l.value,2),c=s[0],f=s[1];o._namedFlows.set(c,f)}}catch(e){u.e(e)}finally{u.f()}o._namedFlows.set(this._currentFlow.name,o._currentFlow)}return this.hasError&&(o._currentErrors=[],(i=o._currentErrors).push.apply(i,y(this.currentErrors||[]))),this.hasWarning&&(o._currentWarnings=[],(a=o._currentWarnings).push.apply(a,y(this.currentWarnings||[]))),o.variablesState=this.variablesState,o.variablesState.callStack=o.callStack,o.variablesState.patch=o._patch,(r=o.evaluationStack).push.apply(r,y(this.evaluationStack)),this.divertedPointer.isNull||(o.divertedPointer=this.divertedPointer.copy()),o.previousPointer=this.previousPointer.copy(),o._visitCounts=this._visitCounts,o._turnIndices=this._turnIndices,o.currentTurnIndex=this.currentTurnIndex,o.storySeed=this.storySeed,o.previousRandom=this.previousRandom,o.didSafeExit=this.didSafeExit,o}},{key:"RestoreAfterPatch",value:function(){this.variablesState.callStack=this.callStack,this.variablesState.patch=this._patch}},{key:"ApplyAnyPatch",value:function(){if(null!==this._patch){this.variablesState.ApplyPatch();var e,t=S(this._patch.visitCounts);try{for(t.s();!(e=t.n()).done;){var n=m(e.value,2),r=n[0],i=n[1];this.ApplyCountChanges(r,i,!0)}}catch(e){t.e(e)}finally{t.f()}var a,o=S(this._patch.turnIndices);try{for(o.s();!(a=o.n()).done;){var l=m(a.value,2),u=l[0],s=l[1];this.ApplyCountChanges(u,s,!1)}}catch(e){o.e(e)}finally{o.f()}this._patch=null}}},{key:"ApplyCountChanges",value:function(e,t,n){(n?this._visitCounts:this._turnIndices).set(e.path.toString(),t)}},{key:"WriteJson",value:function(t){var n=this;if(t.WriteObjectStart(),t.WritePropertyStart("flows"),t.WriteObjectStart(),null!==this._namedFlows){var r,i=S(this._namedFlows);try{var a=function(){var e=m(r.value,2),n=e[0],i=e[1];t.WriteProperty(n,(function(e){return i.WriteJson(e)}))};for(i.s();!(r=i.n()).done;)a()}catch(e){i.e(e)}finally{i.f()}}else t.WriteProperty(this._currentFlow.name,(function(e){return n._currentFlow.WriteJson(e)}));if(t.WriteObjectEnd(),t.WritePropertyEnd(),t.WriteProperty("currentFlowName",this._currentFlow.name),t.WriteProperty("variablesState",(function(e){return n.variablesState.WriteJson(e)})),t.WriteProperty("evalStack",(function(e){return dt.WriteListRuntimeObjs(e,n.evaluationStack)})),!this.divertedPointer.isNull){if(null===this.divertedPointer.path)return D("divertedPointer");t.WriteProperty("currentDivertTarget",this.divertedPointer.path.componentsString)}t.WriteProperty("visitCounts",(function(e){return dt.WriteIntDictionary(e,n._visitCounts)})),t.WriteProperty("turnIndices",(function(e){return dt.WriteIntDictionary(e,n._turnIndices)})),t.WriteIntProperty("turnIdx",this.currentTurnIndex),t.WriteIntProperty("storySeed",this.storySeed),t.WriteIntProperty("previousRandom",this.previousRandom),t.WriteIntProperty("inkSaveVersion",this.kInkSaveStateVersion),t.WriteIntProperty("inkFormatVersion",e.Story.inkVersionCurrent),t.WriteObjectEnd()}},{key:"LoadJsonObj",value:function(e){var t=e,n=t.inkSaveVersion;if(null==n)throw new Error("ink save format incorrect, can't load.");if(parseInt(n)<this.kMinCompatibleLoadVersion)throw new Error("Ink save format isn't compatible with the current version (saw '"+n+"', but minimum is "+this.kMinCompatibleLoadVersion+"), so can't load.");var r=t.flows;if(null!=r){var i=r;1===Object.keys(i).length?this._namedFlows=null:null===this._namedFlows?this._namedFlows=new Map:this._namedFlows.clear();for(var a=0,o=Object.entries(i);a<o.length;a++){var l=m(o[a],2),u=l[0],s=l[1],c=new St(u,this.story,s);if(1===Object.keys(i).length)this._currentFlow=new St(u,this.story,s);else{if(null===this._namedFlows)return D("this._namedFlows");this._namedFlows.set(u,c)}}if(null!=this._namedFlows&&this._namedFlows.size>1){var f=t.currentFlowName;this._currentFlow=this._namedFlows.get(f)}}else{this._namedFlows=null,this._currentFlow.name=this.kDefaultFlowName,this._currentFlow.callStack.SetJsonToken(t.callstackThreads,this.story),this._currentFlow.outputStream=dt.JArrayToRuntimeObjList(t.outputStream),this._currentFlow.currentChoices=dt.JArrayToRuntimeObjList(t.currentChoices);var h=t.choiceThreads;this._currentFlow.LoadFlowChoiceThreads(h,this.story)}this.OutputStreamDirty(),this.variablesState.SetJsonToken(t.variablesState),this.variablesState.callStack=this._currentFlow.callStack,this._evaluationStack=dt.JArrayToRuntimeObjList(t.evalStack);var d=t.currentDivertTarget;if(null!=d){var p=new W(d.toString());this.divertedPointer=this.story.PointerAtPath(p)}this._visitCounts=dt.JObjectToIntDictionary(t.visitCounts),this._turnIndices=dt.JObjectToIntDictionary(t.turnIndices),this.currentTurnIndex=parseInt(t.turnIdx),this.storySeed=parseInt(t.storySeed),this.previousRandom=parseInt(t.previousRandom)}},{key:"ResetErrors",value:function(){this._currentErrors=null,this._currentWarnings=null}},{key:"ResetOutput",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.outputStream.length=0,null!==t&&(e=this.outputStream).push.apply(e,y(t)),this.OutputStreamDirty()}},{key:"PushToOutputStream",value:function(e){var t=E(e,J);if(null!==t){var n=this.TrySplittingHeadTailWhitespace(t);if(null!==n){var r,i=S(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;this.PushToOutputStreamIndividual(a)}}catch(e){i.e(e)}finally{i.f()}return void this.OutputStreamDirty()}}this.PushToOutputStreamIndividual(e),this.OutputStreamDirty()}},{key:"PopFromOutputStream",value:function(e){this.outputStream.splice(this.outputStream.length-e,e),this.OutputStreamDirty()}},{key:"TrySplittingHeadTailWhitespace",value:function(e){var t=e.value;if(null===t)return D("single.value");for(var n=-1,r=-1,i=0;i<t.length;i++){var a=t[i];if("\n"!=a){if(" "==a||"\t"==a)continue;break}-1==n&&(n=i),r=i}for(var o=-1,l=-1,u=t.length-1;u>=0;u--){var s=t[u];if("\n"!=s){if(" "==s||"\t"==s)continue;break}-1==o&&(o=u),l=u}if(-1==n&&-1==o)return null;var c=[],f=0,h=t.length;if(-1!=n){if(n>0){var d=new J(t.substring(0,n));c.push(d)}c.push(new J("\n")),f=r+1}if(-1!=o&&(h=l),h>f){var p=t.substring(f,h-f);c.push(new J(p))}if(-1!=o&&l>r&&(c.push(new J("\n")),o<t.length-1)){var v=t.length-o-1,m=new J(t.substring(o+1,v));c.push(m)}return c}},{key:"PushToOutputStreamIndividual",value:function(e){var t=E(e,nt),n=E(e,J),r=!0;if(t)this.TrimNewlinesFromOutputStream(),r=!0;else if(n){var i=-1,a=this.callStack.currentElement;a.type==ce.Function&&(i=a.functionStartInOutputStream);for(var o=-1,l=this.outputStream.length-1;l>=0;l--){var u=this.outputStream[l],s=u instanceof te?u:null;if(null!=(u instanceof nt?u:null)){o=l;break}if(null!=s&&s.commandType==te.CommandType.BeginString){l>=i&&(i=-1);break}}if(-1!=(-1!=o&&-1!=i?Math.min(i,o):-1!=o?o:i)){if(n.isNewline)r=!1;else if(n.isNonWhitespace&&(o>-1&&this.RemoveExistingGlue(),i>-1))for(var c=this.callStack.elements,f=c.length-1;f>=0;f--){var h=c[f];if(h.type!=ce.Function)break;h.functionStartInOutputStream=-1}}else n.isNewline&&(!this.outputStreamEndsInNewline&&this.outputStreamContainsContent||(r=!1))}if(r){if(null===e)return D("obj");this.outputStream.push(e),this.OutputStreamDirty()}}},{key:"TrimNewlinesFromOutputStream",value:function(){for(var e=-1,t=this.outputStream.length-1;t>=0;){var n=this.outputStream[t],r=E(n,te),i=E(n,J);if(null!=r||null!=i&&i.isNonWhitespace)break;null!=i&&i.isNewline&&(e=t),t--}if(e>=0)for(t=e;t<this.outputStream.length;)E(this.outputStream[t],J)?this.outputStream.splice(t,1):t++;this.OutputStreamDirty()}},{key:"RemoveExistingGlue",value:function(){for(var e=this.outputStream.length-1;e>=0;e--){var t=this.outputStream[e];if(t instanceof nt)this.outputStream.splice(e,1);else if(t instanceof te)break}this.OutputStreamDirty()}},{key:"outputStreamEndsInNewline",get:function(){if(this.outputStream.length>0)for(var e=this.outputStream.length-1;e>=0&&!(this.outputStream[e]instanceof te);e--){var t=this.outputStream[e];if(t instanceof J){if(t.isNewline)return!0;if(t.isNonWhitespace)break}}return!1}},{key:"outputStreamContainsContent",get:function(){var e,t=S(this.outputStream);try{for(t.s();!(e=t.n()).done;)if(e.value instanceof J)return!0}catch(e){t.e(e)}finally{t.f()}return!1}},{key:"inStringEvaluation",get:function(){for(var e=this.outputStream.length-1;e>=0;e--){var t=E(this.outputStream[e],te);if(t instanceof te&&t.commandType==te.CommandType.BeginString)return!0}return!1}},{key:"PushEvaluationStack",value:function(e){var t=E(e,X);if(t){var n=t.value;if(null===n)return D("rawList");if(null!=n.originNames){n.origins||(n.origins=[]),n.origins.length=0;var r,i=S(n.originNames);try{for(i.s();!(r=i.n()).done;){var a=r.value;if(null===this.story.listDefinitions)return D("StoryState.story.listDefinitions");var o=this.story.listDefinitions.TryListGetDefinition(a,null);if(null===o.result)return D("StoryState def.result");n.origins.indexOf(o.result)<0&&n.origins.push(o.result)}}catch(e){i.e(e)}finally{i.f()}}}if(null===e)return D("obj");this.evaluationStack.push(e)}},{key:"PopEvaluationStack",value:function(e){if(void 0===e)return O(this.evaluationStack.pop());if(e>this.evaluationStack.length)throw new Error("trying to pop too many objects");return O(this.evaluationStack.splice(this.evaluationStack.length-e,e))}},{key:"PeekEvaluationStack",value:function(){return this.evaluationStack[this.evaluationStack.length-1]}},{key:"ForceEnd",value:function(){this.callStack.Reset(),this._currentFlow.currentChoices.length=0,this.currentPointer=de.Null,this.previousPointer=de.Null,this.didSafeExit=!0}},{key:"TrimWhitespaceFromFunctionEnd",value:function(){I.Assert(this.callStack.currentElement.type==ce.Function);var e=this.callStack.currentElement.functionStartInOutputStream;-1==e&&(e=0);for(var t=this.outputStream.length-1;t>=e;t--){var n=this.outputStream[t],r=E(n,J),i=E(n,te);if(null!=r){if(i)break;if(!r.isNewline&&!r.isInlineWhitespace)break;this.outputStream.splice(t,1),this.OutputStreamDirty()}}}},{key:"PopCallStack",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.callStack.currentElement.type==ce.Function&&this.TrimWhitespaceFromFunctionEnd(),this.callStack.Pop(e)}},{key:"SetChosenPath",value:function(e,t){this._currentFlow.currentChoices.length=0;var n=this.story.PointerAtPath(e);n.isNull||-1!=n.index||(n.index=0),this.currentPointer=n,t&&this.currentTurnIndex++}},{key:"StartFunctionEvaluationFromGame",value:function(e,t){this.callStack.Push(ce.FunctionEvaluationFromGame,this.evaluationStack.length),this.callStack.currentElement.currentPointer=de.StartOf(e),this.PassArgumentsToEvaluationStack(t)}},{key:"PassArgumentsToEvaluationStack",value:function(e){if(null!==e)for(var t=0;t<e.length;t++){if("number"!=typeof e[t]&&"string"!=typeof e[t]||e[t]instanceof B)throw new Error((O(arguments[t]),"null"));this.PushEvaluationStack(q.Create(e[t]))}}},{key:"TryExitFunctionEvaluationFromGame",value:function(){return this.callStack.currentElement.type==ce.FunctionEvaluationFromGame&&(this.currentPointer=de.Null,this.didSafeExit=!0,!0)}},{key:"CompleteFunctionEvaluationFromGame",value:function(){if(this.callStack.currentElement.type!=ce.FunctionEvaluationFromGame)throw new Error("Expected external function evaluation to be complete. Stack trace: "+this.callStack.callStackTrace);for(var e=this.callStack.currentElement.evaluationStackHeightWhenPushed,t=null;this.evaluationStack.length>e;){var n=this.PopEvaluationStack();null===t&&(t=n)}if(this.PopCallStack(ce.FunctionEvaluationFromGame),t){if(t instanceof re)return null;var r=x(t,q);return r.valueType==U.DivertTarget?r.valueObject.toString():r.valueObject}return null}},{key:"AddError",value:function(e,t){t?(null==this._currentWarnings&&(this._currentWarnings=[]),this._currentWarnings.push(e)):(null==this._currentErrors&&(this._currentErrors=[]),this._currentErrors.push(e))}},{key:"OutputStreamDirty",value:function(){this._outputStreamTextDirty=!0,this._outputStreamTagsDirty=!0}}]),t}(),wt=function(){function e(){n(this,e),this.startTime=void 0}return i(e,[{key:"ElapsedMilliseconds",get:function(){return void 0===this.startTime?0:(new Date).getTime()-this.startTime}},{key:"Start",value:function(){this.startTime=(new Date).getTime()}},{key:"Stop",value:function(){this.startTime=void 0}}]),e}();!function(e){e[e.Author=0]="Author",e[e.Warning=1]="Warning",e[e.Error=2]="Error"}(bt||(bt={})),Number.isInteger||(Number.isInteger=function(e){return"number"==typeof e&&isFinite(e)&&e>-9007199254740992&&e<9007199254740992&&Math.floor(e)===e}),e.Story=function(e){a(o,e);var r=d(o);function o(){var e,t;n(this,o),(e=r.call(this)).inkVersionMinimumCompatible=18,e.onError=null,e.onDidContinue=null,e.onMakeChoice=null,e.onEvaluateFunction=null,e.onCompleteEvaluateFunction=null,e.onChoosePathString=null,e._prevContainers=[],e.allowExternalFunctionFallbacks=!1,e._listDefinitions=null,e._variableObservers=null,e._hasValidatedExternals=!1,e._temporaryEvaluationContainer=null,e._asyncContinueActive=!1,e._stateSnapshotAtLastNewline=null,e._sawLookaheadUnsafeFunctionAfterNewline=!1,e._recursiveContinueCount=0,e._asyncSaving=!1,e._profiler=null;var i=null,a=null;if(arguments[0]instanceof ee)t=arguments[0],void 0!==arguments[1]&&(i=arguments[1]),e._mainContentContainer=t;else if("string"==typeof arguments[0]){var l=arguments[0];a=gt.TextToDictionary(l)}else a=arguments[0];if(null!=i&&(e._listDefinitions=new ht(i)),e._externals=new Map,null!==a){var u=a,s=u.inkVersion;if(null==s)throw new Error("ink version number not found. Are you sure it's a valid .ink.json file?");var c=parseInt(s);if(c>o.inkVersionCurrent)throw new Error("Version of ink used to build story was newer than the current version of the engine");if(c<e.inkVersionMinimumCompatible)throw new Error("Version of ink used to build story is too old to be loaded by this version of the engine");c!=o.inkVersionCurrent&&console.warn("WARNING: Version of ink used to build story doesn't match current version of engine. Non-critical, but recommend synchronising.");var f,h=u.root;if(null==h)throw new Error("Root node for ink not found. Are you sure it's a valid .ink.json file?");(f=u.listDefs)&&(e._listDefinitions=dt.JTokenToListDefinitions(f)),e._mainContentContainer=x(dt.JTokenToRuntimeObject(h),ee),e.ResetState()}return e}return i(o,[{key:"currentChoices",get:function(){var e=[];if(null===this._state)return D("this._state");var t,n=S(this._state.currentChoices);try{for(n.s();!(t=n.n()).done;){var r=t.value;r.isInvisibleDefault||(r.index=e.length,e.push(r))}}catch(e){n.e(e)}finally{n.f()}return e}},{key:"currentText",get:function(){return this.IfAsyncWeCant("call currentText since it's a work in progress"),this.state.currentText}},{key:"currentTags",get:function(){return this.IfAsyncWeCant("call currentTags since it's a work in progress"),this.state.currentTags}},{key:"currentErrors",get:function(){return this.state.currentErrors}},{key:"currentWarnings",get:function(){return this.state.currentWarnings}},{key:"currentFlowName",get:function(){return this.state.currentFlowName}},{key:"hasError",get:function(){return this.state.hasError}},{key:"hasWarning",get:function(){return this.state.hasWarning}},{key:"variablesState",get:function(){return this.state.variablesState}},{key:"listDefinitions",get:function(){return this._listDefinitions}},{key:"state",get:function(){return this._state}},{key:"StartProfiling",value:function(){}},{key:"EndProfiling",value:function(){}},{key:"ToJson",value:function(e){var t=this,n=!1;if(e||(n=!0,e=new gt.Writer),e.WriteObjectStart(),e.WriteIntProperty("inkVersion",o.inkVersionCurrent),e.WriteProperty("root",(function(e){return dt.WriteRuntimeContainer(e,t._mainContentContainer)})),null!=this._listDefinitions){e.WritePropertyStart("listDefs"),e.WriteObjectStart();var r,i=S(this._listDefinitions.lists);try{for(i.s();!(r=i.n()).done;){var a=r.value;e.WritePropertyStart(a.name),e.WriteObjectStart();var l,u=S(a.items);try{for(u.s();!(l=u.n()).done;){var s=m(l.value,2),c=s[0],f=s[1],h=V.fromSerializedKey(c),d=f;e.WriteIntProperty(h.itemName,d)}}catch(e){u.e(e)}finally{u.f()}e.WriteObjectEnd(),e.WritePropertyEnd()}}catch(e){i.e(e)}finally{i.f()}e.WriteObjectEnd(),e.WritePropertyEnd()}if(e.WriteObjectEnd(),n)return e.toString()}},{key:"ResetState",value:function(){this.IfAsyncWeCant("ResetState"),this._state=new Ct(this),this._state.variablesState.ObserveVariableChange(this.VariableStateDidChangeEvent.bind(this)),this.ResetGlobals()}},{key:"ResetErrors",value:function(){if(null===this._state)return D("this._state");this._state.ResetErrors()}},{key:"ResetCallstack",value:function(){if(this.IfAsyncWeCant("ResetCallstack"),null===this._state)return D("this._state");this._state.ForceEnd()}},{key:"ResetGlobals",value:function(){if(this._mainContentContainer.namedContent.get("global decl")){var e=this.state.currentPointer.copy();this.ChoosePath(new W("global decl"),!1),this.ContinueInternal(),this.state.currentPointer=e}this.state.variablesState.SnapshotDefaultGlobals()}},{key:"SwitchFlow",value:function(e){if(this.IfAsyncWeCant("switch flow"),this._asyncSaving)throw new Error("Story is already in background saving mode, can't switch flow to "+e);this.state.SwitchFlow_Internal(e)}},{key:"RemoveFlow",value:function(e){this.state.RemoveFlow_Internal(e)}},{key:"SwitchToDefaultFlow",value:function(){this.state.SwitchToDefaultFlow_Internal()}},{key:"Continue",value:function(){return this.ContinueAsync(0),this.currentText}},{key:"canContinue",get:function(){return this.state.canContinue}},{key:"asyncContinueComplete",get:function(){return!this._asyncContinueActive}},{key:"ContinueAsync",value:function(e){this._hasValidatedExternals||this.ValidateExternalBindings(),this.ContinueInternal(e)}},{key:"ContinueInternal",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;null!=this._profiler&&this._profiler.PreContinue();var t=e>0;if(this._recursiveContinueCount++,!this._asyncContinueActive){if(this._asyncContinueActive=t,!this.canContinue)throw new Error("Can't continue - should check canContinue before calling Continue");this._state.didSafeExit=!1,this._state.ResetOutput(),1==this._recursiveContinueCount&&(this._state.variablesState.batchObservingVariableChanges=!0)}var n=new wt;n.Start();var r=!1;this._sawLookaheadUnsafeFunctionAfterNewline=!1;do{try{r=this.ContinueSingleStep()}catch(e){if(!(e instanceof z))throw e;this.AddError(e.message,void 0,e.useEndLineNumber);break}if(r)break;if(this._asyncContinueActive&&n.ElapsedMilliseconds>e)break}while(this.canContinue);if(n.Stop(),!r&&this.canContinue||(null!==this._stateSnapshotAtLastNewline&&this.RestoreStateSnapshot(),this.canContinue||(this.state.callStack.canPopThread&&this.AddError("Thread available to pop, threads should always be flat by the end of evaluation?"),0!=this.state.generatedChoices.length||this.state.didSafeExit||null!=this._temporaryEvaluationContainer||(this.state.callStack.CanPop(ce.Tunnel)?this.AddError("unexpectedly reached end of content. Do you need a '->->' to return from a tunnel?"):this.state.callStack.CanPop(ce.Function)?this.AddError("unexpectedly reached end of content. Do you need a '~ return'?"):this.state.callStack.canPop?this.AddError("unexpectedly reached end of content for unknown reason. Please debug compiler!"):this.AddError("ran out of content. Do you need a '-> DONE' or '-> END'?"))),this.state.didSafeExit=!1,this._sawLookaheadUnsafeFunctionAfterNewline=!1,1==this._recursiveContinueCount&&(this._state.variablesState.batchObservingVariableChanges=!1),this._asyncContinueActive=!1,null!==this.onDidContinue&&this.onDidContinue()),this._recursiveContinueCount--,null!=this._profiler&&this._profiler.PostContinue(),this.state.hasError||this.state.hasWarning){if(null===this.onError){var i=new M;throw i.Append("Ink had "),this.state.hasError&&(i.Append("".concat(this.state.currentErrors.length)),i.Append(1==this.state.currentErrors.length?" error":"errors"),this.state.hasWarning&&i.Append(" and ")),this.state.hasWarning&&(i.Append("".concat(this.state.currentWarnings.length)),i.Append(1==this.state.currentWarnings.length?" warning":"warnings"),this.state.hasWarning&&i.Append(" and ")),i.Append(". It is strongly suggested that you assign an error handler to story.onError. The first issue was: "),i.Append(this.state.hasError?this.state.currentErrors[0]:this.state.currentWarnings[0]),new z(i.toString())}if(this.state.hasError){var a,o=S(this.state.currentErrors);try{for(o.s();!(a=o.n()).done;){var l=a.value;this.onError(l,bt.Error)}}catch(l){o.e(l)}finally{o.f()}}if(this.state.hasWarning){var u,s=S(this.state.currentWarnings);try{for(s.s();!(u=s.n()).done;){var c=u.value;this.onError(c,bt.Warning)}}catch(l){s.e(l)}finally{s.f()}}this.ResetErrors()}}},{key:"ContinueSingleStep",value:function(){if(null!=this._profiler&&this._profiler.PreStep(),this.Step(),null!=this._profiler&&this._profiler.PostStep(),this.canContinue||this.state.callStack.elementIsEvaluateFromGame||this.TryFollowDefaultInvisibleChoice(),null!=this._profiler&&this._profiler.PreSnapshot(),!this.state.inStringEvaluation){if(null!==this._stateSnapshotAtLastNewline){if(null===this._stateSnapshotAtLastNewline.currentTags)return D("this._stateAtLastNewline.currentTags");if(null===this.state.currentTags)return D("this.state.currentTags");var e=this.CalculateNewlineOutputStateChange(this._stateSnapshotAtLastNewline.currentText,this.state.currentText,this._stateSnapshotAtLastNewline.currentTags.length,this.state.currentTags.length);if(e==o.OutputStateChange.ExtendedBeyondNewline||this._sawLookaheadUnsafeFunctionAfterNewline)return this.RestoreStateSnapshot(),!0;e==o.OutputStateChange.NewlineRemoved&&this.DiscardSnapshot()}this.state.outputStreamEndsInNewline&&(this.canContinue?null==this._stateSnapshotAtLastNewline&&this.StateSnapshot():this.DiscardSnapshot())}return null!=this._profiler&&this._profiler.PostSnapshot(),!1}},{key:"CalculateNewlineOutputStateChange",value:function(e,t,n,r){if(null===e)return D("prevText");if(null===t)return D("currText");var i=t.length>=e.length&&"\n"==t.charAt(e.length-1);if(n==r&&e.length==t.length&&i)return o.OutputStateChange.NoChange;if(!i)return o.OutputStateChange.NewlineRemoved;if(r>n)return o.OutputStateChange.ExtendedBeyondNewline;for(var a=e.length;a<t.length;a++){var l=t.charAt(a);if(" "!=l&&"\t"!=l)return o.OutputStateChange.ExtendedBeyondNewline}return o.OutputStateChange.NoChange}},{key:"ContinueMaximally",value:function(){this.IfAsyncWeCant("ContinueMaximally");for(var e=new M;this.canContinue;)e.Append(this.Continue());return e.toString()}},{key:"ContentAtPath",value:function(e){return this.mainContentContainer.ContentAtPath(e)}},{key:"KnotContainerWithName",value:function(e){var t=this.mainContentContainer.namedContent.get(e);return t instanceof ee?t:null}},{key:"PointerAtPath",value:function(e){if(0==e.length)return de.Null;var t=new de,n=e.length,r=null;return null===e.lastComponent?D("path.lastComponent"):(e.lastComponent.isIndex?(n=e.length-1,r=this.mainContentContainer.ContentAtPath(e,void 0,n),t.container=r.container,t.index=e.lastComponent.index):(r=this.mainContentContainer.ContentAtPath(e),t.container=r.container,t.index=-1),null==r.obj||r.obj==this.mainContentContainer&&n>0?this.Error("Failed to find content at path '"+e+"', and no approximation of it was possible."):r.approximate&&this.Warning("Failed to find content at path '"+e+"', so it was approximated to: '"+r.obj.path+"'."),t)}},{key:"StateSnapshot",value:function(){this._stateSnapshotAtLastNewline=this._state,this._state=this._state.CopyAndStartPatching()}},{key:"RestoreStateSnapshot",value:function(){null===this._stateSnapshotAtLastNewline&&D("_stateSnapshotAtLastNewline"),this._stateSnapshotAtLastNewline.RestoreAfterPatch(),this._state=this._stateSnapshotAtLastNewline,this._stateSnapshotAtLastNewline=null,this._asyncSaving||this._state.ApplyAnyPatch()}},{key:"DiscardSnapshot",value:function(){this._asyncSaving||this._state.ApplyAnyPatch(),this._stateSnapshotAtLastNewline=null}},{key:"CopyStateForBackgroundThreadSave",value:function(){if(this.IfAsyncWeCant("start saving on a background thread"),this._asyncSaving)throw new Error("Story is already in background saving mode, can't call CopyStateForBackgroundThreadSave again!");var e=this._state;return this._state=this._state.CopyAndStartPatching(),this._asyncSaving=!0,e}},{key:"BackgroundSaveComplete",value:function(){null===this._stateSnapshotAtLastNewline&&this._state.ApplyAnyPatch(),this._asyncSaving=!1}},{key:"Step",value:function(){var e=!0,t=this.state.currentPointer.copy();if(!t.isNull){for(var n=E(t.Resolve(),ee);n&&(this.VisitContainer(n,!0),0!=n.content.length);)n=E((t=de.StartOf(n)).Resolve(),ee);this.state.currentPointer=t.copy(),null!=this._profiler&&this._profiler.Step(this.state.callStack);var r=t.Resolve(),i=this.PerformLogicAndFlowControl(r);if(!this.state.currentPointer.isNull){i&&(e=!1);var a=E(r,fe);if(a){var o=this.ProcessChoice(a);o&&this.state.generatedChoices.push(o),r=null,e=!1}if(r instanceof ee&&(e=!1),e){var l=E(r,Y);if(l&&-1==l.contextIndex){var u=this.state.callStack.ContextForVariableNamed(l.variableName);r=new Y(l.variableName,u)}this.state.inExpressionEvaluation?this.state.PushEvaluationStack(r):this.state.PushToOutputStream(r)}this.NextContent();var s=E(r,te);s&&s.commandType==te.CommandType.StartThread&&this.state.callStack.PushThread()}}}},{key:"VisitContainer",value:function(e,t){e.countingAtStartOnly&&!t||(e.visitsShouldBeCounted&&this.state.IncrementVisitCountForContainer(e),e.turnIndexShouldBeCounted&&this.state.RecordTurnIndexVisitToContainer(e))}},{key:"VisitChangedContainersDueToDivert",value:function(){var e=this.state.previousPointer.copy(),t=this.state.currentPointer.copy();if(!t.isNull&&-1!=t.index){if(this._prevContainers.length=0,!e.isNull)for(var n=E(e.Resolve(),ee)||E(e.container,ee);n;)this._prevContainers.push(n),n=E(n.parent,ee);var r=t.Resolve();if(null!=r)for(var i=E(r.parent,ee),a=!0;i&&(this._prevContainers.indexOf(i)<0||i.countingAtStartOnly);){var o=i.content.length>0&&r==i.content[0]&&a;o||(a=!1),this.VisitContainer(i,o),r=i,i=E(i.parent,ee)}}}},{key:"ProcessChoice",value:function(e){var t=!0;if(e.hasCondition){var n=this.state.PopEvaluationStack();this.IsTruthy(n)||(t=!1)}var r="",i="";if(e.hasChoiceOnlyContent&&(i=x(this.state.PopEvaluationStack(),J).value||""),e.hasStartContent&&(r=x(this.state.PopEvaluationStack(),J).value||""),e.onceOnly&&this.state.VisitCountForContainer(e.choiceTarget)>0&&(t=!1),!t)return null;var a=new ft;return a.targetPath=e.pathOnChoice,a.sourcePath=e.path.toString(),a.isInvisibleDefault=e.isInvisibleDefault,a.threadAtGeneration=this.state.callStack.ForkThread(),a.text=(r+i).replace(/^[ \t]+|[ \t]+$/g,""),a}},{key:"IsTruthy",value:function(e){if(e instanceof q){var t=e;if(t instanceof Q){var n=t;return this.Error("Shouldn't use a divert target (to "+n.targetPath+") as a conditional value. Did you intend a function call 'likeThis()' or a read count check 'likeThis'? (no arrows)"),!1}return t.isTruthy}return!1}},{key:"PerformLogicAndFlowControl",value:function(e){if(null==e)return!1;if(e instanceof pe){var t=e;if(t.isConditional){var n=this.state.PopEvaluationStack();if(!this.IsTruthy(n))return!0}if(t.hasVariableTarget){var r=t.variableDivertName,i=this.state.variablesState.GetVariableWithName(r);if(null==i)this.Error("Tried to divert using a target from a variable that could not be found ("+r+")");else if(!(i instanceof Q)){var a=E(i,$),o="Tried to divert to a target from a variable, but the variable ("+r+") didn't contain a divert target, it ";a instanceof $&&0==a.value?o+="was empty/null (the value 0).":o+="contained '"+i+"'.",this.Error(o)}var l=x(i,Q);this.state.divertedPointer=this.PointerAtPath(l.targetPath)}else{if(t.isExternal)return this.CallExternalFunction(t.targetPathString,t.externalArgs),!0;this.state.divertedPointer=t.targetPointer.copy()}return t.pushesToStack&&this.state.callStack.Push(t.stackPushType,void 0,this.state.outputStream.length),this.state.divertedPointer.isNull&&!t.isExternal&&(t&&t.debugMetadata&&null!=t.debugMetadata.sourceName?this.Error("Divert target doesn't exist: "+t.debugMetadata.sourceName):this.Error("Divert resolution failed: "+t)),!0}if(e instanceof te){var u=e;switch(u.commandType){case te.CommandType.EvalStart:this.Assert(!1===this.state.inExpressionEvaluation,"Already in expression evaluation?"),this.state.inExpressionEvaluation=!0;break;case te.CommandType.EvalEnd:this.Assert(!0===this.state.inExpressionEvaluation,"Not in expression evaluation mode"),this.state.inExpressionEvaluation=!1;break;case te.CommandType.EvalOutput:if(this.state.evaluationStack.length>0){var s=this.state.PopEvaluationStack();if(!(s instanceof re)){var c=new J(s.toString());this.state.PushToOutputStream(c)}}break;case te.CommandType.NoOp:break;case te.CommandType.Duplicate:this.state.PushEvaluationStack(this.state.PeekEvaluationStack());break;case te.CommandType.PopEvaluatedValue:this.state.PopEvaluationStack();break;case te.CommandType.PopFunction:case te.CommandType.PopTunnel:var f=u.commandType==te.CommandType.PopFunction?ce.Function:ce.Tunnel,h=null;if(f==ce.Tunnel){var d=this.state.PopEvaluationStack();null===(h=E(d,Q))&&this.Assert(d instanceof re,"Expected void if ->-> doesn't override target")}if(this.state.TryExitFunctionEvaluationFromGame())break;if(this.state.callStack.currentElement.type==f&&this.state.callStack.canPop)this.state.PopCallStack(),h&&(this.state.divertedPointer=this.PointerAtPath(h.targetPath));else{var p=new Map;p.set(ce.Function,"function return statement (~ return)"),p.set(ce.Tunnel,"tunnel onwards statement (->->)");var v=p.get(this.state.callStack.currentElement.type);this.state.callStack.canPop||(v="end of flow (-> END or choice)");var m="Found "+p.get(f)+", when expected "+v;this.Error(m)}break;case te.CommandType.BeginString:this.state.PushToOutputStream(u),this.Assert(!0===this.state.inExpressionEvaluation,"Expected to be in an expression when evaluating a string"),this.state.inExpressionEvaluation=!1;break;case te.CommandType.EndString:for(var y=[],g=0,b=this.state.outputStream.length-1;b>=0;--b){var C=this.state.outputStream[b];g++;var w=E(C,te);if(w&&w.commandType==te.CommandType.BeginString)break;C instanceof J&&y.push(C)}this.state.PopFromOutputStream(g),y=y.reverse();var k,_=new M,P=S(y);try{for(P.s();!(k=P.n()).done;){var O=k.value;_.Append(O.toString())}}catch(e){P.e(e)}finally{P.f()}this.state.inExpressionEvaluation=!0,this.state.PushEvaluationStack(new J(_.toString()));break;case te.CommandType.ChoiceCount:var T=this.state.generatedChoices.length;this.state.PushEvaluationStack(new $(T));break;case te.CommandType.Turns:this.state.PushEvaluationStack(new $(this.state.currentTurnIndex+1));break;case te.CommandType.TurnsSince:case te.CommandType.ReadCount:var A=this.state.PopEvaluationStack();if(!(A instanceof Q)){var N="";A instanceof $&&(N=". Did you accidentally pass a read count ('knot_name') instead of a target ('-> knot_name')?"),this.Error("TURNS_SINCE / READ_COUNT expected a divert target (knot, stitch, label name), but saw "+A+N);break}var I,R=x(A,Q),F=E(this.ContentAtPath(R.targetPath).correctObj,ee);null!=F?I=u.commandType==te.CommandType.TurnsSince?this.state.TurnsSinceForContainer(F):this.state.VisitCountForContainer(F):(I=u.commandType==te.CommandType.TurnsSince?-1:0,this.Warning("Failed to find container for "+u.toString()+" lookup at "+R.targetPath.toString())),this.state.PushEvaluationStack(new $(I));break;case te.CommandType.Random:var W=E(this.state.PopEvaluationStack(),$),L=E(this.state.PopEvaluationStack(),$);if(null==L||L instanceof $==0)return this.Error("Invalid value for minimum parameter of RANDOM(min, max)");if(null==W||L instanceof $==0)return this.Error("Invalid value for maximum parameter of RANDOM(min, max)");if(null===W.value)return D("maxInt.value");if(null===L.value)return D("minInt.value");var j=W.value-L.value+1;(!isFinite(j)||j>Number.MAX_SAFE_INTEGER)&&(j=Number.MAX_SAFE_INTEGER,this.Error("RANDOM was called with a range that exceeds the size that ink numbers can use.")),j<=0&&this.Error("RANDOM was called with minimum as "+L.value+" and maximum as "+W.value+". The maximum must be larger");var G=this.state.storySeed+this.state.previousRandom,U=new mt(G).next(),H=U%j+L.value;this.state.PushEvaluationStack(new $(H)),this.state.previousRandom=U;break;case te.CommandType.SeedRandom:var K=E(this.state.PopEvaluationStack(),$);if(null==K||K instanceof $==0)return this.Error("Invalid value passed to SEED_RANDOM");if(null===K.value)return D("minInt.value");this.state.storySeed=K.value,this.state.previousRandom=0,this.state.PushEvaluationStack(new re);break;case te.CommandType.VisitIndex:var Y=this.state.VisitCountForContainer(this.state.currentPointer.container)-1;this.state.PushEvaluationStack(new $(Y));break;case te.CommandType.SequenceShuffleIndex:var Z=this.NextSequenceShuffleIndex();this.state.PushEvaluationStack(new $(Z));break;case te.CommandType.StartThread:break;case te.CommandType.Done:this.state.callStack.canPopThread?this.state.callStack.PopThread():(this.state.didSafeExit=!0,this.state.currentPointer=de.Null);break;case te.CommandType.End:this.state.ForceEnd();break;case te.CommandType.ListFromInt:var ne=E(this.state.PopEvaluationStack(),$),ae=x(this.state.PopEvaluationStack(),J);if(null===ne)throw new z("Passed non-integer when creating a list element from a numerical value.");var oe=null;if(null===this.listDefinitions)return D("this.listDefinitions");var le=this.listDefinitions.TryListGetDefinition(ae.value,null);if(!le.exists)throw new z("Failed to find LIST called "+ae.value);if(null===ne.value)return D("minInt.value");var ue=le.result.TryGetItemWithValue(ne.value,V.Null);ue.exists&&(oe=new X(ue.result,ne.value)),null==oe&&(oe=new X),this.state.PushEvaluationStack(oe);break;case te.CommandType.ListRange:var se=E(this.state.PopEvaluationStack(),q),fe=E(this.state.PopEvaluationStack(),q),he=E(this.state.PopEvaluationStack(),X);if(null===he||null===fe||null===se)throw new z("Expected list, minimum and maximum for LIST_RANGE");if(null===he.value)return D("targetList.value");var me=he.value.ListWithSubRange(fe.valueObject,se.valueObject);this.state.PushEvaluationStack(new X(me));break;case te.CommandType.ListRandom:var ye=this.state.PopEvaluationStack();if(null===ye)throw new z("Expected list for LIST_RANDOM");var ge=ye.value,be=null;if(null===ge)throw D("list");if(0==ge.Count)be=new B;else{for(var Se=this.state.storySeed+this.state.previousRandom,Ce=new mt(Se).next(),we=Ce%ge.Count,ke=ge.entries(),_e=0;_e<=we-1;_e++)ke.next();var Ee=ke.next().value,xe={Key:V.fromSerializedKey(Ee[0]),Value:Ee[1]};if(null===xe.Key.originName)return D("randomItem.Key.originName");(be=new B(xe.Key.originName,this)).Add(xe.Key,xe.Value),this.state.previousRandom=Ce}this.state.PushEvaluationStack(new X(be));break;default:this.Error("unhandled ControlCommand: "+u)}return!0}if(e instanceof ve){var Pe=e,Oe=this.state.PopEvaluationStack();return this.state.variablesState.Assign(Pe,Oe),!0}if(e instanceof Re){var Te=e,Ae=null;if(null!=Te.pathForCount){var Ne=Te.containerForCount,Ie=this.state.VisitCountForContainer(Ne);Ae=new $(Ie)}else null==(Ae=this.state.variablesState.GetVariableWithName(Te.name))&&(this.Warning("Variable not found: '"+Te.name+"'. Using default value of 0 (false). This can happen with temporary variables if the declaration hasn't yet been hit. Globals are always given a default value on load if a value doesn't exist in the save state."),Ae=new $(0));return this.state.PushEvaluationStack(Ae),!0}if(e instanceof ie){var Fe=e,We=this.state.PopEvaluationStack(Fe.numberOfParameters),Le=Fe.Call(We);return this.state.PushEvaluationStack(Le),!0}return!1}},{key:"ChoosePathString",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(this.IfAsyncWeCant("call ChoosePathString right now"),null!==this.onChoosePathString&&this.onChoosePathString(e,n),t)this.ResetCallstack();else if(this.state.callStack.currentElement.type==ce.Function){var r="",i=this.state.callStack.currentElement.currentPointer.container;throw null!=i&&(r="("+i.path.toString()+") "),new Error("Story was running a function "+r+"when you called ChoosePathString("+e+") - this is almost certainly not not what you want! Full stack trace: \n"+this.state.callStack.callStackTrace)}this.state.PassArgumentsToEvaluationStack(n),this.ChoosePath(new W(e))}},{key:"IfAsyncWeCant",value:function(e){if(this._asyncContinueActive)throw new Error("Can't "+e+". Story is in the middle of a ContinueAsync(). Make more ContinueAsync() calls or a single Continue() call beforehand.")}},{key:"ChoosePath",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.state.SetChosenPath(e,t),this.VisitChangedContainersDueToDivert()}},{key:"ChooseChoiceIndex",value:function(e){var t=this.currentChoices;this.Assert(e>=0&&e<t.length,"choice out of range");var n=t[e];return null!==this.onMakeChoice&&this.onMakeChoice(n),null===n.threadAtGeneration?D("choiceToChoose.threadAtGeneration"):null===n.targetPath?D("choiceToChoose.targetPath"):(this.state.callStack.currentThread=n.threadAtGeneration,void this.ChoosePath(n.targetPath))}},{key:"HasFunction",value:function(e){try{return null!=this.KnotContainerWithName(e)}catch(e){return!1}}},{key:"EvaluateFunction",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(null!==this.onEvaluateFunction&&this.onEvaluateFunction(e,t),this.IfAsyncWeCant("evaluate a function"),null==e)throw new Error("Function is null");if(""==e||""==e.trim())throw new Error("Function is empty or white space.");var r=this.KnotContainerWithName(e);if(null==r)throw new Error("Function doesn't exist: '"+e+"'");var i=[];i.push.apply(i,y(this.state.outputStream)),this._state.ResetOutput(),this.state.StartFunctionEvaluationFromGame(r,t);for(var a=new M;this.canContinue;)a.Append(this.Continue());var o=a.toString();this._state.ResetOutput(i);var l=this.state.CompleteFunctionEvaluationFromGame();return null!=this.onCompleteEvaluateFunction&&this.onCompleteEvaluateFunction(e,t,o,l),n?{returned:l,output:o}:l}},{key:"EvaluateExpression",value:function(e){var t=this.state.callStack.elements.length;this.state.callStack.Push(ce.Tunnel),this._temporaryEvaluationContainer=e,this.state.GoToStart();var n=this.state.evaluationStack.length;return this.Continue(),this._temporaryEvaluationContainer=null,this.state.callStack.elements.length>t&&this.state.PopCallStack(),this.state.evaluationStack.length>n?this.state.PopEvaluationStack():null}},{key:"CallExternalFunction",value:function(e,n){if(null===e)return D("funcName");var r=this._externals.get(e),i=null,a=void 0!==r;if(!a||r.lookAheadSafe||null===this._stateSnapshotAtLastNewline){if(!a){if(this.allowExternalFunctionFallbacks)return i=this.KnotContainerWithName(e),this.Assert(null!==i,"Trying to call EXTERNAL function '"+e+"' which has not been bound, and fallback ink function could not be found."),this.state.callStack.Push(ce.Function,void 0,this.state.outputStream.length),void(this.state.divertedPointer=de.StartOf(i));this.Assert(!1,"Trying to call EXTERNAL function '"+e+"' which has not been bound (and ink fallbacks disabled).")}for(var o=[],l=0;l<n;++l){var u=x(this.state.PopEvaluationStack(),q).valueObject;o.push(u)}o.reverse();var s=r.function(o),c=null;null!=s?(c=q.Create(s),this.Assert(null!==c,"Could not create ink value from returned object of type "+t(s))):c=new re,this.state.PushEvaluationStack(c)}else this._sawLookaheadUnsafeFunctionAfterNewline=!0}},{key:"BindExternalFunctionGeneral",value:function(e,t,n){this.IfAsyncWeCant("bind an external function"),this.Assert(!this._externals.has(e),"Function '"+e+"' has already been bound."),this._externals.set(e,{function:t,lookAheadSafe:n})}},{key:"TryCoerce",value:function(e){return e}},{key:"BindExternalFunction",value:function(e,t,n){var r=this;this.Assert(null!=t,"Can't bind a null function"),this.BindExternalFunctionGeneral(e,(function(e){r.Assert(e.length>=t.length,"External function expected "+t.length+" arguments");for(var n=[],i=0,a=e.length;i<a;i++)n[i]=r.TryCoerce(e[i]);return t.apply(null,n)}),n)}},{key:"UnbindExternalFunction",value:function(e){this.IfAsyncWeCant("unbind an external a function"),this.Assert(this._externals.has(e),"Function '"+e+"' has not been bound."),this._externals.delete(e)}},{key:"ValidateExternalBindings",value:function(){var e=null,t=null,n=arguments[1]||new Set;if(arguments[0]instanceof ee&&(e=arguments[0]),arguments[0]instanceof j&&(t=arguments[0]),null===e&&null===t)if(this.ValidateExternalBindings(this._mainContentContainer,n),this._hasValidatedExternals=!0,0==n.size)this._hasValidatedExternals=!0;else{var r="Error: Missing function binding for external";r+=n.size>1?"s":"",r+=": '",r+=Array.from(n).join("', '"),r+="' ",r+=this.allowExternalFunctionFallbacks?", and no fallback ink function found.":" (ink fallbacks disabled)",this.Error(r)}else if(null!=e){var i,a=S(e.content);try{for(a.s();!(i=a.n()).done;){var o=i.value;null!=o&&o.hasValidName||this.ValidateExternalBindings(o,n)}}catch(e){a.e(e)}finally{a.f()}var l,u=S(e.namedContent);try{for(u.s();!(l=u.n()).done;){var s=m(l.value,2)[1];this.ValidateExternalBindings(E(s,j),n)}}catch(e){u.e(e)}finally{u.f()}}else if(null!=t){var c=E(t,pe);if(c&&c.isExternal){var f=c.targetPathString;if(null===f)return D("name");this._externals.has(f)||this.allowExternalFunctionFallbacks&&this.mainContentContainer.namedContent.has(f)||n.add(f)}}}},{key:"ObserveVariable",value:function(e,t){if(this.IfAsyncWeCant("observe a new variable"),null===this._variableObservers&&(this._variableObservers=new Map),!this.state.variablesState.GlobalVariableExistsWithName(e))throw new Error("Cannot observe variable '"+e+"' because it wasn't declared in the ink story.");this._variableObservers.has(e)?this._variableObservers.get(e).push(t):this._variableObservers.set(e,[t])}},{key:"ObserveVariables",value:function(e,t){for(var n=0,r=e.length;n<r;n++)this.ObserveVariable(e[n],t[n])}},{key:"RemoveVariableObserver",value:function(e,t){if(this.IfAsyncWeCant("remove a variable observer"),null!==this._variableObservers)if(null!=t){if(this._variableObservers.has(t))if(null!=e){var n=this._variableObservers.get(t);null!=n&&(n.splice(n.indexOf(e),1),0===n.length&&this._variableObservers.delete(t))}else this._variableObservers.delete(t)}else if(null!=e){var r,i=S(this._variableObservers.keys());try{for(i.s();!(r=i.n()).done;){var a=r.value,o=this._variableObservers.get(a);null!=o&&(o.splice(o.indexOf(e),1),0===o.length&&this._variableObservers.delete(a))}}catch(e){i.e(e)}finally{i.f()}}}},{key:"VariableStateDidChangeEvent",value:function(e,t){if(null!==this._variableObservers){var n=this._variableObservers.get(e);if(void 0!==n){if(!(t instanceof q))throw new Error("Tried to get the value of a variable that isn't a standard type");var r,i=x(t,q),a=S(n);try{for(a.s();!(r=a.n()).done;)(0,r.value)(e,i.valueObject)}catch(e){a.e(e)}finally{a.f()}}}}},{key:"globalTags",get:function(){return this.TagsAtStartOfFlowContainerWithPathString("")}},{key:"TagsForContentAtPath",value:function(e){return this.TagsAtStartOfFlowContainerWithPathString(e)}},{key:"TagsAtStartOfFlowContainerWithPathString",value:function(e){var t=new W(e),n=this.ContentAtPath(t).container;if(null===n)return D("flowContainer");for(;;){var r=n.content[0];if(!(r instanceof ee))break;n=r}var i,a=null,o=S(n.content);try{for(o.s();!(i=o.n()).done;){var l=E(i.value,ct);if(!l)break;null==a&&(a=[]),a.push(l.text)}}catch(e){o.e(e)}finally{o.f()}return a}},{key:"BuildStringOfHierarchy",value:function(){var e=new M;return this.mainContentContainer.BuildStringOfHierarchy(e,0,this.state.currentPointer.Resolve()),e.toString()}},{key:"BuildStringOfContainer",value:function(e){var t=new M;return e.BuildStringOfHierarchy(t,0,this.state.currentPointer.Resolve()),t.toString()}},{key:"NextContent",value:function(){if(this.state.previousPointer=this.state.currentPointer.copy(),(this.state.divertedPointer.isNull||(this.state.currentPointer=this.state.divertedPointer.copy(),this.state.divertedPointer=de.Null,this.VisitChangedContainersDueToDivert(),this.state.currentPointer.isNull))&&!this.IncrementContentPointer()){var e=!1;this.state.callStack.CanPop(ce.Function)?(this.state.PopCallStack(ce.Function),this.state.inExpressionEvaluation&&this.state.PushEvaluationStack(new re),e=!0):this.state.callStack.canPopThread?(this.state.callStack.PopThread(),e=!0):this.state.TryExitFunctionEvaluationFromGame(),e&&!this.state.currentPointer.isNull&&this.NextContent()}}},{key:"IncrementContentPointer",value:function(){var e=!0,t=this.state.callStack.currentElement.currentPointer.copy();if(t.index++,null===t.container)return D("pointer.container");for(;t.index>=t.container.content.length;){e=!1;var n=E(t.container.parent,ee);if(n instanceof ee==0)break;var r=n.content.indexOf(t.container);if(-1==r)break;if((t=new de(n,r)).index++,e=!0,null===t.container)return D("pointer.container")}return e||(t=de.Null),this.state.callStack.currentElement.currentPointer=t.copy(),e}},{key:"TryFollowDefaultInvisibleChoice",value:function(){var e=this._state.currentChoices,t=e.filter((function(e){return e.isInvisibleDefault}));if(0==t.length||e.length>t.length)return!1;var n=t[0];return null===n.targetPath?D("choice.targetPath"):null===n.threadAtGeneration?D("choice.threadAtGeneration"):(this.state.callStack.currentThread=n.threadAtGeneration,null!==this._stateSnapshotAtLastNewline&&(this.state.callStack.currentThread=this.state.callStack.ForkThread()),this.ChoosePath(n.targetPath,!1),!0)}},{key:"NextSequenceShuffleIndex",value:function(){var e=E(this.state.PopEvaluationStack(),$);if(!(e instanceof $))return this.Error("expected number of elements in sequence for shuffle index"),0;var t=this.state.currentPointer.container;if(null===t)return D("seqContainer");if(null===e.value)return D("numElementsIntVal.value");var n=e.value,r=x(this.state.PopEvaluationStack(),$).value;if(null===r)return D("seqCount");for(var i=r/n,a=r%n,o=t.path.toString(),l=0,u=0,s=o.length;u<s;u++)l+=o.charCodeAt(u)||0;for(var c=l+i+this.state.storySeed,f=new mt(Math.floor(c)),h=[],d=0;d<n;++d)h.push(d);for(var p=0;p<=a;++p){var v=f.next()%h.length,m=h[v];if(h.splice(v,1),p==a)return m}throw new Error("Should never reach here")}},{key:"Error",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=new z(e);throw n.useEndLineNumber=t,n}},{key:"Warning",value:function(e){this.AddError(e,!0)}},{key:"AddError",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=this.currentDebugMetadata,i=t?"WARNING":"ERROR";if(null!=r){var a=n?r.endLineNumber:r.startLineNumber;e="RUNTIME "+i+": '"+r.fileName+"' line "+a+": "+e}else e=this.state.currentPointer.isNull?"RUNTIME "+i+": "+e:"RUNTIME "+i+": ("+this.state.currentPointer+"): "+e;this.state.AddError(e,t),t||this.state.ForceEnd()}},{key:"Assert",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(0==e)throw null==t&&(t="Story assert"),new Error(t+" "+this.currentDebugMetadata)}},{key:"currentDebugMetadata",get:function(){var e,t=this.state.currentPointer;if(!t.isNull&&null!==t.Resolve()&&null!==(e=t.Resolve().debugMetadata))return e;for(var n=this.state.callStack.elements.length-1;n>=0;--n)if(!(t=this.state.callStack.elements[n].currentPointer).isNull&&null!==t.Resolve()&&null!==(e=t.Resolve().debugMetadata))return e;for(var r=this.state.outputStream.length-1;r>=0;--r)if(null!==(e=this.state.outputStream[r].debugMetadata))return e;return null}},{key:"mainContentContainer",get:function(){return this._temporaryEvaluationContainer?this._temporaryEvaluationContainer:this._mainContentContainer}}]),o}(j),e.Story.inkVersionCurrent=20,function(e){var t;(t=e.OutputStateChange||(e.OutputStateChange={}))[t.NoChange=0]="NoChange",t[t.ExtendedBeyondNewline=1]="ExtendedBeyondNewline",t[t.NewlineRemoved=2]="NewlineRemoved"}(e.Story||(e.Story={}));var kt=function(t){a(l,t);var r=d(l);function l(t){var i,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return n(this,l),(i=r.call(this,null,t,null,!1,a))._errorHandler=null,i._hadError=!1,i._hadWarning=!1,i._dontFlattenContainers=new Set,i._listDefs=new Map,i.constants=new Map,i.externals=new Map,i.countAllVisits=!1,i.ExportRuntime=function(){var t,n,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;i._errorHandler=r,i.constants=new Map;var a,o=S(i.FindAll(Ee)());try{for(o.s();!(a=o.n()).done;){var l=a.value,u=i.constants.get(l.constantName);if(u&&!u.Equals(l.expression)){var s="CONST '".concat(l.constantName,"' has been redefined with a different value. Multiple definitions of the same CONST are valid so long as they contain the same value. Initial definition was on ").concat(u.debugMetadata,".");i.Error(s,l,!1)}i.constants.set(l.constantName,l.expression)}}catch(e){o.e(e)}finally{o.f()}i._listDefs=new Map;var c,h=S(i.FindAll(He)());try{for(h.s();!(c=h.n()).done;){var d=c.value;(null===(t=d.identifier)||void 0===t?void 0:t.name)&&i._listDefs.set(null===(n=d.identifier)||void 0===n?void 0:n.name,d)}}catch(e){h.e(e)}finally{h.f()}i.externals=new Map,i.ResolveWeavePointNaming();var p=i.runtimeObject,v=new ee;v.AddContent(te.EvalStart());var y,g=[],b=S(i.variableDeclarations);try{for(b.s();!(y=b.n()).done;){var C=m(y.value,2),w=C[0],k=C[1];if(k.isGlobalDeclaration){if(k.listDefinition)i._listDefs.set(w,k.listDefinition),v.AddContent(k.listDefinition.runtimeObject),g.push(k.listDefinition.runtimeListDefinition);else{if(!k.expression)throw new Error;k.expression.GenerateIntoContainer(v)}var _=new ve(w,!0);_.isGlobal=!0,v.AddContent(_)}}}catch(e){b.e(e)}finally{b.f()}v.AddContent(te.EvalEnd()),v.AddContent(te.End()),i.variableDeclarations.size>0&&(v.name="global decl",p.AddToNamedContentOnly(v)),p.AddContent(te.Done());var E=new e.Story(p,g);return i.runtimeObject=E,i.hadError?null:(i.FlattenContainersIn(p),i.ResolveReferences(f(i)),i.hadError?null:(E.ResetState(),E))},i.ResolveList=function(e){return i._listDefs.get(e)||null},i.ResolveListItem=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=null;if(e)return(r=i._listDefs.get(e))?r.ItemNamed(t):null;var a,o=null,l=null,u=S(i._listDefs.entries());try{for(u.s();!(a=u.n()).done;){var s=m(a.value,2)[1],c=s.ItemNamed(t);c&&(o?i.Error("Ambiguous item name '".concat(t,"' found in multiple sets, including ").concat(l.identifier," and ").concat(s.identifier),n,!1):(o=c,l=s))}}catch(e){u.e(e)}finally{u.f()}return o},i.FlattenContainersIn=function(e){var t=new Set;if(e.content){var n,r=S(e.content);try{for(r.s();!(n=r.n()).done;){var a=E(n.value,ee);a&&t.add(a)}}catch(e){r.e(e)}finally{r.f()}}if(e.namedContent){var o,l=S(e.namedContent);try{for(l.s();!(o=l.n()).done;){var u=E(m(o.value,2)[1],ee);u&&t.add(u)}}catch(e){l.e(e)}finally{l.f()}}var s,c=S(t);try{for(c.s();!(s=c.n()).done;){var f=s.value;i.TryFlattenContainer(f),i.FlattenContainersIn(f)}}catch(e){c.e(e)}finally{c.f()}},i.TryFlattenContainer=function(e){if(!(e.namedContent&&e.namedContent.size>0||e.hasValidName||i._dontFlattenContainers.has(e))){var t=E(e.parent,ee);if(t){var n=t.content.indexOf(e);t.content.splice(n,1);var r=e.ownDebugMetadata;if(e.content){var a,o=S(e.content);try{for(o.s();!(a=o.n()).done;){var l=a.value;l.parent=null,null!==r&&null===l.ownDebugMetadata&&(l.debugMetadata=r),t.InsertContent(l,n),n+=1}}catch(e){o.e(e)}finally{o.f()}}}}},i.Error=function(e,t,n){var r=n?C.Warning:C.Error,a="";if(t instanceof F?(a+="TODO: ",r=C.Author):a+=n?"WARNING: ":"ERROR: ",t&&null!==t.debugMetadata&&t.debugMetadata.startLineNumber>=1&&(null!=t.debugMetadata.fileName&&(a+="'".concat(t.debugMetadata.fileName,"' ")),a+="line ".concat(t.debugMetadata.startLineNumber,": ")),e=a+=e,null===i._errorHandler)throw new Error(e);i._errorHandler(e,r),i._hadError=r===C.Error,i._hadWarning=r===C.Warning},i.ResetError=function(){i._hadError=!1,i._hadWarning=!1},i.IsExternal=function(e){return i.externals.has(e)},i.AddExternal=function(e){i.externals.has(e.name)?i.Error("Duplicate EXTERNAL definition of '".concat(e.name,"'"),e,!1):e.name&&i.externals.set(e.name,e)},i.DontFlattenContainer=function(e){i._dontFlattenContainers.add(e)},i.NameConflictError=function(e,t,n,r){e.Error("".concat(r," '").concat(t,"': name has already been used for a ").concat(n.typeName.toLowerCase()," on ").concat(n.debugMetadata))},i.CheckForNamingCollisions=function(e,t,n){var r,a=(arguments.length>3&&void 0!==arguments[3]?arguments[3]:"")||e.typeName;if(l.IsReservedKeyword(null==t?void 0:t.name))e.Error("'".concat(t,"' cannot be used for the name of a ").concat(a.toLowerCase()," because it's a reserved keyword"));else if(We.IsBuiltIn((null==t?void 0:t.name)||""))e.Error("'".concat(t,"' cannot be used for the name of a ").concat(a.toLowerCase()," because it's a built in function"));else{var o=E(i.ContentWithNameAtLevel((null==t?void 0:t.name)||"",Ce.Knot),Ne);if(!o||o===e&&n!==he.Arg){if(!(n<he.List)){var u,s=S(i._listDefs);try{for(s.s();!(u=s.n()).done;){var c=m(u.value,2),f=c[0],h=c[1];if((null==t?void 0:t.name)===f&&e!==h&&h.variableAssignment!==e&&i.NameConflictError(e,null==t?void 0:t.name,h,a),!(e instanceof ut)){var d,p=S(h.itemDefinitions);try{for(p.s();!(d=p.n()).done;){var v=d.value;(null==t?void 0:t.name)===v.name&&i.NameConflictError(e,(null==t?void 0:t.name)||"",v,a)}}catch(e){p.e(e)}finally{p.f()}}}}catch(e){s.e(e)}finally{s.f()}if(!(n<=he.Var)){var y=(null==t?void 0:t.name)&&i.variableDeclarations.get(null==t?void 0:t.name)||null;if(y&&y!==e&&y.isGlobalDeclaration&&null==y.listDefinition&&i.NameConflictError(e,(null==t?void 0:t.name)||"",y,a),!(n<he.SubFlowAndWeave)){var g=new Pe(t).ResolveFromContext(e);if(g&&g!==e)i.NameConflictError(e,(null==t?void 0:t.name)||"",g,a);else if(!(n<he.Arg)&&n!==he.Arg){var b=E(e,Ne);if(b||(b=Te(e)),b&&b.hasParameters&&b.args){var C,w=S(b.args);try{for(w.s();!(C=w.n()).done;)if((null===(r=C.value.identifier)||void 0===r?void 0:r.name)===(null==t?void 0:t.name))return void e.Error("".concat(a," '").concat(t,"': name has already been used for a argument to ").concat(b.identifier," on ").concat(b.debugMetadata))}catch(e){w.e(e)}finally{w.f()}}}}}}}else i.NameConflictError(e,(null==t?void 0:t.name)||"",o,a)}},i}return i(l,[{key:"flowLevel",get:function(){return Ce.Story}},{key:"hadError",get:function(){return this._hadError}},{key:"hadWarning",get:function(){return this._hadWarning}},{key:"typeName",get:function(){return"Story"}},{key:"PreProcessTopLevelObjects",value:function(e){v(o(l.prototype),"PreProcessTopLevelObjects",this).call(this,e);var t,n=[],r=S(e);try{for(r.s();!(t=r.n()).done;){var i=t.value;if(i instanceof it){var a=i,u=e.indexOf(i);if(e.splice(u,1),a.includedStory){var s=[],c=a.includedStory;if(null!=c.content){var f,h=S(c.content);try{for(h.s();!(f=h.n()).done;){var d=f.value;d instanceof Ne?n.push(d):s.push(d)}}catch(e){h.e(e)}finally{h.f()}s.push(new _e("\n")),e.splice.apply(e,[u,0].concat(s))}}}}}catch(e){r.e(e)}finally{r.f()}e.splice.apply(e,[0,0].concat(n))}}]),l}(Ne);kt.IsReservedKeyword=function(e){switch(e){case"true":case"false":case"not":case"return":case"else":case"VAR":case"CONST":case"temp":case"LIST":case"function":return!0}return!1};var _t=function(e){a(r,e);var t=d(r);function r(e){var i;return n(this,r),(i=t.call(this)).GenerateIntoContainer=function(e){e.AddContent(te.BeginString());var t,n=S(i.content);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.AddContent(r.runtimeObject)}}catch(e){n.e(e)}finally{n.f()}e.AddContent(te.EndString())},i.toString=function(){var e,t="",n=S(i.content);try{for(n.s();!(e=n.n()).done;)t+=e.value}catch(e){n.e(e)}finally{n.f()}return t},i.AddContent(e),i}return i(r,[{key:"isSingleString",get:function(){return 1===this.content.length&&this.content[0]instanceof _e}},{key:"typeName",get:function(){return"String"}},{key:"Equals",value:function(e){var t=E(e,r);return null!==t&&!(!this.isSingleString||!t.isSingleString)&&this.toString()===t.toString()}}]),r}(ne),Et=function(e){a(r,e);var t=d(r);function r(e){return n(this,r),t.call(this,e)}return i(r,[{key:"typeName",get:function(){return"Tag"}}]),r}(et),xt=i((function e(t){n(this,e),this.rootPath=t,this.ResolveInkFilename=function(){throw Error("Can't resolve filename because no FileHandler was provided when instantiating the parser / compiler.")},this.LoadInkFileContents=function(){throw Error("Can't load ink content because no FileHandler was provided when instantiating the parser / compiler.")}})),Pt=function(e){a(o,e);var r=d(o);function o(e){var i,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;if(n(this,o),(i=r.call(this,e)).ParseStory=function(){var e=i.StatementsAtLevel(Qe.Top);return new kt(e,i._rootParser!==f(i))},i.SeparatedList=function(e,t){var n=i.Parse(e);if(null===n)return null;var r=[];for(r.push(n);;){var a=i.BeginRule();if(null===t()){i.FailRule(a);break}var o=i.Parse(e);if(null===o){i.FailRule(a);break}i.SucceedRule(a),r.push(o)}return r},i.CreateDebugMetadata=function(e,t){var n=new Ye;return n.startLineNumber=((null==e?void 0:e.lineIndex)||0)+1,n.endLineNumber=t.lineIndex+1,n.startCharacterNumber=((null==e?void 0:e.characterInLineIndex)||0)+1,n.endCharacterNumber=t.characterInLineIndex+1,n.fileName=i._filename,n},i.RuleDidSucceed=function(e,t,n){var r=E(e,R);r&&(r.debugMetadata=i.CreateDebugMetadata(t,n));var a=Array.isArray(e)?e:null;if(null!==a){var o,l=S(a);try{for(l.s();!(o=l.n()).done;){var u=o.value;E(u,R)&&(u.hasOwnDebugMetadata||(u.debugMetadata=i.CreateDebugMetadata(t,n)))}}catch(e){l.e(e)}finally{l.f()}}var s=E(e,Ae);null!=s&&(s.debugMetadata=i.CreateDebugMetadata(t,n))},i.OnStringParserError=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=r?"WARNING:":"ERROR:";if(null!==i._filename&&(a+=" '".concat(i._filename,"'")),a+=" line ".concat(n+1,": ").concat(e),null===i._externalErrorHandler)throw new Error(a);i._externalErrorHandler(a,r?C.Warning:C.Error)},i.AuthorWarning=function(){i.Whitespace();var e=i.Parse(i.IdentifierWithMetadata);if(null===e||"TODO"!==e.name)return null;i.Whitespace(),i.ParseString(":"),i.Whitespace();var t=i.ParseUntilCharactersFromString("\n\r");return t?new F(t):null},i.ExtendIdentifierCharacterRanges=function(e){var t,n=S(o.ListAllCharacterRanges());try{for(n.s();!(t=n.n()).done;){var r=t.value;e.AddCharacters(r.ToCharacterSet())}}catch(e){n.e(e)}finally{n.f()}},i._parsingChoice=!1,i.Choice=function(){var e=!0,t=i.Interleave(i.OptionalExclude(i.Whitespace),i.String("*"));if(!t){if(null===(t=i.Interleave(i.OptionalExclude(i.Whitespace),i.String("+"))))return null;e=!1}var n=i.Parse(i.BracketedName);i.Whitespace();var r=i.Parse(i.ChoiceCondition);if(i.Whitespace(),i._parsingChoice)throw new Error("Already parsing a choice - shouldn't have nested choices");i._parsingChoice=!0;var a=null,o=i.Parse(i.MixedTextAndLogic);o&&(a=new Ie(o));var l=null,u=null,s=null!==i.ParseString("[");if(s){var c=i.Parse(i.MixedTextAndLogic);null!==c&&(l=new Ie(c)),i.Expect(i.String("]"),"closing ']' for weave-style option");var f=i.Parse(i.MixedTextAndLogic);null!==f&&(u=new Ie(f))}i.Whitespace();var h=i.Parse(i.MultiDivert);i._parsingChoice=!1,i.Whitespace();var d=!a&&!u&&!l;d&&null===h&&i.Warning("Choice is completely empty. Interpretting as a default fallback choice. Add a divert arrow to remove this warning: * ->"),a||!s||l||i.Warning("Blank choice - if you intended a default fallback choice, use the `* ->` syntax"),u||(u=new Ie);var p=i.Parse(i.Tags);if(null!==p&&u.AddContent(p),null!==h){var v,m=S(h);try{for(m.s();!(v=m.n()).done;){var y=v.value,g=E(y,Me);g&&g.isEmpty||u.AddContent(y)}}catch(e){m.e(e)}finally{m.f()}}u.AddContent(new _e("\n"));var b=new me(a,l,u);return n&&(b.identifier=n),b.indentationDepth=t.length,b.hasWeaveStyleInlineBrackets=s,b.condition=r,b.onceOnly=e,b.isInvisibleDefault=d,b},i.ChoiceCondition=function(){var e=i.Interleave(i.ChoiceSingleCondition,i.ChoiceConditionsSpace);return null===e?null:1===e.length?e[0]:new De(e)},i.ChoiceConditionsSpace=function(){return i.Newline(),i.Whitespace(),be},i.ChoiceSingleCondition=function(){if(null===i.ParseString("{"))return null;var e=i.Expect(i.Expression,"choice condition inside { }");return i.DisallowIncrement(e),i.Expect(i.String("}"),"closing '}' for choice condition"),e},i.Gather=function(){var e=i.Parse(i.GatherDashes);if(null===e)return null;var t=Number(e),n=i.Parse(i.BracketedName),r=new xe(n,t);return i.Newline(),r},i.GatherDashes=function(){i.Whitespace();for(var e=0;null!==i.ParseDashNotArrow();)e+=1,i.Whitespace();return 0===e?null:e},i.ParseDashNotArrow=function(){var e=i.BeginRule();return null===i.ParseString("->")&&"-"===i.ParseSingleCharacter()?i.SucceedRule(e):i.FailRule(e)},i.BracketedName=function(){if(null===i.ParseString("("))return null;i.Whitespace();var e=i.Parse(i.IdentifierWithMetadata);return null===e?null:(i.Whitespace(),i.Expect(i.String(")"),"closing ')' for bracketed name"),e)},i.InnerConditionalContent=function(e){if(void 0===e){var t=i.Parse(i.ConditionExpression),n=i.Parse((function(){return i.InnerConditionalContent(t)}));return null===n?null:n}var r,a=null!==e,o=null===i.Parse(i.Newline);if(o&&!a)return null;if(o)r=i.InlineConditionalBranches();else{if(null===(r=i.MultilineConditionalBranches())){if(e){var l=i.StatementsAtLevel(Qe.InnerBlock);if(null!==l){r=[new Je(l)];var u=i.Parse(i.SingleMultilineCondition);u&&(u.isElse||(i.ErrorWithParsedObject("Expected an '- else:' clause here rather than an extra condition",u),u.isElse=!0),r.push(u))}}if(null===r)return null}else if(1===r.length&&r[0].isElse&&e){var s=new Je(null);s.isTrueBranch=!0,r.unshift(s)}if(e)for(var c=!1,f=0;f<r.length;++f){var h=r[f],d=f===r.length-1;h.ownExpression?(h.matchingEquality=!0,c=!0):c&&d?(h.matchingEquality=!0,h.isElse=!0):!d&&r.length>2?i.ErrorWithParsedObject("Only final branch can be an 'else'. Did you miss a ':'?",h):0===f?h.isTrueBranch=!0:h.isElse=!0}else{for(var p=0;p<r.length;++p){var v=r[p],m=p===r.length-1;if(null===v.ownExpression)if(m)v.isElse=!0;else if(v.isElse){var y=r[r.length-1];y.isElse?i.ErrorWithParsedObject("Multiple 'else' cases. Can have a maximum of one, at the end.",y):i.ErrorWithParsedObject("'else' case in conditional should always be the final one",v)}else i.ErrorWithParsedObject("Branch doesn't have condition. Are you missing a ':'? ",v)}1===r.length&&null===r[0].ownExpression&&i.ErrorWithParsedObject("Condition block with no conditions",r[0])}}if(null===r)return null;var g,b=S(r);try{for(b.s();!(g=b.n()).done;)g.value.isInline=o}catch(e){b.e(e)}finally{b.f()}return new ke(e,r)},i.InlineConditionalBranches=function(){var e=i.Interleave(i.MixedTextAndLogic,i.Exclude(i.String("|")),null,!1);if(null===e||0===e.length)return null;var t=[];if(e.length>2)i.Error("Expected one or two alternatives separated by '|' in inline conditional");else{var n=new Je(e[0]);if(n.isTrueBranch=!0,t.push(n),e.length>1){var r=new Je(e[1]);r.isElse=!0,t.push(r)}}return t},i.MultilineConditionalBranches=function(){i.MultilineWhitespace();var e=i.OneOrMore(i.SingleMultilineCondition);return null===e?null:(i.MultilineWhitespace(),e)},i.SingleMultilineCondition=function(){if(i.Whitespace(),null!==i.ParseString("->")||null===i.ParseString("-"))return null;i.Whitespace();var e=null,t=null!==i.Parse(i.ElseExpression);t||(e=i.Parse(i.ConditionExpression));var n=i.StatementsAtLevel(Qe.InnerBlock);null===e&&null===n&&(i.Error("expected content for the conditional branch following '-'"),n=[new _e("")]),i.MultilineWhitespace();var r=new Je(n);return r.ownExpression=e,r.isElse=t,r},i.ConditionExpression=function(){var e=i.Parse(i.Expression);return null===e?null:(i.DisallowIncrement(e),i.Whitespace(),null===i.ParseString(":")?null:e)},i.ElseExpression=function(){return null===i.ParseString("else")?null:(i.Whitespace(),null===i.ParseString(":")?null:be)},i._nonTextPauseCharacters=null,i._nonTextEndCharacters=null,i._notTextEndCharactersChoice=null,i._notTextEndCharactersString=null,i.TrimEndWhitespace=function(e,t){if(e.length>0){var n=e.length-1,r=e[n];if(r instanceof _e){var a=r;a.text=a.text.replace(new RegExp(/[ \t]+$/g),""),t?a.text+=" ":0===a.text.length&&(e.splice(n,1),i.TrimEndWhitespace(e,!1))}}},i.LineOfMixedTextAndLogic=function(){i.Parse(i.Whitespace);var e=i.Parse(i.MixedTextAndLogic),t=!1,n=i.Parse(i.Tags);if(n)if(e){var r,a=S(n);try{for(a.s();!(r=a.n()).done;){var o=r.value;e.push(o)}}catch(e){a.e(e)}finally{a.f()}}else e=n,t=!0;if(!e||!e.length)return null;var l=e[0];return l&&l.text&&l.text.startsWith("return")&&i.Warning("Do you need a '~' before 'return'? If not, perhaps use a glue: <> (since it's lowercase) or rewrite somehow?"),0===e.length?null:(e[e.length-1]instanceof Me||i.TrimEndWhitespace(e,!1),t||e.push(new _e("\n")),i.Expect(i.EndOfLine,"end of line",i.SkipToNextLine),e)},i.MixedTextAndLogic=function(){null!==i.ParseObject(i.Spaced(i.String("~")))&&i.Error("You shouldn't use a '~' here - tildas are for logic that's on its own line. To do inline logic, use { curly braces } instead");var e=i.Interleave(i.Optional(i.ContentText),i.Optional(i.InlineLogicOrGlue));if(!i._parsingChoice){var t,n=i.Parse(i.MultiDivert);null!==n&&(null===e&&(e=[]),i.TrimEndWhitespace(e,!0),(t=e).push.apply(t,y(n)))}return e||null},i.ContentText=function(){return i.ContentTextAllowingEscapeChar()},i.ContentTextAllowingEscapeChar=function(){for(var e=null;;){var t=i.Parse(i.ContentTextNoEscape),n=null!==i.ParseString("\\");if(!n&&null===t)break;null===e&&(e=""),null!==t&&(e+=String(t)),n&&(e+=i.ParseSingleCharacter())}return null!==e?new _e(e):null},i.ContentTextNoEscape=function(){null===i._nonTextPauseCharacters&&(i._nonTextPauseCharacters=new ue("-<")),null===i._nonTextEndCharacters&&(i._nonTextEndCharacters=new ue("{}|\n\r\\#"),i._notTextEndCharactersChoice=new ue(i._nonTextEndCharacters),i._notTextEndCharactersChoice.AddCharacters("[]"),i._notTextEndCharactersString=new ue(i._nonTextEndCharacters),i._notTextEndCharactersString.AddCharacters('"'));var e;e=i.parsingStringExpression?i._notTextEndCharactersString:i._parsingChoice?i._notTextEndCharactersChoice:i._nonTextEndCharacters;var t=i.ParseUntil((function(){return i.OneOf([i.ParseDivertArrow,i.ParseThreadArrow,i.EndOfLine,i.Glue])}),i._nonTextPauseCharacters,e);return null!==t?t:null},i.MultiDivert=function(){i.Whitespace();var e=[],t=i.Parse(i.StartThread);if(t)return[t];var n=i.Interleave(i.ParseDivertArrowOrTunnelOnwards,i.DivertIdentifierWithArguments);if(!n)return null;e=[];for(var r=0;r<n.length;++r)if(r%2==0){if("->->"===n[r]){0===r||r===n.length-1||r===n.length-2||i.Error("Tunnel onwards '->->' must only come at the begining or the start of a divert");var a=new Ue;if(r<n.length-1){var o=E(n[r+1],Me);a.divertAfter=o}e.push(a);break}}else{var l=n[r];r<n.length-1&&(l.isTunnel=!0),e.push(l)}if(0===e.length&&1===n.length){var u=new Me(null);u.isEmpty=!0,e.push(u),i._parsingChoice||i.Error("Empty diverts (->) are only valid on choices")}return e},i.StartThread=function(){if(i.Whitespace(),null===i.ParseThreadArrow())return null;i.Whitespace();var e=i.Expect(i.DivertIdentifierWithArguments,"target for new thread",(function(){return new Me(null)}));return e.isThread=!0,e},i.DivertIdentifierWithArguments=function(){i.Whitespace();var e=i.Parse(i.DotSeparatedDivertPathComponents);if(!e)return null;i.Whitespace();var t=i.Parse(i.ExpressionFunctionCallArguments);i.Whitespace();var n=new Pe(e);return new Me(n,t)},i.SingleDivert=function(){var e=i.Parse(i.MultiDivert);if(!e)return null;if(1!==e.length)return null;if(e[0]instanceof Ue)return null;var t=e[0];return t.isTunnel?null:t},i.DotSeparatedDivertPathComponents=function(){return i.Interleave(i.Spaced(i.IdentifierWithMetadata),i.Exclude(i.String(".")))},i.ParseDivertArrowOrTunnelOnwards=function(){for(var e=0;null!==i.ParseString("->");)e+=1;return 0===e?null:1===e?"->":(2===e||i.Error("Unexpected number of arrows in divert. Should only have '->' or '->->'"),"->->")},i.ParseDivertArrow=function(){return i.ParseString("->")},i.ParseThreadArrow=function(){return i.ParseString("<-")},i._binaryOperators=[],i._maxBinaryOpLength=0,i.TempDeclarationOrAssignment=function(){i.Whitespace();var e=i.ParseTempKeyword();i.Whitespace();var t;if(null===(t=e?i.Expect(i.IdentifierWithMetadata,"variable name"):i.Parse(i.IdentifierWithMetadata)))return null;i.Whitespace();var n=null!==i.ParseString("+"),r=null!==i.ParseString("-");if(n&&r&&i.Error("Unexpected sequence '+-'"),null===i.ParseString("="))return e&&i.Error("Expected '='"),null;var a=i.Expect(i.Expression,"value expression to be assigned");return n||r?new rt(t,a,n):new $e({variableIdentifier:t,assignedExpression:a,isTemporaryNewDeclaration:e})},i.DisallowIncrement=function(e){e instanceof rt&&i.Error("Can't use increment/decrement here. It can only be used on a ~ line")},i.ParseTempKeyword=function(){var e=i.BeginRule();return"temp"===i.Parse(i.Identifier)?(i.SucceedRule(e),!0):(i.FailRule(e),!1)},i.ReturnStatement=function(){if(i.Whitespace(),"return"!==i.Parse(i.Identifier))return null;i.Whitespace();var e=i.Parse(i.Expression);return new Oe(e)},i.Expression=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;i.Whitespace();var n=i.ExpressionUnary();if(null===n)return null;i.Whitespace();for(var r=function(){var t=i.BeginRule(),r=i.ParseInfixOperator();if(null!==r&&r.precedence>e){var a="right side of '".concat(r.type,"' expression"),o=i.Expect((function(){return i.ExpressionInfixRight(n,r)}),a);return null===o?(i.FailRule(t),{v:null}):(n=i.SucceedRule(t,o),"continue")}return i.FailRule(t),"break"};;){var a=r();if("continue"!==a){if("break"===a)break;if("object"===t(a))return a.v}}return i.Whitespace(),n},i.ExpressionUnary=function(){var e=i.Parse(i.ExpressionDivertTarget);if(null!==e)return e;var t=i.OneOf([i.String("-"),i.String("!")]);null===t&&(t=i.Parse(i.ExpressionNot)),i.Whitespace();var n=i.OneOf([i.ExpressionList,i.ExpressionParen,i.ExpressionFunctionCall,i.ExpressionVariableName,i.ExpressionLiteral]);if(null===n&&null!==t&&(n=i.ExpressionUnary()),null===n)return null;null!==t&&(n=oe.WithInner(n,t)),i.Whitespace();var r=i.OneOf([i.String("++"),i.String("--")]);if(null!==r){var a="++"===r;n instanceof Fe?n=new rt(n.identifier,a):i.Error("can only increment and decrement variables, but saw '".concat(n,"'."))}return n},i.ExpressionNot=function(){var e=i.Identifier();return"not"===e?e:null},i.ExpressionLiteral=function(){return i.OneOf([i.ExpressionFloat,i.ExpressionInt,i.ExpressionBool,i.ExpressionString])},i.ExpressionDivertTarget=function(){i.Whitespace();var e=i.Parse(i.SingleDivert);return!e||e&&e.isThread?null:(i.Whitespace(),new je(e))},i.ExpressionInt=function(){var e=i.ParseInt();return null===e?null:new ae(e,"int")},i.ExpressionFloat=function(){var e=i.ParseFloat();return null===e?null:new ae(e,"float")},i.ExpressionString=function(){if(null===i.ParseString('"'))return null;i.parsingStringExpression=!0;var e=i.Parse(i.MixedTextAndLogic);return i.Expect(i.String('"'),"close quote for string expression"),i.parsingStringExpression=!1,null===e?e=[new _e("")]:e.find((function(e){return e instanceof Me}))&&i.Error("String expressions cannot contain diverts (->)"),new _t(e)},i.ExpressionBool=function(){var e=i.Parse(i.Identifier);return"true"===e?new ae(!0,"bool"):"false"===e?new ae(!1,"bool"):null},i.ExpressionFunctionCall=function(){var e=i.Parse(i.IdentifierWithMetadata);if(null===e)return null;i.Whitespace();var t=i.Parse(i.ExpressionFunctionCallArguments);return null===t?null:new We(e,t)},i.ExpressionFunctionCallArguments=function(){if(null===i.ParseString("("))return null;var e=i.Exclude(i.String(",")),t=i.Interleave(i.Expression,e);return null===t&&(t=[]),i.Whitespace(),i.Expect(i.String(")"),"closing ')' for function call"),t},i.ExpressionVariableName=function(){var e=i.Interleave(i.IdentifierWithMetadata,i.Exclude(i.Spaced(i.String("."))));return null===e||kt.IsReservedKeyword(e[0].name)?null:new Fe(e)},i.ExpressionParen=function(){if(null===i.ParseString("("))return null;var e=i.Parse(i.Expression);return null===e?null:(i.Whitespace(),i.Expect(i.String(")"),"closing parenthesis ')' for expression"),e)},i.ExpressionInfixRight=function(e,t){if(!e)return null;i.Whitespace();var n=i.Parse((function(){return i.Expression(t.precedence)}));return n?new le(e,n,t.type):null},i.ParseInfixOperator=function(){var e,t=S(i._binaryOperators);try{for(t.s();!(e=t.n()).done;){var n=e.value,r=i.BeginRule();if(null!==i.ParseString(n.type)){if(n.requireWhitespace&&null===i.Whitespace()){i.FailRule(r);continue}return i.SucceedRule(r,n)}i.FailRule(r)}}catch(e){t.e(e)}finally{t.f()}return null},i.ExpressionList=function(){if(i.Whitespace(),null===i.ParseString("("))return null;i.Whitespace();var e=i.SeparatedList(i.ListMember,i.Spaced(i.String(",")));return i.Whitespace(),null===i.ParseString(")")?null:new lt(e)},i.ListMember=function(){i.Whitespace();var e=i.Parse(i.IdentifierWithMetadata);if(null===e)return null;if(null!==i.ParseString(".")){var t=i.Expect(i.IdentifierWithMetadata,"element name within the set ".concat(e));e.name+=".".concat(null==t?void 0:t.name)}return i.Whitespace(),e},i.RegisterExpressionOperators=function(){i.RegisterBinaryOperator("&&",1),i.RegisterBinaryOperator("||",1),i.RegisterBinaryOperator("and",1,!0),i.RegisterBinaryOperator("or",1,!0),i.RegisterBinaryOperator("==",2),i.RegisterBinaryOperator(">=",2),i.RegisterBinaryOperator("<=",2),i.RegisterBinaryOperator("<",2),i.RegisterBinaryOperator(">",2),i.RegisterBinaryOperator("!=",2),i.RegisterBinaryOperator("?",3),i.RegisterBinaryOperator("has",3,!0),i.RegisterBinaryOperator("!?",3),i.RegisterBinaryOperator("hasnt",3,!0),i.RegisterBinaryOperator("^",3),i.RegisterBinaryOperator("+",4),i.RegisterBinaryOperator("-",5),i.RegisterBinaryOperator("*",6),i.RegisterBinaryOperator("/",7),i.RegisterBinaryOperator("%",8),i.RegisterBinaryOperator("mod",8,!0)},i.RegisterBinaryOperator=function(e,t){var n=new at(e,t,arguments.length>2&&void 0!==arguments[2]&&arguments[2]);i._binaryOperators.push(n),i._maxBinaryOpLength=Math.max(i._maxBinaryOpLength,e.length)},i._openFilenames=[],i.IncludeStatement=function(){if(i.Whitespace(),null===i.ParseString("INCLUDE"))return null;i.Whitespace();var e=i.Expect((function(){return i.ParseUntilCharactersFromString("\n\r")}),"filename for include statement");e=e.replace(new RegExp(/[ \t]+$/g),"");var t=i.fileHandler.ResolveInkFilename(e);if(i.FilenameIsAlreadyOpen(t))return i.Error("Recursive INCLUDE detected: '".concat(t,"' is already open.")),i.ParseUntilCharactersFromString("\r\n"),new it(null);i.AddOpenFilename(t);var n=null,r="";try{r=i._rootParser.fileHandler.LoadInkFileContents(t)}catch(t){i.Error("Failed to load: '".concat(e,"'.\nError:").concat(t))}return r&&(n=new o(r,e,i._externalErrorHandler,i._rootParser,i.fileHandler).ParseStory()),i.RemoveOpenFilename(t),new it(n)},i.FilenameIsAlreadyOpen=function(e){return i._rootParser._openFilenames.includes(e)},i.AddOpenFilename=function(e){i._rootParser._openFilenames.push(e)},i.RemoveOpenFilename=function(e){i._rootParser._openFilenames.splice(i._rootParser._openFilenames.indexOf(e),1)},i.KnotDefinition=function(){var e=i.Parse(i.KnotDeclaration);if(null===e)return null;i.Expect(i.EndOfLine,"end of line after knot name definition",i.SkipToNextLine);var t=i.Expect((function(){return i.StatementsAtLevel(Qe.Knot)}),"at least one line within the knot",i.KnotStitchNoContentRecoveryRule);return new ot(e.name,t,e.args,e.isFunction)},i.KnotDeclaration=function(){if(i.Whitespace(),null===i.KnotTitleEquals())return null;i.Whitespace();var e,t=i.Parse(i.IdentifierWithMetadata),n="function"===(null==t?void 0:t.name);n?(i.Expect(i.Whitespace,"whitespace after the 'function' keyword"),e=i.Parse(i.IdentifierWithMetadata)):e=t,null===e&&(i.Error("Expected the name of the ".concat(n?"function":"knot")),e=new Ae("")),i.Whitespace();var r=i.Parse(i.BracketedKnotDeclArguments);return i.Whitespace(),i.Parse(i.KnotTitleEquals),new Ze(e,r,n)},i.KnotTitleEquals=function(){var e=i.ParseCharactersFromString("=");return null===e||e.length<=1?null:e},i.StitchDefinition=function(){var e=i.Parse(i.StitchDeclaration);if(null===e)return null;i.Expect(i.EndOfLine,"end of line after stitch name",i.SkipToNextLine);var t=i.Expect((function(){return i.StatementsAtLevel(Qe.Stitch)}),"at least one line within the stitch",i.KnotStitchNoContentRecoveryRule);return new st(e.name,t,e.args,e.isFunction)},i.StitchDeclaration=function(){if(i.Whitespace(),null===i.ParseString("="))return null;if(null!==i.ParseString("="))return null;i.Whitespace();var e=null!==i.ParseString("function");e&&i.Whitespace();var t=i.Parse(i.IdentifierWithMetadata);if(null===t)return null;i.Whitespace();var n=i.Parse(i.BracketedKnotDeclArguments);return i.Whitespace(),new Ze(t,n,e)},i.KnotStitchNoContentRecoveryRule=function(){return i.ParseUntil(i.KnotDeclaration,new ue("="),null),[new _e("<ERROR IN FLOW>")]},i.BracketedKnotDeclArguments=function(){if(null===i.ParseString("("))return null;var e=i.Interleave(i.Spaced(i.FlowDeclArgument),i.Exclude(i.String(",")));return i.Expect(i.String(")"),"closing ')' for parameter list"),null===e&&(e=[]),e},i.FlowDeclArgument=function(){var e=i.Parse(i.IdentifierWithMetadata);i.Whitespace();var t=i.ParseDivertArrow();i.Whitespace();var n=i.Parse(i.IdentifierWithMetadata);if(null==e&&null===n)return null;var r=new _;return null!==t&&(r.isDivertTarget=!0),null!==e&&"ref"===e.name?(null===n&&i.Error("Expected an parameter name after 'ref'"),r.identifier=n,r.isByReference=!0):(r.isDivertTarget?r.identifier=n:r.identifier=e,null===r.identifier&&i.Error("Expected an parameter name"),r.isByReference=!1),r},i.ExternalDeclaration=function(){i.Whitespace();var e=i.Parse(i.IdentifierWithMetadata);if(null===e||"EXTERNAL"!=e.name)return null;i.Whitespace();var t=i.Expect(i.IdentifierWithMetadata,"name of external function")||new Ae("");i.Whitespace();var n=i.Expect(i.BracketedKnotDeclArguments,"declaration of arguments for EXTERNAL, even if empty, i.e. 'EXTERNAL ".concat(t,"()'"));null===n&&(n=[]);var r=n.map((function(e){var t;return null===(t=e.identifier)||void 0===t?void 0:t.name})).filter(N);return new Xe(t,r)},i._identifierCharSet=null,i.LogicLine=function(){if(i.Whitespace(),null===i.ParseString("~"))return null;i.Whitespace();var e=i.Expect((function(){return i.OneOf([i.ReturnStatement,i.TempDeclarationOrAssignment,i.Expression])}),"expression after '~'",i.SkipToNextLine);if(null===e)return new Ie;e instanceof ne&&!(e instanceof We||e instanceof rt)&&i.Error("Logic following a '~' can't be that type of expression. It can only be something like:\n\t~ return\n\t~ var x = blah\n\t~ x++\n\t~ myFunction()");var t=E(e,We);return t&&(t.shouldPopReturnedValue=!0),null!==e.Find(We)()&&(e=new Ie(e,new _e("\n"))),i.Expect(i.EndOfLine,"end of line",i.SkipToNextLine),e},i.VariableDeclaration=function(){if(i.Whitespace(),"VAR"!==i.Parse(i.Identifier))return null;i.Whitespace();var e=i.Expect(i.IdentifierWithMetadata,"variable name");i.Whitespace(),i.Expect(i.String("="),"the '=' for an assignment of a value, e.g. '= 5' (initial values are mandatory)"),i.Whitespace();var t=i.Expect(i.Expression,"initial value for ");return t?(t instanceof ae||t instanceof _t||t instanceof je||t instanceof Fe||t instanceof lt||i.Error("initial value for a variable must be a number, constant, list or divert target"),null!==i.Parse(i.ListElementDefinitionSeparator)?i.Error("Unexpected ','. If you're trying to declare a new list, use the LIST keyword, not VAR"):t instanceof _t&&(t.isSingleString||i.Error("Constant strings cannot contain any logic.")),new $e({assignedExpression:t,isGlobalDeclaration:!0,variableIdentifier:e})):null},i.ListDeclaration=function(){if(i.Whitespace(),"LIST"!=i.Parse(i.Identifier))return null;i.Whitespace();var e=i.Expect(i.IdentifierWithMetadata,"list name");i.Whitespace(),i.Expect(i.String("="),"the '=' for an assignment of the list definition"),i.Whitespace();var t=i.Expect(i.ListDefinition,"list item names");return t?(t.identifier=new Ae(e.name),new $e({variableIdentifier:e,listDef:t})):null},i.ListDefinition=function(){i.AnyWhitespace();var e=i.SeparatedList(i.ListElementDefinition,i.ListElementDefinitionSeparator);return null===e?null:new He(e)},i.ListElementDefinitionSeparator=function(){return i.AnyWhitespace(),null===i.ParseString(",")?null:(i.AnyWhitespace(),",")},i.ListElementDefinition=function(){var e=null!==i.ParseString("("),t=e;i.Whitespace();var n=i.Parse(i.IdentifierWithMetadata);if(null===n)return null;i.Whitespace(),e&&null!=i.ParseString(")")&&(t=!1,i.Whitespace());var r=null;if(null!==i.ParseString("=")){i.Whitespace();var a=i.Expect(i.ExpressionInt,"value to be assigned to list item");null!==a&&(r=a.value),t&&(i.Whitespace(),null!==i.ParseString(")")&&(t=!1))}return t&&i.Error("Expected closing ')'"),new ut(n,e,r)},i.ConstDeclaration=function(){if(i.Whitespace(),"CONST"!==i.Parse(i.Identifier))return null;i.Whitespace();var e=i.Expect(i.IdentifierWithMetadata,"constant name");i.Whitespace(),i.Expect(i.String("="),"the '=' for an assignment of a value, e.g. '= 5' (initial values are mandatory)"),i.Whitespace();var t=i.Expect(i.Expression,"initial value for ");return t instanceof ae||t instanceof je||t instanceof _t?t instanceof _t&&(t.isSingleString||i.Error("Constant strings cannot contain any logic.")):i.Error("initial value for a constant must be a number or divert target"),new Ee(e,t)},i.InlineLogicOrGlue=function(){return i.OneOf([i.InlineLogic,i.Glue])},i.Glue=function(){return null!==i.ParseString("<>")?new tt(new nt):null},i.InlineLogic=function(){if(null===i.ParseString("{"))return null;i.Whitespace();var e=i.Expect(i.InnerLogic,"some kind of logic, conditional or sequence within braces: { ... }");if(null===e)return null;i.DisallowIncrement(e);var t=E(e,Ie);return t||(t=new Ie(e)),i.Whitespace(),i.Expect(i.String("}"),"closing brace '}' for inline logic"),t},i.InnerLogic=function(){i.Whitespace();var e=i.ParseObject(i.SequenceTypeAnnotation);if(null!==e){var t=i.Expect(i.InnerSequenceObjects,"sequence elements (for cycle/stoping etc)");return null===t?null:new Ge(t,e)}var n=i.Parse(i.ConditionExpression);if(n)return i.Expect((function(){return i.InnerConditionalContent(n)}),"conditional content following query");for(var r=0,a=[i.InnerConditionalContent,i.InnerSequence,i.InnerExpression];r<a.length;r++){var o=a[r],l=i.BeginRule(),u=i.ParseObject(o);if(u){if(null!==i.Peek(i.Spaced(i.String("}"))))return i.SucceedRule(l,u);i.FailRule(l)}else i.FailRule(l)}return null},i.InnerExpression=function(){var e=i.Parse(i.Expression);return e&&(e.outputWhenComplete=!0),e},i.IdentifierWithMetadata=function(){var e=i.Identifier();return null===e?null:new Ae(e)},i.Identifier=function(){var e=i.ParseCharactersFromCharSet(i.identifierCharSet);if(null===e)return null;var t,n=!0,r=S(e);try{for(r.s();!(t=r.n()).done;){var a=t.value;if(!(a>="0"&&a<="9")){n=!1;break}}}catch(e){r.e(e)}finally{r.f()}return n?null:e},i._sequenceTypeSymbols=new ue("!&~$"),i.InnerSequence=function(){i.Whitespace();var e=Le.Stopping,t=i.Parse(i.SequenceTypeAnnotation);null!==t&&(e=t);var n=i.Parse(i.InnerSequenceObjects);return null===n||n.length<=1?null:new Ge(n,e)},i.SequenceTypeAnnotation=function(){var e=i.Parse(i.SequenceTypeSymbolAnnotation);if(null===e&&(e=i.Parse(i.SequenceTypeWordAnnotation)),null===e)return null;switch(e){case Le.Once:case Le.Cycle:case Le.Stopping:case Le.Shuffle:case Le.Shuffle|Le.Stopping:case Le.Shuffle|Le.Once:break;default:return i.Error("Sequence type combination not supported: ".concat(e)),Le.Stopping}return e},i.SequenceTypeSymbolAnnotation=function(){null===i._sequenceTypeSymbols&&(i._sequenceTypeSymbols=new ue("!&~$ "));var e=0,t=i.ParseCharactersFromCharSet(i._sequenceTypeSymbols);if(null===t)return null;var n,r=S(t);try{for(r.s();!(n=r.n()).done;)switch(n.value){case"!":e|=Le.Once;break;case"&":e|=Le.Cycle;break;case"~":e|=Le.Shuffle;break;case"$":e|=Le.Stopping}}catch(e){r.e(e)}finally{r.f()}return 0===e?null:e},i.SequenceTypeWordAnnotation=function(){var e=i.Interleave(i.SequenceTypeSingleWord,i.Exclude(i.Whitespace));if(null===e||0===e.length)return null;if(null===i.ParseString(":"))return null;var t,n=0,r=S(e);try{for(r.s();!(t=r.n()).done;)n|=t.value}catch(e){r.e(e)}finally{r.f()}return n},i.SequenceTypeSingleWord=function(){var e=null,t=i.Parse(i.IdentifierWithMetadata);if(null!==t)switch(t.name){case"once":e=Le.Once;break;case"cycle":e=Le.Cycle;break;case"shuffle":e=Le.Shuffle;break;case"stopping":e=Le.Stopping}return null===e?null:e},i.InnerSequenceObjects=function(){return null!==i.Parse(i.Newline)?i.Parse(i.InnerMultilineSequenceObjects):i.Parse(i.InnerInlineSequenceObjects)},i.InnerInlineSequenceObjects=function(){var e=i.Interleave(i.Optional(i.MixedTextAndLogic),i.String("|"),null,!1);if(null===e)return null;var t,n=[],r=!1,a=S(e);try{for(a.s();!(t=a.n()).done;){var o=t.value;if("|"===o)r||n.push(new Ie),r=!1;else{var l=o;null===l?i.Error("Expected content, but got ".concat(o," (this is an ink compiler bug!)")):n.push(new Ie(l)),r=!0}}}catch(e){a.e(e)}finally{a.f()}return r||n.push(new Ie),n},i.InnerMultilineSequenceObjects=function(){i.MultilineWhitespace();var e=i.OneOrMore(i.SingleMultilineSequenceElement);return null===e?null:e},i.SingleMultilineSequenceElement=function(){if(i.Whitespace(),null!==i.ParseString("->"))return null;if(null===i.ParseString("-"))return null;i.Whitespace();var e=i.StatementsAtLevel(Qe.InnerBlock);return null===e?i.MultilineWhitespace():e.unshift(new _e("\n")),new Ie(e)},i._statementRulesAtLevel=[],i._statementBreakRulesAtLevel=[],i.StatementsAtLevel=function(e){return e===Qe.InnerBlock&&null!==i.Parse(i.GatherDashes)&&i.Error("You can't use a gather (the dashes) within the { curly braces } context. For multi-line sequences and conditions, you should only use one dash."),i.Interleave(i.Optional(i.MultilineWhitespace),(function(){return i.StatementAtLevel(e)}),(function(){return i.StatementsBreakForLevel(e)}))},i.StatementAtLevel=function(e){var t=i._statementRulesAtLevel[e],n=i.OneOf(t);return e===Qe.Top&&n instanceof Oe&&i.Error("should not have return statement outside of a knot"),n},i.StatementsBreakForLevel=function(e){i.Whitespace();var t=i._statementBreakRulesAtLevel[e],n=i.OneOf(t);return null===n?null:n},i.GenerateStatementLevelRules=function(){var e=Object.values(Qe);i._statementRulesAtLevel="f".repeat(e.length).split("f").map((function(){return[]})),i._statementBreakRulesAtLevel="f".repeat(e.length).split("f").map((function(){return[]}));for(var t=0,n=e;t<n.length;t++){var r=n[t],a=[],o=[];a.push(i.Line(i.MultiDivert)),r>=Qe.Top&&a.push(i.KnotDefinition),a.push(i.Line(i.Choice)),a.push(i.Line(i.AuthorWarning)),r>Qe.InnerBlock&&a.push(i.Gather),r>=Qe.Knot&&a.push(i.StitchDefinition),a.push(i.Line(i.ListDeclaration)),a.push(i.Line(i.VariableDeclaration)),a.push(i.Line(i.ConstDeclaration)),a.push(i.Line(i.ExternalDeclaration)),a.push(i.Line(i.IncludeStatement)),a.push(i.LogicLine),a.push(i.LineOfMixedTextAndLogic),r<=Qe.Knot&&o.push(i.KnotDeclaration),r<=Qe.Stitch&&o.push(i.StitchDeclaration),r<=Qe.InnerBlock&&(o.push(i.ParseDashNotArrow),o.push(i.String("}"))),i._statementRulesAtLevel[r]=a,i._statementBreakRulesAtLevel[r]=o}},i.SkipToNextLine=function(){return i.ParseUntilCharactersFromString("\n\r"),i.ParseNewline(),be},i.Line=function(e){return function(){var t=i.ParseObject(e);return null===t?null:(i.Expect(i.EndOfLine,"end of line",i.SkipToNextLine),t)}},i._endOfTagCharSet=new ue("#\n\r\\"),i.Tag=function(){if(i.Whitespace(),null===i.ParseString("#"))return null;i.Whitespace();for(var e="";e+=i.ParseUntilCharactersFromCharSet(i._endOfTagCharSet)||"",null!==i.ParseString("\\");){var t=i.ParseSingleCharacter();"\0"!==t&&(e+=t)}var n=e.trim();return new Et(new ct(n))},i.Tags=function(){var e=i.OneOrMore(i.Tag);return null===e?null:e},i._inlineWhitespaceChars=new ue(" \t"),i.EndOfLine=function(){return i.OneOf([i.Newline,i.EndOfFile])},i.Newline=function(){return i.Whitespace(),null!==i.ParseNewline()?be:null},i.EndOfFile=function(){return i.Whitespace(),i.endOfInput?be:null},i.MultilineWhitespace=function(){var e=i.OneOrMore(i.Newline);return null===e?null:e.length>=1?be:null},i.Whitespace=function(){return null!==i.ParseCharactersFromCharSet(i._inlineWhitespaceChars)?be:null},i.Spaced=function(e){return function(){i.Whitespace();var t=i.ParseObject(e);return null===t?null:(i.Whitespace(),t)}},i.AnyWhitespace=function(){for(var e=!1;null!==i.OneOf([i.Whitespace,i.MultilineWhitespace]);)e=!0;return e?be:null},i.MultiSpaced=function(e){return function(){i.AnyWhitespace();var t=i.ParseObject(e);return null===t?null:(i.AnyWhitespace(),t)}},i._filename=null,i._externalErrorHandler=null,i._fileHandler=null,i._filename=a,i.RegisterExpressionOperators(),i.GenerateStatementLevelRules(),i.errorHandler=i.OnStringParserError,i._externalErrorHandler=l,i._fileHandler=null===s?new xt:s,null===u){if(i._rootParser=f(i),i._openFilenames=[],null!==i._filename){var c=i.fileHandler.ResolveInkFilename(i._filename);i._openFilenames.push(c)}}else i._rootParser=u;return i}return i(o,[{key:"fileHandler",get:function(){if(!this._fileHandler)throw new Error("No FileHandler defined");return this._fileHandler},set:function(e){this._fileHandler=e}},{key:"PreProcessInputString",value:function(e){return new we(e).Process()}},{key:"parsingStringExpression",get:function(){return this.GetFlag(Number(ze.ParsingString))},set:function(e){this.SetFlag(Number(ze.ParsingString),e)}},{key:"identifierCharSet",get:function(){return null===this._identifierCharSet&&((this._identifierCharSet=new ue).AddRange("A","Z").AddRange("a","z").AddRange("0","9").Add("_"),this.ExtendIdentifierCharacterRanges(this._identifierCharSet)),this._identifierCharSet}}]),o}(Se);Pt.LatinBasic=se.Define("A","z",(new ue).AddRange("[","`")),Pt.LatinExtendedA=se.Define("",""),Pt.LatinExtendedB=se.Define("",""),Pt.Greek=se.Define("","",(new ue).AddRange("","").AddCharacters("")),Pt.Cyrillic=se.Define("","",(new ue).AddRange("","")),Pt.Armenian=se.Define("","",(new ue).AddCharacters("").AddRange("","").AddRange("","")),Pt.Hebrew=se.Define("","",new ue),Pt.Arabic=se.Define("","",new ue),Pt.Korean=se.Define("","",new ue),Pt.ListAllCharacterRanges=function(){return[Pt.LatinBasic,Pt.LatinExtendedA,Pt.LatinExtendedB,Pt.Arabic,Pt.Armenian,Pt.Cyrillic,Pt.Greek,Pt.Hebrew,Pt.Korean]};var Ot=function(){function e(t){var r=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;n(this,e),this._errors=[],this._warnings=[],this._authorMessages=[],this._parsedStory=null,this._runtimeStory=null,this._parser=null,this._debugSourceRanges=[],this.Compile=function(){return r._parser=new Pt(r.inputString,r.options.sourceFilename||null,r.OnError,null,r.options.fileHandler),r._parsedStory=r.parser.ParseStory(),0===r.errors.length?(r.parsedStory.countAllVisits=r.options.countAllVisits,r._runtimeStory=r.parsedStory.ExportRuntime(r.OnError)):r._runtimeStory=null,r.runtimeStory},this.RetrieveDebugSourceForLatestContent=function(){var e,t,n=S(r.runtimeStory.state.outputStream);try{for(n.s();!(t=n.n()).done;){var i=E(t.value,J);if(null!==i){var a=new k((null===(e=i.value)||void 0===e?void 0:e.length)||0,i.debugMetadata,i.value||"unknown");r.debugSourceRanges.push(a)}}}catch(e){n.e(e)}finally{n.f()}},this.DebugMetadataForContentAtOffset=function(e){var t,n=0,i=null,a=S(r.debugSourceRanges);try{for(a.s();!(t=a.n()).done;){var o=t.value;if(null!==o.debugMetadata&&(i=o.debugMetadata),e>=n&&e<n+o.length)return i;n+=o.length}}catch(e){a.e(e)}finally{a.f()}return null},this.OnError=function(e,t){switch(t){case C.Author:r._authorMessages.push(e);break;case C.Warning:r._warnings.push(e);break;case C.Error:r._errors.push(e)}null!==r.options.errorHandler&&r.options.errorHandler(e,t)},this._inputString=t,this._options=i||new w}return i(e,[{key:"errors",get:function(){return this._errors}},{key:"warnings",get:function(){return this._warnings}},{key:"authorMessages",get:function(){return this._authorMessages}},{key:"inputString",get:function(){return this._inputString}},{key:"options",get:function(){return this._options}},{key:"parsedStory",get:function(){if(!this._parsedStory)throw new Error;return this._parsedStory}},{key:"runtimeStory",get:function(){if(!this._runtimeStory)throw new Error("Compilation failed.");return this._runtimeStory}},{key:"parser",get:function(){if(!this._parser)throw new Error;return this._parser}},{key:"debugSourceRanges",get:function(){return this._debugSourceRanges}}]),e}();e.Compiler=Ot,e.CompilerOptions=w,e.InkList=B,Object.defineProperty(e,"__esModule",{value:!0})}(t)},738:e=>{function t(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}e.exports=function(e){return null!=e&&(t(e)||function(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&t(e.slice(0,0))}(e)||!!e._isBuffer)}},568:(e,t,n)=>{var r,i,a,o,l;r=n(12),i=n(487).utf8,a=n(738),o=n(487).bin,(l=function(e,t){e.constructor==String?e=t&&"binary"===t.encoding?o.stringToBytes(e):i.stringToBytes(e):a(e)?e=Array.prototype.slice.call(e,0):Array.isArray(e)||e.constructor===Uint8Array||(e=e.toString());for(var n=r.bytesToWords(e),u=8*e.length,s=1732584193,c=-271733879,f=-1732584194,h=271733878,d=0;d<n.length;d++)n[d]=16711935&(n[d]<<8|n[d]>>>24)|4278255360&(n[d]<<24|n[d]>>>8);n[u>>>5]|=128<<u%32,n[14+(u+64>>>9<<4)]=u;var p=l._ff,v=l._gg,m=l._hh,y=l._ii;for(d=0;d<n.length;d+=16){var g=s,b=c,S=f,C=h;s=p(s,c,f,h,n[d+0],7,-680876936),h=p(h,s,c,f,n[d+1],12,-389564586),f=p(f,h,s,c,n[d+2],17,606105819),c=p(c,f,h,s,n[d+3],22,-1044525330),s=p(s,c,f,h,n[d+4],7,-176418897),h=p(h,s,c,f,n[d+5],12,1200080426),f=p(f,h,s,c,n[d+6],17,-1473231341),c=p(c,f,h,s,n[d+7],22,-45705983),s=p(s,c,f,h,n[d+8],7,1770035416),h=p(h,s,c,f,n[d+9],12,-1958414417),f=p(f,h,s,c,n[d+10],17,-42063),c=p(c,f,h,s,n[d+11],22,-1990404162),s=p(s,c,f,h,n[d+12],7,1804603682),h=p(h,s,c,f,n[d+13],12,-40341101),f=p(f,h,s,c,n[d+14],17,-1502002290),s=v(s,c=p(c,f,h,s,n[d+15],22,1236535329),f,h,n[d+1],5,-165796510),h=v(h,s,c,f,n[d+6],9,-1069501632),f=v(f,h,s,c,n[d+11],14,643717713),c=v(c,f,h,s,n[d+0],20,-373897302),s=v(s,c,f,h,n[d+5],5,-701558691),h=v(h,s,c,f,n[d+10],9,38016083),f=v(f,h,s,c,n[d+15],14,-660478335),c=v(c,f,h,s,n[d+4],20,-405537848),s=v(s,c,f,h,n[d+9],5,568446438),h=v(h,s,c,f,n[d+14],9,-1019803690),f=v(f,h,s,c,n[d+3],14,-187363961),c=v(c,f,h,s,n[d+8],20,1163531501),s=v(s,c,f,h,n[d+13],5,-1444681467),h=v(h,s,c,f,n[d+2],9,-51403784),f=v(f,h,s,c,n[d+7],14,1735328473),s=m(s,c=v(c,f,h,s,n[d+12],20,-1926607734),f,h,n[d+5],4,-378558),h=m(h,s,c,f,n[d+8],11,-2022574463),f=m(f,h,s,c,n[d+11],16,1839030562),c=m(c,f,h,s,n[d+14],23,-35309556),s=m(s,c,f,h,n[d+1],4,-1530992060),h=m(h,s,c,f,n[d+4],11,1272893353),f=m(f,h,s,c,n[d+7],16,-155497632),c=m(c,f,h,s,n[d+10],23,-1094730640),s=m(s,c,f,h,n[d+13],4,681279174),h=m(h,s,c,f,n[d+0],11,-358537222),f=m(f,h,s,c,n[d+3],16,-722521979),c=m(c,f,h,s,n[d+6],23,76029189),s=m(s,c,f,h,n[d+9],4,-640364487),h=m(h,s,c,f,n[d+12],11,-421815835),f=m(f,h,s,c,n[d+15],16,530742520),s=y(s,c=m(c,f,h,s,n[d+2],23,-995338651),f,h,n[d+0],6,-198630844),h=y(h,s,c,f,n[d+7],10,1126891415),f=y(f,h,s,c,n[d+14],15,-1416354905),c=y(c,f,h,s,n[d+5],21,-57434055),s=y(s,c,f,h,n[d+12],6,1700485571),h=y(h,s,c,f,n[d+3],10,-1894986606),f=y(f,h,s,c,n[d+10],15,-1051523),c=y(c,f,h,s,n[d+1],21,-2054922799),s=y(s,c,f,h,n[d+8],6,1873313359),h=y(h,s,c,f,n[d+15],10,-30611744),f=y(f,h,s,c,n[d+6],15,-1560198380),c=y(c,f,h,s,n[d+13],21,1309151649),s=y(s,c,f,h,n[d+4],6,-145523070),h=y(h,s,c,f,n[d+11],10,-1120210379),f=y(f,h,s,c,n[d+2],15,718787259),c=y(c,f,h,s,n[d+9],21,-343485551),s=s+g>>>0,c=c+b>>>0,f=f+S>>>0,h=h+C>>>0}return r.endian([s,c,f,h])})._ff=function(e,t,n,r,i,a,o){var l=e+(t&n|~t&r)+(i>>>0)+o;return(l<<a|l>>>32-a)+t},l._gg=function(e,t,n,r,i,a,o){var l=e+(t&r|n&~r)+(i>>>0)+o;return(l<<a|l>>>32-a)+t},l._hh=function(e,t,n,r,i,a,o){var l=e+(t^n^r)+(i>>>0)+o;return(l<<a|l>>>32-a)+t},l._ii=function(e,t,n,r,i,a,o){var l=e+(n^(t|~r))+(i>>>0)+o;return(l<<a|l>>>32-a)+t},l._blocksize=16,l._digestsize=16,e.exports=function(e,t){if(null==e)throw new Error("Illegal argument "+e);var n=r.wordsToBytes(l(e,t));return t&&t.asBytes?n:t&&t.asString?o.bytesToString(n):r.bytesToHex(n)}},448:(e,t,n)=>{"use strict";var r=n(294),i=n(840);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,l={};function u(e,t){s(e,t),s(e+"Capture",t)}function s(e,t){for(l[e]=t,e=0;e<t.length;e++)o.add(t[e])}var c=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),f=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d={},p={};function v(e,t,n,r,i,a,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){m[e]=new v(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];m[t]=new v(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){m[e]=new v(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){m[e]=new v(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){m[e]=new v(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){m[e]=new v(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){m[e]=new v(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){m[e]=new v(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){m[e]=new v(e,5,!1,e.toLowerCase(),null,!1,!1)}));var y=/[\-:]([a-z])/g;function g(e){return e[1].toUpperCase()}function b(e,t,n,r){var i=m.hasOwnProperty(t)?m[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null==t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!f.call(p,e)||!f.call(d,e)&&(h.test(e)?p[e]=!0:(d[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(y,g);m[t]=new v(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(y,g);m[t]=new v(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(y,g);m[t]=new v(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){m[e]=new v(e,1,!1,e.toLowerCase(),null,!1,!1)})),m.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){m[e]=new v(e,1,!1,e.toLowerCase(),null,!0,!0)}));var S=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,C=Symbol.for("react.element"),w=Symbol.for("react.portal"),k=Symbol.for("react.fragment"),_=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),x=Symbol.for("react.provider"),P=Symbol.for("react.context"),O=Symbol.for("react.forward_ref"),T=Symbol.for("react.suspense"),A=Symbol.for("react.suspense_list"),N=Symbol.for("react.memo"),I=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var R=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var F=Symbol.iterator;function W(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=F&&e[F]||e["@@iterator"])?e:null}var L,D=Object.assign;function j(e){if(void 0===L)try{throw Error()}catch(e){var t=e.stack.trim().match(/\n( *(at )?)/);L=t&&t[1]||""}return"\n"+L+e}var M=!1;function V(e,t){if(!e||M)return"";M=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(e){var r=e}Reflect.construct(e,[],t)}else{try{t.call()}catch(e){r=e}e.call(t.prototype)}else{try{throw Error()}catch(e){r=e}e()}}catch(t){if(t&&r&&"string"==typeof t.stack){for(var i=t.stack.split("\n"),a=r.stack.split("\n"),o=i.length-1,l=a.length-1;1<=o&&0<=l&&i[o]!==a[l];)l--;for(;1<=o&&0<=l;o--,l--)if(i[o]!==a[l]){if(1!==o||1!==l)do{if(o--,0>--l||i[o]!==a[l]){var u="\n"+i[o].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}}while(1<=o&&0<=l);break}}}finally{M=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?j(e):""}function B(e){switch(e.tag){case 5:return j(e.type);case 16:return j("Lazy");case 13:return j("Suspense");case 19:return j("SuspenseList");case 0:case 2:case 15:return V(e.type,!1);case 11:return V(e.type.render,!1);case 1:return V(e.type,!0);default:return""}}function z(e){if(null==e)return null;if("function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case k:return"Fragment";case w:return"Portal";case E:return"Profiler";case _:return"StrictMode";case T:return"Suspense";case A:return"SuspenseList"}if("object"==typeof e)switch(e.$$typeof){case P:return(e.displayName||"Context")+".Consumer";case x:return(e._context.displayName||"Context")+".Provider";case O:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case N:return null!==(t=e.displayName||null)?t:z(e.type)||"Memo";case I:t=e._payload,e=e._init;try{return z(e(t))}catch(e){}}return null}function G(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return z(t);case 8:return t===_?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"==typeof t)return t.displayName||t.name||null;if("string"==typeof t)return t}return null}function U(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function q(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function H(e){e._valueTracker||(e._valueTracker=function(e){var t=q(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&void 0!==n&&"function"==typeof n.get&&"function"==typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function $(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=q(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function K(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function J(e,t){var n=t.checked;return D({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Q(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=U(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Y(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function X(e,t){Y(e,t);var n=U(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,U(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&K(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+U(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return D({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(a(92));if(te(n)){if(1<n.length)throw Error(a(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:U(n)}}function ae(e,t){var n=U(t.value),r=U(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function le(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ue(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?le(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var se,ce,fe=(ce=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((se=se||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=se.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return ce(e,t)}))}:ce);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var de={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function ve(e,t,n){return null==t||"boolean"==typeof t||""===t?"":n||"number"!=typeof t||0===t||de.hasOwnProperty(e)&&de[e]?(""+t).trim():t+"px"}function me(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=ve(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(de).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),de[t]=de[e]}))}));var ye=D({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ge(e,t){if(t){if(ye[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!=typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!=typeof t.style)throw Error(a(62))}}function be(e,t){if(-1===e.indexOf("-"))return"string"==typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Se=null;function Ce(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var we=null,ke=null,_e=null;function Ee(e){if(e=bi(e)){if("function"!=typeof we)throw Error(a(280));var t=e.stateNode;t&&(t=Ci(t),we(e.stateNode,e.type,t))}}function xe(e){ke?_e?_e.push(e):_e=[e]:ke=e}function Pe(){if(ke){var e=ke,t=_e;if(_e=ke=null,Ee(e),t)for(e=0;e<t.length;e++)Ee(t[e])}}function Oe(e,t){return e(t)}function Te(){}var Ae=!1;function Ne(e,t,n){if(Ae)return e(t,n);Ae=!0;try{return Oe(e,t,n)}finally{Ae=!1,(null!==ke||null!==_e)&&(Te(),Pe())}}function Ie(e,t){var n=e.stateNode;if(null===n)return null;var r=Ci(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!=typeof n)throw Error(a(231,t,typeof n));return n}var Re=!1;if(c)try{var Fe={};Object.defineProperty(Fe,"passive",{get:function(){Re=!0}}),window.addEventListener("test",Fe,Fe),window.removeEventListener("test",Fe,Fe)}catch(ce){Re=!1}function We(e,t,n,r,i,a,o,l,u){var s=Array.prototype.slice.call(arguments,3);try{t.apply(n,s)}catch(e){this.onError(e)}}var Le=!1,De=null,je=!1,Me=null,Ve={onError:function(e){Le=!0,De=e}};function Be(e,t,n,r,i,a,o,l,u){Le=!1,De=null,We.apply(Ve,arguments)}function ze(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!=(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Ge(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&null!==(e=e.alternate)&&(t=e.memoizedState),null!==t)return t.dehydrated}return null}function Ue(e){if(ze(e)!==e)throw Error(a(188))}function qe(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=ze(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return Ue(i),e;if(o===r)return Ue(i),t;o=o.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=o;else{for(var l=!1,u=i.child;u;){if(u===n){l=!0,n=i,r=o;break}if(u===r){l=!0,r=i,n=o;break}u=u.sibling}if(!l){for(u=o.child;u;){if(u===n){l=!0,n=o,r=i;break}if(u===r){l=!0,r=o,n=i;break}u=u.sibling}if(!l)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(e))?He(e):null}function He(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=He(e);if(null!==t)return t;e=e.sibling}return null}var $e=i.unstable_scheduleCallback,Ke=i.unstable_cancelCallback,Je=i.unstable_shouldYield,Qe=i.unstable_requestPaint,Ye=i.unstable_now,Xe=i.unstable_getCurrentPriorityLevel,Ze=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,at=null,ot=Math.clz32?Math.clz32:function(e){return 0==(e>>>=0)?32:31-(lt(e)/ut|0)|0},lt=Math.log,ut=Math.LN2,st=64,ct=4194304;function ft(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,a=e.pingedLanes,o=268435455&n;if(0!==o){var l=o&~i;0!==l?r=ft(l):0!=(a&=o)&&(r=ft(a))}else 0!=(o=n&~i)?r=ft(o):0!==a&&(r=ft(a));if(0===r)return 0;if(0!==t&&t!==r&&0==(t&i)&&((i=r&-r)>=(a=t&-t)||16===i&&0!=(4194240&a)))return t;if(0!=(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-ot(t)),r|=e[n],t&=~i;return r}function dt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!=(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function vt(){var e=st;return 0==(4194240&(st<<=1))&&(st=64),e}function mt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function yt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function gt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var bt=0;function St(e){return 1<(e&=-e)?4<e?0!=(268435455&e)?16:536870912:4:1}var Ct,wt,kt,_t,Et,xt=!1,Pt=[],Ot=null,Tt=null,At=null,Nt=new Map,It=new Map,Rt=[],Ft="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Wt(e,t){switch(e){case"focusin":case"focusout":Ot=null;break;case"dragenter":case"dragleave":Tt=null;break;case"mouseover":case"mouseout":At=null;break;case"pointerover":case"pointerout":Nt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":It.delete(t.pointerId)}}function Lt(e,t,n,r,i,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},null!==t&&null!==(t=bi(t))&&wt(t),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Dt(e){var t=gi(e.target);if(null!==t){var n=ze(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Ge(n)))return e.blockedOn=t,void Et(e.priority,(function(){kt(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function jt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Jt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=bi(n))&&wt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);Se=r,n.target.dispatchEvent(r),Se=null,t.shift()}return!0}function Mt(e,t,n){jt(e)&&n.delete(t)}function Vt(){xt=!1,null!==Ot&&jt(Ot)&&(Ot=null),null!==Tt&&jt(Tt)&&(Tt=null),null!==At&&jt(At)&&(At=null),Nt.forEach(Mt),It.forEach(Mt)}function Bt(e,t){e.blockedOn===t&&(e.blockedOn=null,xt||(xt=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Vt)))}function zt(e){function t(t){return Bt(t,e)}if(0<Pt.length){Bt(Pt[0],e);for(var n=1;n<Pt.length;n++){var r=Pt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Ot&&Bt(Ot,e),null!==Tt&&Bt(Tt,e),null!==At&&Bt(At,e),Nt.forEach(t),It.forEach(t),n=0;n<Rt.length;n++)(r=Rt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Rt.length&&null===(n=Rt[0]).blockedOn;)Dt(n),null===n.blockedOn&&Rt.shift()}var Gt=S.ReactCurrentBatchConfig,Ut=!0;function qt(e,t,n,r){var i=bt,a=Gt.transition;Gt.transition=null;try{bt=1,$t(e,t,n,r)}finally{bt=i,Gt.transition=a}}function Ht(e,t,n,r){var i=bt,a=Gt.transition;Gt.transition=null;try{bt=4,$t(e,t,n,r)}finally{bt=i,Gt.transition=a}}function $t(e,t,n,r){if(Ut){var i=Jt(e,t,n,r);if(null===i)Ur(e,t,r,Kt,n),Wt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return Ot=Lt(Ot,e,t,n,r,i),!0;case"dragenter":return Tt=Lt(Tt,e,t,n,r,i),!0;case"mouseover":return At=Lt(At,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return Nt.set(a,Lt(Nt.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,It.set(a,Lt(It.get(a)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Wt(e,r),4&t&&-1<Ft.indexOf(e)){for(;null!==i;){var a=bi(i);if(null!==a&&Ct(a),null===(a=Jt(e,t,n,r))&&Ur(e,t,r,Kt,n),a===i)break;i=a}null!==i&&r.stopPropagation()}else Ur(e,t,r,null,n)}}var Kt=null;function Jt(e,t,n,r){if(Kt=null,null!==(e=gi(e=Ce(r))))if(null===(t=ze(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=Ge(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Kt=e,null}function Qt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Xe()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Yt=null,Xt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Xt,r=n.length,i="value"in Yt?Yt.value:Yt.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[a-t];t++);return Zt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function an(e){function t(t,n,r,i,a){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return D(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,ln,un,sn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cn=an(sn),fn=D({},sn,{view:0,detail:0}),hn=an(fn),dn=D({},fn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:En,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==un&&(un&&"mousemove"===e.type?(on=e.screenX-un.screenX,ln=e.screenY-un.screenY):ln=on=0,un=e),on)},movementY:function(e){return"movementY"in e?e.movementY:ln}}),pn=an(dn),vn=an(D({},dn,{dataTransfer:0})),mn=an(D({},fn,{relatedTarget:0})),yn=an(D({},sn,{animationName:0,elapsedTime:0,pseudoElement:0})),gn=D({},sn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),bn=an(gn),Sn=an(D({},sn,{data:0})),Cn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},wn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},kn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function _n(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=kn[e])&&!!t[e]}function En(){return _n}var xn=D({},fn,{key:function(e){if(e.key){var t=Cn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?wn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:En,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Pn=an(xn),On=an(D({},dn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Tn=an(D({},fn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:En})),An=an(D({},sn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Nn=D({},dn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),In=an(Nn),Rn=[9,13,27,32],Fn=c&&"CompositionEvent"in window,Wn=null;c&&"documentMode"in document&&(Wn=document.documentMode);var Ln=c&&"TextEvent"in window&&!Wn,Dn=c&&(!Fn||Wn&&8<Wn&&11>=Wn),jn=String.fromCharCode(32),Mn=!1;function Vn(e,t){switch(e){case"keyup":return-1!==Rn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Bn(e){return"object"==typeof(e=e.detail)&&"data"in e?e.data:null}var zn=!1,Gn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Un(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Gn[e.type]:"textarea"===t}function qn(e,t,n,r){xe(r),0<(t=Hr(t,"onChange")).length&&(n=new cn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Hn=null,$n=null;function Kn(e){jr(e,0)}function Jn(e){if($(Si(e)))return e}function Qn(e,t){if("change"===e)return t}var Yn=!1;if(c){var Xn;if(c){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"==typeof er.oninput}Xn=Zn}else Xn=!1;Yn=Xn&&(!document.documentMode||9<document.documentMode)}function tr(){Hn&&(Hn.detachEvent("onpropertychange",nr),$n=Hn=null)}function nr(e){if("value"===e.propertyName&&Jn($n)){var t=[];qn(t,$n,e,Ce(e)),Ne(Kn,t)}}function rr(e,t,n){"focusin"===e?(tr(),$n=n,(Hn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Jn($n)}function ar(e,t){if("click"===e)return Jn(t)}function or(e,t){if("input"===e||"change"===e)return Jn(t)}var lr="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t};function ur(e,t){if(lr(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!f.call(t,i)||!lr(e[i],t[i]))return!1}return!0}function sr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function cr(e,t){var n,r=sr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=sr(r)}}function fr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?fr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hr(){for(var e=window,t=K();t instanceof e.HTMLIFrameElement;){try{var n="string"==typeof t.contentWindow.location.href}catch(e){n=!1}if(!n)break;t=K((e=t.contentWindow).document)}return t}function dr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=hr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&fr(n.ownerDocument.documentElement,n)){if(null!==r&&dr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,a=Math.min(r.start,i);r=void 0===r.end?a:Math.min(r.end,i),!e.extend&&a>r&&(i=r,r=a,a=i),i=cr(n,a);var o=cr(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"==typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var vr=c&&"documentMode"in document&&11>=document.documentMode,mr=null,yr=null,gr=null,br=!1;function Sr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;br||null==mr||mr!==K(r)||(r="selectionStart"in(r=mr)&&dr(r)?{start:r.selectionStart,end:r.selectionEnd}:{anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},gr&&ur(gr,r)||(gr=r,0<(r=Hr(yr,"onSelect")).length&&(t=new cn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=mr)))}function Cr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var wr={animationend:Cr("Animation","AnimationEnd"),animationiteration:Cr("Animation","AnimationIteration"),animationstart:Cr("Animation","AnimationStart"),transitionend:Cr("Transition","TransitionEnd")},kr={},_r={};function Er(e){if(kr[e])return kr[e];if(!wr[e])return e;var t,n=wr[e];for(t in n)if(n.hasOwnProperty(t)&&t in _r)return kr[e]=n[t];return e}c&&(_r=document.createElement("div").style,"AnimationEvent"in window||(delete wr.animationend.animation,delete wr.animationiteration.animation,delete wr.animationstart.animation),"TransitionEvent"in window||delete wr.transitionend.transition);var xr=Er("animationend"),Pr=Er("animationiteration"),Or=Er("animationstart"),Tr=Er("transitionend"),Ar=new Map,Nr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ir(e,t){Ar.set(e,t),u(t,[e])}for(var Rr=0;Rr<Nr.length;Rr++){var Fr=Nr[Rr];Ir(Fr.toLowerCase(),"on"+(Fr[0].toUpperCase()+Fr.slice(1)))}Ir(xr,"onAnimationEnd"),Ir(Pr,"onAnimationIteration"),Ir(Or,"onAnimationStart"),Ir("dblclick","onDoubleClick"),Ir("focusin","onFocus"),Ir("focusout","onBlur"),Ir(Tr,"onTransitionEnd"),s("onMouseEnter",["mouseout","mouseover"]),s("onMouseLeave",["mouseout","mouseover"]),s("onPointerEnter",["pointerout","pointerover"]),s("onPointerLeave",["pointerout","pointerover"]),u("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),u("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),u("onBeforeInput",["compositionend","keypress","textInput","paste"]),u("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Wr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Lr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Wr));function Dr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,l,u,s){if(Be.apply(this,arguments),Le){if(!Le)throw Error(a(198));var c=De;Le=!1,De=null,je||(je=!0,Me=c)}}(r,t,void 0,e),e.currentTarget=null}function jr(e,t){t=0!=(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var l=r[o],u=l.instance,s=l.currentTarget;if(l=l.listener,u!==a&&i.isPropagationStopped())break e;Dr(i,l,s),a=u}else for(o=0;o<r.length;o++){if(u=(l=r[o]).instance,s=l.currentTarget,l=l.listener,u!==a&&i.isPropagationStopped())break e;Dr(i,l,s),a=u}}}if(je)throw e=Me,je=!1,Me=null,e}function Mr(e,t){var n=t[vi];void 0===n&&(n=t[vi]=new Set);var r=e+"__bubble";n.has(r)||(Gr(t,e,2,!1),n.add(r))}function Vr(e,t,n){var r=0;t&&(r|=4),Gr(n,e,r,t)}var Br="_reactListening"+Math.random().toString(36).slice(2);function zr(e){if(!e[Br]){e[Br]=!0,o.forEach((function(t){"selectionchange"!==t&&(Lr.has(t)||Vr(t,!1,e),Vr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Br]||(t[Br]=!0,Vr("selectionchange",!1,t))}}function Gr(e,t,n,r){switch(Qt(t)){case 1:var i=qt;break;case 4:i=Ht;break;default:i=$t}n=i.bind(null,t,n,e),i=void 0,!Re||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Ur(e,t,n,r,i){var a=r;if(0==(1&t)&&0==(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var l=r.stateNode.containerInfo;if(l===i||8===l.nodeType&&l.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var u=o.tag;if((3===u||4===u)&&((u=o.stateNode.containerInfo)===i||8===u.nodeType&&u.parentNode===i))return;o=o.return}for(;null!==l;){if(null===(o=gi(l)))return;if(5===(u=o.tag)||6===u){r=a=o;continue e}l=l.parentNode}}r=r.return}Ne((function(){var r=a,i=Ce(n),o=[];e:{var l=Ar.get(e);if(void 0!==l){var u=cn,s=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":u=Pn;break;case"focusin":s="focus",u=mn;break;case"focusout":s="blur",u=mn;break;case"beforeblur":case"afterblur":u=mn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":u=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":u=vn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":u=Tn;break;case xr:case Pr:case Or:u=yn;break;case Tr:u=An;break;case"scroll":u=hn;break;case"wheel":u=In;break;case"copy":case"cut":case"paste":u=bn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":u=On}var c=0!=(4&t),f=!c&&"scroll"===e,h=c?null!==l?l+"Capture":null:l;c=[];for(var d,p=r;null!==p;){var v=(d=p).stateNode;if(5===d.tag&&null!==v&&(d=v,null!==h&&null!=(v=Ie(p,h))&&c.push(qr(p,v,d))),f)break;p=p.return}0<c.length&&(l=new u(l,s,null,n,i),o.push({event:l,listeners:c}))}}if(0==(7&t)){if(u="mouseout"===e||"pointerout"===e,(!(l="mouseover"===e||"pointerover"===e)||n===Se||!(s=n.relatedTarget||n.fromElement)||!gi(s)&&!s[pi])&&(u||l)&&(l=i.window===i?i:(l=i.ownerDocument)?l.defaultView||l.parentWindow:window,u?(u=r,null!==(s=(s=n.relatedTarget||n.toElement)?gi(s):null)&&(s!==(f=ze(s))||5!==s.tag&&6!==s.tag)&&(s=null)):(u=null,s=r),u!==s)){if(c=pn,v="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(c=On,v="onPointerLeave",h="onPointerEnter",p="pointer"),f=null==u?l:Si(u),d=null==s?l:Si(s),(l=new c(v,p+"leave",u,n,i)).target=f,l.relatedTarget=d,v=null,gi(i)===r&&((c=new c(h,p+"enter",s,n,i)).target=d,c.relatedTarget=f,v=c),f=v,u&&s)e:{for(h=s,p=0,d=c=u;d;d=$r(d))p++;for(d=0,v=h;v;v=$r(v))d++;for(;0<p-d;)c=$r(c),p--;for(;0<d-p;)h=$r(h),d--;for(;p--;){if(c===h||null!==h&&c===h.alternate)break e;c=$r(c),h=$r(h)}c=null}else c=null;null!==u&&Kr(o,l,u,c,!1),null!==s&&null!==f&&Kr(o,f,s,c,!0)}if("select"===(u=(l=r?Si(r):window).nodeName&&l.nodeName.toLowerCase())||"input"===u&&"file"===l.type)var m=Qn;else if(Un(l))if(Yn)m=or;else{m=ir;var y=rr}else(u=l.nodeName)&&"input"===u.toLowerCase()&&("checkbox"===l.type||"radio"===l.type)&&(m=ar);switch(m&&(m=m(e,r))?qn(o,m,n,i):(y&&y(e,l,r),"focusout"===e&&(y=l._wrapperState)&&y.controlled&&"number"===l.type&&ee(l,"number",l.value)),y=r?Si(r):window,e){case"focusin":(Un(y)||"true"===y.contentEditable)&&(mr=y,yr=r,gr=null);break;case"focusout":gr=yr=mr=null;break;case"mousedown":br=!0;break;case"contextmenu":case"mouseup":case"dragend":br=!1,Sr(o,n,i);break;case"selectionchange":if(vr)break;case"keydown":case"keyup":Sr(o,n,i)}var g;if(Fn)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else zn?Vn(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(Dn&&"ko"!==n.locale&&(zn||"onCompositionStart"!==b?"onCompositionEnd"===b&&zn&&(g=en()):(Xt="value"in(Yt=i)?Yt.value:Yt.textContent,zn=!0)),0<(y=Hr(r,b)).length&&(b=new Sn(b,e,null,n,i),o.push({event:b,listeners:y}),(g||null!==(g=Bn(n)))&&(b.data=g))),(g=Ln?function(e,t){switch(e){case"compositionend":return Bn(t);case"keypress":return 32!==t.which?null:(Mn=!0,jn);case"textInput":return(e=t.data)===jn&&Mn?null:e;default:return null}}(e,n):function(e,t){if(zn)return"compositionend"===e||!Fn&&Vn(e,t)?(e=en(),Zt=Xt=Yt=null,zn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Dn&&"ko"!==t.locale?null:t.data}}(e,n))&&0<(r=Hr(r,"onBeforeInput")).length&&(i=new Sn("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=g)}jr(o,t)}))}function qr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Hr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,a=i.stateNode;5===i.tag&&null!==a&&(i=a,null!=(a=Ie(e,n))&&r.unshift(qr(e,a,i)),null!=(a=Ie(e,t))&&r.push(qr(e,a,i))),e=e.return}return r}function $r(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Kr(e,t,n,r,i){for(var a=t._reactName,o=[];null!==n&&n!==r;){var l=n,u=l.alternate,s=l.stateNode;if(null!==u&&u===r)break;5===l.tag&&null!==s&&(l=s,i?null!=(u=Ie(n,a))&&o.unshift(qr(n,u,l)):i||null!=(u=Ie(n,a))&&o.push(qr(n,u,l))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Jr=/\r\n?/g,Qr=/\u0000|\uFFFD/g;function Yr(e){return("string"==typeof e?e:""+e).replace(Jr,"\n").replace(Qr,"")}function Xr(e,t,n){if(t=Yr(t),Yr(e)!==t&&n)throw Error(a(425))}function Zr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"==typeof t.children||"number"==typeof t.children||"object"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"==typeof setTimeout?setTimeout:void 0,ii="function"==typeof clearTimeout?clearTimeout:void 0,ai="function"==typeof Promise?Promise:void 0,oi="function"==typeof queueMicrotask?queueMicrotask:void 0!==ai?function(e){return ai.resolve(null).then(e).catch(li)}:ri;function li(e){setTimeout((function(){throw e}))}function ui(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void zt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);zt(t)}function si(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ci(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var fi=Math.random().toString(36).slice(2),hi="__reactFiber$"+fi,di="__reactProps$"+fi,pi="__reactContainer$"+fi,vi="__reactEvents$"+fi,mi="__reactListeners$"+fi,yi="__reactHandles$"+fi;function gi(e){var t=e[hi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pi]||n[hi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ci(e);null!==e;){if(n=e[hi])return n;e=ci(e)}return t}n=(e=n).parentNode}return null}function bi(e){return!(e=e[hi]||e[pi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function Si(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function Ci(e){return e[di]||null}var wi=[],ki=-1;function _i(e){return{current:e}}function Ei(e){0>ki||(e.current=wi[ki],wi[ki]=null,ki--)}function xi(e,t){ki++,wi[ki]=e.current,e.current=t}var Pi={},Oi=_i(Pi),Ti=_i(!1),Ai=Pi;function Ni(e,t){var n=e.type.contextTypes;if(!n)return Pi;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Ii(e){return null!=e.childContextTypes}function Ri(){Ei(Ti),Ei(Oi)}function Fi(e,t,n){if(Oi.current!==Pi)throw Error(a(168));xi(Oi,t),xi(Ti,n)}function Wi(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!=typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(a(108,G(e)||"Unknown",i));return D({},n,r)}function Li(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Pi,Ai=Oi.current,xi(Oi,e),xi(Ti,Ti.current),!0}function Di(e,t,n){var r=e.stateNode;if(!r)throw Error(a(169));n?(e=Wi(e,t,Ai),r.__reactInternalMemoizedMergedChildContext=e,Ei(Ti),Ei(Oi),xi(Oi,e)):Ei(Ti),xi(Ti,n)}var ji=null,Mi=!1,Vi=!1;function Bi(e){null===ji?ji=[e]:ji.push(e)}function zi(){if(!Vi&&null!==ji){Vi=!0;var e=0,t=bt;try{var n=ji;for(bt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}ji=null,Mi=!1}catch(t){throw null!==ji&&(ji=ji.slice(e+1)),$e(Ze,zi),t}finally{bt=t,Vi=!1}}return null}var Gi=S.ReactCurrentBatchConfig;function Ui(e,t){if(e&&e.defaultProps){for(var n in t=D({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var qi=_i(null),Hi=null,$i=null,Ki=null;function Ji(){Ki=$i=Hi=null}function Qi(e){var t=qi.current;Ei(qi),e._currentValue=t}function Yi(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Xi(e,t){Hi=e,Ki=$i=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!=(e.lanes&t)&&(Cl=!0),e.firstContext=null)}function Zi(e){var t=e._currentValue;if(Ki!==e)if(e={context:e,memoizedValue:t,next:null},null===$i){if(null===Hi)throw Error(a(308));$i=e,Hi.dependencies={lanes:0,firstContext:e}}else $i=$i.next=e;return t}var ea=null,ta=!1;function na(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ra(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function ia(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function aa(e,t){var n=e.updateQueue;null!==n&&(n=n.shared,ts(e)?(null===(e=n.interleaved)?(t.next=t,null===ea?ea=[n]:ea.push(n)):(t.next=e.next,e.next=t),n.interleaved=t):(null===(e=n.pending)?t.next=t:(t.next=e.next,e.next=t),n.pending=t))}function oa(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!=(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,gt(e,n)}}function la(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?i=a=o:a=a.next=o,n=n.next}while(null!==n);null===a?i=a=t:a=a.next=t}else i=a=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function ua(e,t,n,r){var i=e.updateQueue;ta=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,l=i.shared.pending;if(null!==l){i.shared.pending=null;var u=l,s=u.next;u.next=null,null===o?a=s:o.next=s,o=u;var c=e.alternate;null!==c&&(l=(c=c.updateQueue).lastBaseUpdate)!==o&&(null===l?c.firstBaseUpdate=s:l.next=s,c.lastBaseUpdate=u)}if(null!==a){var f=i.baseState;for(o=0,c=s=u=null,l=a;;){var h=l.lane,d=l.eventTime;if((r&h)===h){null!==c&&(c=c.next={eventTime:d,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var p=e,v=l;switch(h=t,d=n,v.tag){case 1:if("function"==typeof(p=v.payload)){f=p.call(d,f,h);break e}f=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null==(h="function"==typeof(p=v.payload)?p.call(d,f,h):p))break e;f=D({},f,h);break e;case 2:ta=!0}}null!==l.callback&&0!==l.lane&&(e.flags|=64,null===(h=i.effects)?i.effects=[l]:h.push(l))}else d={eventTime:d,lane:h,tag:l.tag,payload:l.payload,callback:l.callback,next:null},null===c?(s=c=d,u=f):c=c.next=d,o|=h;if(null===(l=l.next)){if(null===(l=i.shared.pending))break;l=(h=l).next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}if(null===c&&(u=f),i.baseState=u,i.firstBaseUpdate=s,i.lastBaseUpdate=c,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===a&&(i.shared.lanes=0);Ru|=o,e.lanes=o,e.memoizedState=f}}function sa(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!=typeof i)throw Error(a(191,i));i.call(r)}}}var ca=(new r.Component).refs;function fa(e,t,n,r){n=null==(n=n(r,t=e.memoizedState))?t:D({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var ha={isMounted:function(e){return!!(e=e._reactInternals)&&ze(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Yu(),i=Xu(e),a=ia(r,i);a.payload=t,null!=n&&(a.callback=n),aa(e,a),null!==(t=Zu(e,i,r))&&oa(t,e,i)},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Yu(),i=Xu(e),a=ia(r,i);a.tag=1,a.payload=t,null!=n&&(a.callback=n),aa(e,a),null!==(t=Zu(e,i,r))&&oa(t,e,i)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Yu(),r=Xu(e),i=ia(n,r);i.tag=2,null!=t&&(i.callback=t),aa(e,i),null!==(t=Zu(e,r,n))&&oa(t,e,r)}};function da(e,t,n,r,i,a,o){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,o):!(t.prototype&&t.prototype.isPureReactComponent&&ur(n,r)&&ur(i,a))}function pa(e,t,n){var r=!1,i=Pi,a=t.contextType;return"object"==typeof a&&null!==a?a=Zi(a):(i=Ii(t)?Ai:Oi.current,a=(r=null!=(r=t.contextTypes))?Ni(e,i):Pi),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ha,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function va(e,t,n,r){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ha.enqueueReplaceState(t,t.state,null)}function ma(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=ca,na(e);var a=t.contextType;"object"==typeof a&&null!==a?i.context=Zi(a):(a=Ii(t)?Ai:Oi.current,i.context=Ni(e,a)),i.state=e.memoizedState,"function"==typeof(a=t.getDerivedStateFromProps)&&(fa(e,t,a,n),i.state=e.memoizedState),"function"==typeof t.getDerivedStateFromProps||"function"==typeof i.getSnapshotBeforeUpdate||"function"!=typeof i.UNSAFE_componentWillMount&&"function"!=typeof i.componentWillMount||(t=i.state,"function"==typeof i.componentWillMount&&i.componentWillMount(),"function"==typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&ha.enqueueReplaceState(i,i.state,null),ua(e,n,i,r),i.state=e.memoizedState),"function"==typeof i.componentDidMount&&(e.flags|=4194308)}var ya=[],ga=0,ba=null,Sa=0,Ca=[],wa=0,ka=null,_a=1,Ea="";function xa(e,t){ya[ga++]=Sa,ya[ga++]=ba,ba=e,Sa=t}function Pa(e,t,n){Ca[wa++]=_a,Ca[wa++]=Ea,Ca[wa++]=ka,ka=e;var r=_a;e=Ea;var i=32-ot(r)-1;r&=~(1<<i),n+=1;var a=32-ot(t)+i;if(30<a){var o=i-i%5;a=(r&(1<<o)-1).toString(32),r>>=o,i-=o,_a=1<<32-ot(t)+i|n<<i|r,Ea=a+e}else _a=1<<a|n<<i|r,Ea=e}function Oa(e){null!==e.return&&(xa(e,1),Pa(e,1,0))}function Ta(e){for(;e===ba;)ba=ya[--ga],ya[ga]=null,Sa=ya[--ga],ya[ga]=null;for(;e===ka;)ka=Ca[--wa],Ca[wa]=null,Ea=Ca[--wa],Ca[wa]=null,_a=Ca[--wa],Ca[wa]=null}var Aa=null,Na=null,Ia=!1,Ra=null;function Fa(e,t){var n=As(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function Wa(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,Aa=e,Na=si(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,Aa=e,Na=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==ka?{id:_a,overflow:Ea}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=As(18,null,null,0)).stateNode=t,n.return=e,e.child=n,Aa=e,Na=null,!0);default:return!1}}function La(e){return 0!=(1&e.mode)&&0==(128&e.flags)}function Da(e){if(Ia){var t=Na;if(t){var n=t;if(!Wa(e,t)){if(La(e))throw Error(a(418));t=si(n.nextSibling);var r=Aa;t&&Wa(e,t)?Fa(r,n):(e.flags=-4097&e.flags|2,Ia=!1,Aa=e)}}else{if(La(e))throw Error(a(418));e.flags=-4097&e.flags|2,Ia=!1,Aa=e}}}function ja(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;Aa=e}function Ma(e){if(e!==Aa)return!1;if(!Ia)return ja(e),Ia=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=Na)){if(La(e)){for(e=Na;e;)e=si(e.nextSibling);throw Error(a(418))}for(;t;)Fa(e,t),t=si(t.nextSibling)}if(ja(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){Na=si(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}Na=null}}else Na=Aa?si(e.stateNode.nextSibling):null;return!0}function Va(){Na=Aa=null,Ia=!1}function Ba(e){null===Ra?Ra=[e]:Ra.push(e)}function za(e,t,n){if(null!==(e=n.ref)&&"function"!=typeof e&&"object"!=typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"==typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;t===ca&&(t=i.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!=typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function Ga(e,t){throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Ua(e){return(0,e._init)(e._payload)}function qa(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Is(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function l(t){return e&&null===t.alternate&&(t.flags|=2),t}function u(e,t,n,r){return null===t||6!==t.tag?((t=Ls(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function s(e,t,n,r){var a=n.type;return a===k?f(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===a||"object"==typeof a&&null!==a&&a.$$typeof===I&&Ua(a)===t.type)?((r=i(t,n.props)).ref=za(e,t,n),r.return=e,r):((r=Rs(n.type,n.key,n.props,null,e.mode,r)).ref=za(e,t,n),r.return=e,r)}function c(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Ds(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function f(e,t,n,r,a){return null===t||7!==t.tag?((t=Fs(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"==typeof t&&""!==t||"number"==typeof t)return(t=Ls(""+t,e.mode,n)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case C:return(n=Rs(t.type,t.key,t.props,null,e.mode,n)).ref=za(e,null,t),n.return=e,n;case w:return(t=Ds(t,e.mode,n)).return=e,t;case I:return h(e,(0,t._init)(t._payload),n)}if(te(t)||W(t))return(t=Fs(t,e.mode,n,null)).return=e,t;Ga(e,t)}return null}function d(e,t,n,r){var i=null!==t?t.key:null;if("string"==typeof n&&""!==n||"number"==typeof n)return null!==i?null:u(e,t,""+n,r);if("object"==typeof n&&null!==n){switch(n.$$typeof){case C:return n.key===i?s(e,t,n,r):null;case w:return n.key===i?c(e,t,n,r):null;case I:return d(e,t,(i=n._init)(n._payload),r)}if(te(n)||W(n))return null!==i?null:f(e,t,n,r,null);Ga(e,n)}return null}function p(e,t,n,r,i){if("string"==typeof r&&""!==r||"number"==typeof r)return u(t,e=e.get(n)||null,""+r,i);if("object"==typeof r&&null!==r){switch(r.$$typeof){case C:return s(t,e=e.get(null===r.key?n:r.key)||null,r,i);case w:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case I:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||W(r))return f(t,e=e.get(n)||null,r,i,null);Ga(t,r)}return null}function v(i,a,l,u){for(var s=null,c=null,f=a,v=a=0,m=null;null!==f&&v<l.length;v++){f.index>v?(m=f,f=null):m=f.sibling;var y=d(i,f,l[v],u);if(null===y){null===f&&(f=m);break}e&&f&&null===y.alternate&&t(i,f),a=o(y,a,v),null===c?s=y:c.sibling=y,c=y,f=m}if(v===l.length)return n(i,f),Ia&&xa(i,v),s;if(null===f){for(;v<l.length;v++)null!==(f=h(i,l[v],u))&&(a=o(f,a,v),null===c?s=f:c.sibling=f,c=f);return Ia&&xa(i,v),s}for(f=r(i,f);v<l.length;v++)null!==(m=p(f,i,v,l[v],u))&&(e&&null!==m.alternate&&f.delete(null===m.key?v:m.key),a=o(m,a,v),null===c?s=m:c.sibling=m,c=m);return e&&f.forEach((function(e){return t(i,e)})),Ia&&xa(i,v),s}function m(i,l,u,s){var c=W(u);if("function"!=typeof c)throw Error(a(150));if(null==(u=c.call(u)))throw Error(a(151));for(var f=c=null,v=l,m=l=0,y=null,g=u.next();null!==v&&!g.done;m++,g=u.next()){v.index>m?(y=v,v=null):y=v.sibling;var b=d(i,v,g.value,s);if(null===b){null===v&&(v=y);break}e&&v&&null===b.alternate&&t(i,v),l=o(b,l,m),null===f?c=b:f.sibling=b,f=b,v=y}if(g.done)return n(i,v),Ia&&xa(i,m),c;if(null===v){for(;!g.done;m++,g=u.next())null!==(g=h(i,g.value,s))&&(l=o(g,l,m),null===f?c=g:f.sibling=g,f=g);return Ia&&xa(i,m),c}for(v=r(i,v);!g.done;m++,g=u.next())null!==(g=p(v,i,m,g.value,s))&&(e&&null!==g.alternate&&v.delete(null===g.key?m:g.key),l=o(g,l,m),null===f?c=g:f.sibling=g,f=g);return e&&v.forEach((function(e){return t(i,e)})),Ia&&xa(i,m),c}return function e(r,a,o,u){if("object"==typeof o&&null!==o&&o.type===k&&null===o.key&&(o=o.props.children),"object"==typeof o&&null!==o){switch(o.$$typeof){case C:e:{for(var s=o.key,c=a;null!==c;){if(c.key===s){if((s=o.type)===k){if(7===c.tag){n(r,c.sibling),(a=i(c,o.props.children)).return=r,r=a;break e}}else if(c.elementType===s||"object"==typeof s&&null!==s&&s.$$typeof===I&&Ua(s)===c.type){n(r,c.sibling),(a=i(c,o.props)).ref=za(r,c,o),a.return=r,r=a;break e}n(r,c);break}t(r,c),c=c.sibling}o.type===k?((a=Fs(o.props.children,r.mode,u,o.key)).return=r,r=a):((u=Rs(o.type,o.key,o.props,null,r.mode,u)).ref=za(r,a,o),u.return=r,r=u)}return l(r);case w:e:{for(c=o.key;null!==a;){if(a.key===c){if(4===a.tag&&a.stateNode.containerInfo===o.containerInfo&&a.stateNode.implementation===o.implementation){n(r,a.sibling),(a=i(a,o.children||[])).return=r,r=a;break e}n(r,a);break}t(r,a),a=a.sibling}(a=Ds(o,r.mode,u)).return=r,r=a}return l(r);case I:return e(r,a,(c=o._init)(o._payload),u)}if(te(o))return v(r,a,o,u);if(W(o))return m(r,a,o,u);Ga(r,o)}return"string"==typeof o&&""!==o||"number"==typeof o?(o=""+o,null!==a&&6===a.tag?(n(r,a.sibling),(a=i(a,o)).return=r,r=a):(n(r,a),(a=Ls(o,r.mode,u)).return=r,r=a),l(r)):n(r,a)}}var Ha=qa(!0),$a=qa(!1),Ka={},Ja=_i(Ka),Qa=_i(Ka),Ya=_i(Ka);function Xa(e){if(e===Ka)throw Error(a(174));return e}function Za(e,t){switch(xi(Ya,t),xi(Qa,e),xi(Ja,Ka),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ue(null,"");break;default:t=ue(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ei(Ja),xi(Ja,t)}function eo(){Ei(Ja),Ei(Qa),Ei(Ya)}function to(e){Xa(Ya.current);var t=Xa(Ja.current),n=ue(t,e.type);t!==n&&(xi(Qa,e),xi(Ja,n))}function no(e){Qa.current===e&&(Ei(Ja),Ei(Qa))}var ro=_i(0);function io(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!=(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ao=[];function oo(){for(var e=0;e<ao.length;e++)ao[e]._workInProgressVersionPrimary=null;ao.length=0}var lo=S.ReactCurrentDispatcher,uo=S.ReactCurrentBatchConfig,so=0,co=null,fo=null,ho=null,po=!1,vo=!1,mo=0,yo=0;function go(){throw Error(a(321))}function bo(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!lr(e[n],t[n]))return!1;return!0}function So(e,t,n,r,i,o){if(so=o,co=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,lo.current=null===e||null===e.memoizedState?rl:il,e=n(r,i),vo){o=0;do{if(vo=!1,mo=0,25<=o)throw Error(a(301));o+=1,ho=fo=null,t.updateQueue=null,lo.current=al,e=n(r,i)}while(vo)}if(lo.current=nl,t=null!==fo&&null!==fo.next,so=0,ho=fo=co=null,po=!1,t)throw Error(a(300));return e}function Co(){var e=0!==mo;return mo=0,e}function wo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===ho?co.memoizedState=ho=e:ho=ho.next=e,ho}function ko(){if(null===fo){var e=co.alternate;e=null!==e?e.memoizedState:null}else e=fo.next;var t=null===ho?co.memoizedState:ho.next;if(null!==t)ho=t,fo=e;else{if(null===e)throw Error(a(310));e={memoizedState:(fo=e).memoizedState,baseState:fo.baseState,baseQueue:fo.baseQueue,queue:fo.queue,next:null},null===ho?co.memoizedState=ho=e:ho=ho.next=e}return ho}function _o(e,t){return"function"==typeof t?t(e):t}function Eo(e){var t=ko(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=fo,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var l=i.next;i.next=o.next,o.next=l}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var u=l=null,s=null,c=o;do{var f=c.lane;if((so&f)===f)null!==s&&(s=s.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:e(r,c.action);else{var h={lane:f,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};null===s?(u=s=h,l=r):s=s.next=h,co.lanes|=f,Ru|=f}c=c.next}while(null!==c&&c!==o);null===s?l=r:s.next=u,lr(r,t.memoizedState)||(Cl=!0),t.memoizedState=r,t.baseState=l,t.baseQueue=s,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,co.lanes|=o,Ru|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function xo(e){var t=ko(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var l=i=i.next;do{o=e(o,l.action),l=l.next}while(l!==i);lr(o,t.memoizedState)||(Cl=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Po(){}function Oo(e,t){var n=co,r=ko(),i=t(),o=!lr(r.memoizedState,i);if(o&&(r.memoizedState=i,Cl=!0),r=r.queue,Mo(No.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==ho&&1&ho.memoizedState.tag){if(n.flags|=2048,Fo(9,Ao.bind(null,n,r,i,t),void 0,null),null===xu)throw Error(a(349));0!=(30&so)||To(n,t,i)}return i}function To(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=co.updateQueue)?(t={lastEffect:null,stores:null},co.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Ao(e,t,n,r){t.value=n,t.getSnapshot=r,Io(t)&&Zu(e,1,-1)}function No(e,t,n){return n((function(){Io(t)&&Zu(e,1,-1)}))}function Io(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!lr(e,n)}catch(e){return!0}}function Ro(e){var t=wo();return"function"==typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:_o,lastRenderedState:e},t.queue=e,e=e.dispatch=Yo.bind(null,co,e),[t.memoizedState,e]}function Fo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=co.updateQueue)?(t={lastEffect:null,stores:null},co.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Wo(){return ko().memoizedState}function Lo(e,t,n,r){var i=wo();co.flags|=e,i.memoizedState=Fo(1|t,n,void 0,void 0===r?null:r)}function Do(e,t,n,r){var i=ko();r=void 0===r?null:r;var a=void 0;if(null!==fo){var o=fo.memoizedState;if(a=o.destroy,null!==r&&bo(r,o.deps))return void(i.memoizedState=Fo(t,n,a,r))}co.flags|=e,i.memoizedState=Fo(1|t,n,a,r)}function jo(e,t){return Lo(8390656,8,e,t)}function Mo(e,t){return Do(2048,8,e,t)}function Vo(e,t){return Do(4,2,e,t)}function Bo(e,t){return Do(4,4,e,t)}function zo(e,t){return"function"==typeof t?(e=e(),t(e),function(){t(null)}):null!=t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Go(e,t,n){return n=null!=n?n.concat([e]):null,Do(4,4,zo.bind(null,t,e),n)}function Uo(){}function qo(e,t){var n=ko();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&bo(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Ho(e,t){var n=ko();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&bo(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function $o(e,t,n){return 0==(21&so)?(e.baseState&&(e.baseState=!1,Cl=!0),e.memoizedState=n):(lr(n,t)||(n=vt(),co.lanes|=n,Ru|=n,e.baseState=!0),t)}function Ko(e,t){var n=bt;bt=0!==n&&4>n?n:4,e(!0);var r=uo.transition;uo.transition={};try{e(!1),t()}finally{bt=n,uo.transition=r}}function Jo(){return ko().memoizedState}function Qo(e,t,n){var r=Xu(e);n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Xo(e)?Zo(t,n):(el(e,t,n),null!==(e=Zu(e,r,n=Yu()))&&tl(e,t,r))}function Yo(e,t,n){var r=Xu(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Xo(e))Zo(t,i);else{el(e,t,i);var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var o=t.lastRenderedState,l=a(o,n);if(i.hasEagerState=!0,i.eagerState=l,lr(l,o))return}catch(e){}null!==(e=Zu(e,r,n=Yu()))&&tl(e,t,r)}}function Xo(e){var t=e.alternate;return e===co||null!==t&&t===co}function Zo(e,t){vo=po=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function el(e,t,n){ts(e)?(null===(e=t.interleaved)?(n.next=n,null===ea?ea=[t]:ea.push(t)):(n.next=e.next,e.next=n),t.interleaved=n):(null===(e=t.pending)?n.next=n:(n.next=e.next,e.next=n),t.pending=n)}function tl(e,t,n){if(0!=(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,gt(e,n)}}var nl={readContext:Zi,useCallback:go,useContext:go,useEffect:go,useImperativeHandle:go,useInsertionEffect:go,useLayoutEffect:go,useMemo:go,useReducer:go,useRef:go,useState:go,useDebugValue:go,useDeferredValue:go,useTransition:go,useMutableSource:go,useSyncExternalStore:go,useId:go,unstable_isNewReconciler:!1},rl={readContext:Zi,useCallback:function(e,t){return wo().memoizedState=[e,void 0===t?null:t],e},useContext:Zi,useEffect:jo,useImperativeHandle:function(e,t,n){return n=null!=n?n.concat([e]):null,Lo(4194308,4,zo.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Lo(4194308,4,e,t)},useInsertionEffect:function(e,t){return Lo(4,2,e,t)},useMemo:function(e,t){var n=wo();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=wo();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Qo.bind(null,co,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},wo().memoizedState=e},useState:Ro,useDebugValue:Uo,useDeferredValue:function(e){return wo().memoizedState=e},useTransition:function(){var e=Ro(!1),t=e[0];return e=Ko.bind(null,e[1]),wo().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=co,i=wo();if(Ia){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===xu)throw Error(a(349));0!=(30&so)||To(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,jo(No.bind(null,r,o,e),[e]),r.flags|=2048,Fo(9,Ao.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=wo(),t=xu.identifierPrefix;if(Ia){var n=Ea;t=":"+t+"R"+(n=(_a&~(1<<32-ot(_a)-1)).toString(32)+n),0<(n=mo++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=yo++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},il={readContext:Zi,useCallback:qo,useContext:Zi,useEffect:Mo,useImperativeHandle:Go,useInsertionEffect:Vo,useLayoutEffect:Bo,useMemo:Ho,useReducer:Eo,useRef:Wo,useState:function(){return Eo(_o)},useDebugValue:Uo,useDeferredValue:function(e){return $o(ko(),fo.memoizedState,e)},useTransition:function(){return[Eo(_o)[0],ko().memoizedState]},useMutableSource:Po,useSyncExternalStore:Oo,useId:Jo,unstable_isNewReconciler:!1},al={readContext:Zi,useCallback:qo,useContext:Zi,useEffect:Mo,useImperativeHandle:Go,useInsertionEffect:Vo,useLayoutEffect:Bo,useMemo:Ho,useReducer:xo,useRef:Wo,useState:function(){return xo(_o)},useDebugValue:Uo,useDeferredValue:function(e){var t=ko();return null===fo?t.memoizedState=e:$o(t,fo.memoizedState,e)},useTransition:function(){return[xo(_o)[0],ko().memoizedState]},useMutableSource:Po,useSyncExternalStore:Oo,useId:Jo,unstable_isNewReconciler:!1};function ol(e,t){try{var n="",r=t;do{n+=B(r),r=r.return}while(r);var i=n}catch(e){i="\nError generating stack: "+e.message+"\n"+e.stack}return{value:e,source:t,stack:i}}function ll(e,t){try{console.error(t.value)}catch(e){setTimeout((function(){throw e}))}}var ul,sl,cl,fl="function"==typeof WeakMap?WeakMap:Map;function hl(e,t,n){(n=ia(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Bu||(Bu=!0,zu=r),ll(0,t)},n}function dl(e,t,n){(n=ia(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"==typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){ll(0,t)}}var a=e.stateNode;return null!==a&&"function"==typeof a.componentDidCatch&&(n.callback=function(){ll(0,t),"function"!=typeof r&&(null===Gu?Gu=new Set([this]):Gu.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function pl(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new fl;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=_s.bind(null,e,t,n),t.then(e,e))}function vl(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function ml(e,t,n,r,i){return 0==(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=ia(-1,1)).tag=2,aa(n,t))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}function yl(e,t){if(!Ia)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function gl(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function bl(e,t,n){var r=t.pendingProps;switch(Ta(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return gl(t),null;case 1:case 17:return Ii(t.type)&&Ri(),gl(t),null;case 3:return r=t.stateNode,eo(),Ei(Ti),Ei(Oi),oo(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(Ma(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0==(256&t.flags)||(t.flags|=1024,null!==Ra&&(as(Ra),Ra=null))),gl(t),null;case 5:no(t);var i=Xa(Ya.current);if(n=t.type,null!==e&&null!=t.stateNode)sl(e,t,n,r),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(a(166));return gl(t),null}if(e=Xa(Ja.current),Ma(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[hi]=t,r[di]=o,e=0!=(1&t.mode),n){case"dialog":Mr("cancel",r),Mr("close",r);break;case"iframe":case"object":case"embed":Mr("load",r);break;case"video":case"audio":for(i=0;i<Wr.length;i++)Mr(Wr[i],r);break;case"source":Mr("error",r);break;case"img":case"image":case"link":Mr("error",r),Mr("load",r);break;case"details":Mr("toggle",r);break;case"input":Q(r,o),Mr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Mr("invalid",r);break;case"textarea":ie(r,o),Mr("invalid",r)}for(var u in ge(n,o),i=null,o)if(o.hasOwnProperty(u)){var s=o[u];"children"===u?"string"==typeof s?r.textContent!==s&&(!0!==o.suppressHydrationWarning&&Xr(r.textContent,s,e),i=["children",s]):"number"==typeof s&&r.textContent!==""+s&&(!0!==o.suppressHydrationWarning&&Xr(r.textContent,s,e),i=["children",""+s]):l.hasOwnProperty(u)&&null!=s&&"onScroll"===u&&Mr("scroll",r)}switch(n){case"input":H(r),Z(r,o,!0);break;case"textarea":H(r),oe(r);break;case"select":case"option":break;default:"function"==typeof o.onClick&&(r.onclick=Zr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{u=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=le(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=u.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"==typeof r.is?e=u.createElement(n,{is:r.is}):(e=u.createElement(n),"select"===n&&(u=e,r.multiple?u.multiple=!0:r.size&&(u.size=r.size))):e=u.createElementNS(e,n),e[hi]=t,e[di]=r,ul(e,t),t.stateNode=e;e:{switch(u=be(n,r),n){case"dialog":Mr("cancel",e),Mr("close",e),i=r;break;case"iframe":case"object":case"embed":Mr("load",e),i=r;break;case"video":case"audio":for(i=0;i<Wr.length;i++)Mr(Wr[i],e);i=r;break;case"source":Mr("error",e),i=r;break;case"img":case"image":case"link":Mr("error",e),Mr("load",e),i=r;break;case"details":Mr("toggle",e),i=r;break;case"input":Q(e,r),i=J(e,r),Mr("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=D({},r,{value:void 0}),Mr("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Mr("invalid",e)}for(o in ge(n,i),s=i)if(s.hasOwnProperty(o)){var c=s[o];"style"===o?me(e,c):"dangerouslySetInnerHTML"===o?null!=(c=c?c.__html:void 0)&&fe(e,c):"children"===o?"string"==typeof c?("textarea"!==n||""!==c)&&he(e,c):"number"==typeof c&&he(e,""+c):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(l.hasOwnProperty(o)?null!=c&&"onScroll"===o&&Mr("scroll",e):null!=c&&b(e,o,c,u))}switch(n){case"input":H(e),Z(e,r,!1);break;case"textarea":H(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+U(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"==typeof i.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return gl(t),null;case 6:if(e&&null!=t.stateNode)cl(0,t,e.memoizedProps,r);else{if("string"!=typeof r&&null===t.stateNode)throw Error(a(166));if(n=Xa(Ya.current),Xa(Ja.current),Ma(t)){if(r=t.stateNode,n=t.memoizedProps,r[hi]=t,(o=r.nodeValue!==n)&&null!==(e=Aa))switch(e.tag){case 3:Xr(r.nodeValue,n,0!=(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Xr(r.nodeValue,n,0!=(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[hi]=t,t.stateNode=r}return gl(t),null;case 13:if(Ei(ro),r=t.memoizedState,Ia&&null!==Na&&0!=(1&t.mode)&&0==(128&t.flags)){for(r=Na;r;)r=si(r.nextSibling);return Va(),t.flags|=98560,t}if(null!==r&&null!==r.dehydrated){if(r=Ma(t),null===e){if(!r)throw Error(a(318));if(!(r=null!==(r=t.memoizedState)?r.dehydrated:null))throw Error(a(317));r[hi]=t}else Va(),0==(128&t.flags)&&(t.memoizedState=null),t.flags|=4;return gl(t),null}return null!==Ra&&(as(Ra),Ra=null),0!=(128&t.flags)?(t.lanes=n,t):(r=null!==r,n=!1,null===e?Ma(t):n=null!==e.memoizedState,r!==n&&r&&(t.child.flags|=8192,0!=(1&t.mode)&&(null===e||0!=(1&ro.current)?0===Nu&&(Nu=3):ps())),null!==t.updateQueue&&(t.flags|=4),gl(t),null);case 4:return eo(),null===e&&zr(t.stateNode.containerInfo),gl(t),null;case 10:return Qi(t.type._context),gl(t),null;case 19:if(Ei(ro),null===(o=t.memoizedState))return gl(t),null;if(r=0!=(128&t.flags),null===(u=o.rendering))if(r)yl(o,!1);else{if(0!==Nu||null!==e&&0!=(128&e.flags))for(e=t.child;null!==e;){if(null!==(u=io(e))){for(t.flags|=128,yl(o,!1),null!==(r=u.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(u=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=u.childLanes,o.lanes=u.lanes,o.child=u.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=u.memoizedProps,o.memoizedState=u.memoizedState,o.updateQueue=u.updateQueue,o.type=u.type,e=u.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return xi(ro,1&ro.current|2),t.child}e=e.sibling}null!==o.tail&&Ye()>Mu&&(t.flags|=128,r=!0,yl(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=io(u))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),yl(o,!0),null===o.tail&&"hidden"===o.tailMode&&!u.alternate&&!Ia)return gl(t),null}else 2*Ye()-o.renderingStartTime>Mu&&1073741824!==n&&(t.flags|=128,r=!0,yl(o,!1),t.lanes=4194304);o.isBackwards?(u.sibling=t.child,t.child=u):(null!==(n=o.last)?n.sibling=u:t.child=u,o.last=u)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Ye(),t.sibling=null,n=ro.current,xi(ro,r?1&n|2:1&n),t):(gl(t),null);case 22:case 23:return cs(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!=(1&t.mode)?0!=(1073741824&Tu)&&(gl(t),6&t.subtreeFlags&&(t.flags|=8192)):gl(t),null;case 24:case 25:return null}throw Error(a(156,t.tag))}ul=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},sl=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Xa(Ja.current);var a,o=null;switch(n){case"input":i=J(e,i),r=J(e,r),o=[];break;case"select":i=D({},i,{value:void 0}),r=D({},r,{value:void 0}),o=[];break;case"textarea":i=re(e,i),r=re(e,r),o=[];break;default:"function"!=typeof i.onClick&&"function"==typeof r.onClick&&(e.onclick=Zr)}for(c in ge(n,r),n=null,i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&null!=i[c])if("style"===c){var u=i[c];for(a in u)u.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==c&&"children"!==c&&"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&"autoFocus"!==c&&(l.hasOwnProperty(c)?o||(o=[]):(o=o||[]).push(c,null));for(c in r){var s=r[c];if(u=null!=i?i[c]:void 0,r.hasOwnProperty(c)&&s!==u&&(null!=s||null!=u))if("style"===c)if(u){for(a in u)!u.hasOwnProperty(a)||s&&s.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in s)s.hasOwnProperty(a)&&u[a]!==s[a]&&(n||(n={}),n[a]=s[a])}else n||(o||(o=[]),o.push(c,n)),n=s;else"dangerouslySetInnerHTML"===c?(s=s?s.__html:void 0,u=u?u.__html:void 0,null!=s&&u!==s&&(o=o||[]).push(c,s)):"children"===c?"string"!=typeof s&&"number"!=typeof s||(o=o||[]).push(c,""+s):"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&(l.hasOwnProperty(c)?(null!=s&&"onScroll"===c&&Mr("scroll",e),o||u===s||(o=[])):(o=o||[]).push(c,s))}n&&(o=o||[]).push("style",n);var c=o;(t.updateQueue=c)&&(t.flags|=4)}},cl=function(e,t,n,r){n!==r&&(t.flags|=4)};var Sl=S.ReactCurrentOwner,Cl=!1;function wl(e,t,n,r){t.child=null===e?$a(t,null,n,r):Ha(t,e.child,n,r)}function kl(e,t,n,r,i){n=n.render;var a=t.ref;return Xi(t,i),r=So(e,t,n,r,a,i),n=Co(),null===e||Cl?(Ia&&n&&Oa(t),t.flags|=1,wl(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ul(e,t,i))}function _l(e,t,n,r,i){if(null===e){var a=n.type;return"function"!=typeof a||Ns(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Rs(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,El(e,t,a,r,i))}if(a=e.child,0==(e.lanes&i)){var o=a.memoizedProps;if((n=null!==(n=n.compare)?n:ur)(o,r)&&e.ref===t.ref)return Ul(e,t,i)}return t.flags|=1,(e=Is(a,r)).ref=t.ref,e.return=t,t.child=e}function El(e,t,n,r,i){if(null!==e){var a=e.memoizedProps;if(ur(a,r)&&e.ref===t.ref){if(Cl=!1,t.pendingProps=r=a,0==(e.lanes&i))return t.lanes=e.lanes,Ul(e,t,i);0!=(131072&e.flags)&&(Cl=!0)}}return Ol(e,t,n,r,i)}function xl(e,t,n){var r=t.pendingProps,i=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0==(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},xi(Au,Tu),Tu|=n;else{if(0==(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,xi(Au,Tu),Tu|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==a?a.baseLanes:n,xi(Au,Tu),Tu|=r}else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,xi(Au,Tu),Tu|=r;return wl(e,t,i,n),t.child}function Pl(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Ol(e,t,n,r,i){var a=Ii(n)?Ai:Oi.current;return a=Ni(t,a),Xi(t,i),n=So(e,t,n,r,a,i),r=Co(),null===e||Cl?(Ia&&r&&Oa(t),t.flags|=1,wl(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ul(e,t,i))}function Tl(e,t,n,r,i){if(Ii(n)){var a=!0;Li(t)}else a=!1;if(Xi(t,i),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),pa(t,n,r),ma(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,l=t.memoizedProps;o.props=l;var u=o.context,s=n.contextType;s="object"==typeof s&&null!==s?Zi(s):Ni(t,s=Ii(n)?Ai:Oi.current);var c=n.getDerivedStateFromProps,f="function"==typeof c||"function"==typeof o.getSnapshotBeforeUpdate;f||"function"!=typeof o.UNSAFE_componentWillReceiveProps&&"function"!=typeof o.componentWillReceiveProps||(l!==r||u!==s)&&va(t,o,r,s),ta=!1;var h=t.memoizedState;o.state=h,ua(t,r,o,i),u=t.memoizedState,l!==r||h!==u||Ti.current||ta?("function"==typeof c&&(fa(t,n,c,r),u=t.memoizedState),(l=ta||da(t,n,l,r,h,u,s))?(f||"function"!=typeof o.UNSAFE_componentWillMount&&"function"!=typeof o.componentWillMount||("function"==typeof o.componentWillMount&&o.componentWillMount(),"function"==typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"==typeof o.componentDidMount&&(t.flags|=4194308)):("function"==typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=u),o.props=r,o.state=u,o.context=s,r=l):("function"==typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,ra(e,t),l=t.memoizedProps,s=t.type===t.elementType?l:Ui(t.type,l),o.props=s,f=t.pendingProps,h=o.context,u="object"==typeof(u=n.contextType)&&null!==u?Zi(u):Ni(t,u=Ii(n)?Ai:Oi.current);var d=n.getDerivedStateFromProps;(c="function"==typeof d||"function"==typeof o.getSnapshotBeforeUpdate)||"function"!=typeof o.UNSAFE_componentWillReceiveProps&&"function"!=typeof o.componentWillReceiveProps||(l!==f||h!==u)&&va(t,o,r,u),ta=!1,h=t.memoizedState,o.state=h,ua(t,r,o,i);var p=t.memoizedState;l!==f||h!==p||Ti.current||ta?("function"==typeof d&&(fa(t,n,d,r),p=t.memoizedState),(s=ta||da(t,n,s,r,h,p,u)||!1)?(c||"function"!=typeof o.UNSAFE_componentWillUpdate&&"function"!=typeof o.componentWillUpdate||("function"==typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,u),"function"==typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,u)),"function"==typeof o.componentDidUpdate&&(t.flags|=4),"function"==typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!=typeof o.componentDidUpdate||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!=typeof o.getSnapshotBeforeUpdate||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=u,r=s):("function"!=typeof o.componentDidUpdate||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!=typeof o.getSnapshotBeforeUpdate||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Al(e,t,n,r,a,i)}function Al(e,t,n,r,i,a){Pl(e,t);var o=0!=(128&t.flags);if(!r&&!o)return i&&Di(t,n,!1),Ul(e,t,a);r=t.stateNode,Sl.current=t;var l=o&&"function"!=typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=Ha(t,e.child,null,a),t.child=Ha(t,null,l,a)):wl(e,t,l,a),t.memoizedState=r.state,i&&Di(t,n,!0),t.child}function Nl(e){var t=e.stateNode;t.pendingContext?Fi(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Fi(0,t.context,!1),Za(e,t.containerInfo)}function Il(e,t,n,r,i){return Va(),Ba(i),t.flags|=256,wl(e,t,n,r),t.child}var Rl={dehydrated:null,treeContext:null,retryLane:0};function Fl(e){return{baseLanes:e,cachePool:null,transitions:null}}function Wl(e,t){return{baseLanes:e.baseLanes|t,cachePool:null,transitions:e.transitions}}function Ll(e,t,n){var r,i=t.pendingProps,o=ro.current,l=!1,u=0!=(128&t.flags);if((r=u)||(r=(null===e||null!==e.memoizedState)&&0!=(2&o)),r?(l=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),xi(ro,1&o),null===e)return Da(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0==(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(o=i.children,e=i.fallback,l?(i=t.mode,l=t.child,o={mode:"hidden",children:o},0==(1&i)&&null!==l?(l.childLanes=0,l.pendingProps=o):l=Ws(o,i,0,null),e=Fs(e,i,n,null),l.return=t,e.return=t,l.sibling=e,t.child=l,t.child.memoizedState=Fl(n),t.memoizedState=Rl,e):Dl(t,o));if(null!==(o=e.memoizedState)){if(null!==(r=o.dehydrated)){if(u)return 256&t.flags?(t.flags&=-257,Vl(e,t,n,Error(a(422)))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(l=i.fallback,o=t.mode,i=Ws({mode:"visible",children:i.children},o,0,null),(l=Fs(l,o,n,null)).flags|=2,i.return=t,l.return=t,i.sibling=l,t.child=i,0!=(1&t.mode)&&Ha(t,e.child,null,n),t.child.memoizedState=Fl(n),t.memoizedState=Rl,l);if(0==(1&t.mode))t=Vl(e,t,n,null);else if("$!"===r.data)t=Vl(e,t,n,Error(a(419)));else if(i=0!=(n&e.childLanes),Cl||i){if(null!==(i=xu)){switch(n&-n){case 4:l=2;break;case 16:l=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:l=32;break;case 536870912:l=268435456;break;default:l=0}0!==(i=0!=(l&(i.suspendedLanes|n))?0:l)&&i!==o.retryLane&&(o.retryLane=i,Zu(e,i,-1))}ps(),t=Vl(e,t,n,Error(a(421)))}else"$?"===r.data?(t.flags|=128,t.child=e.child,t=xs.bind(null,e),r._reactRetry=t,t=null):(n=o.treeContext,Na=si(r.nextSibling),Aa=t,Ia=!0,Ra=null,null!==n&&(Ca[wa++]=_a,Ca[wa++]=Ea,Ca[wa++]=ka,_a=n.id,Ea=n.overflow,ka=t),(t=Dl(t,t.pendingProps.children)).flags|=4096);return t}return l?(i=Ml(e,t,i.children,i.fallback,n),l=t.child,o=e.child.memoizedState,l.memoizedState=null===o?Fl(n):Wl(o,n),l.childLanes=e.childLanes&~n,t.memoizedState=Rl,i):(n=jl(e,t,i.children,n),t.memoizedState=null,n)}return l?(i=Ml(e,t,i.children,i.fallback,n),l=t.child,o=e.child.memoizedState,l.memoizedState=null===o?Fl(n):Wl(o,n),l.childLanes=e.childLanes&~n,t.memoizedState=Rl,i):(n=jl(e,t,i.children,n),t.memoizedState=null,n)}function Dl(e,t){return(t=Ws({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function jl(e,t,n,r){var i=e.child;return e=i.sibling,n=Is(i,{mode:"visible",children:n}),0==(1&t.mode)&&(n.lanes=r),n.return=t,n.sibling=null,null!==e&&(null===(r=t.deletions)?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n}function Ml(e,t,n,r,i){var a=t.mode,o=(e=e.child).sibling,l={mode:"hidden",children:n};return 0==(1&a)&&t.child!==e?((n=t.child).childLanes=0,n.pendingProps=l,t.deletions=null):(n=Is(e,l)).subtreeFlags=14680064&e.subtreeFlags,null!==o?r=Is(o,r):(r=Fs(r,a,i,null)).flags|=2,r.return=t,n.return=t,n.sibling=r,t.child=n,r}function Vl(e,t,n,r){return null!==r&&Ba(r),Ha(t,e.child,null,n),(e=Dl(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Bl(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Yi(e.return,t,n)}function zl(e,t,n,r,i){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function Gl(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(wl(e,t,r.children,n),0!=(2&(r=ro.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!=(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Bl(e,n,t);else if(19===e.tag)Bl(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(xi(ro,r),0==(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===io(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),zl(t,!1,i,n,a);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===io(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}zl(t,!0,n,null,a);break;case"together":zl(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ul(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Ru|=t.lanes,0==(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Is(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Is(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function ql(e,t){switch(Ta(t),t.tag){case 1:return Ii(t.type)&&Ri(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return eo(),Ei(Ti),Ei(Oi),oo(),0!=(65536&(e=t.flags))&&0==(128&e)?(t.flags=-65537&e|128,t):null;case 5:return no(t),null;case 13:if(Ei(ro),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));Va()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ei(ro),null;case 4:return eo(),null;case 10:return Qi(t.type._context),null;case 22:case 23:return cs(),null;default:return null}}var Hl=!1,$l=!1,Kl="function"==typeof WeakSet?WeakSet:Set,Jl=null;function Ql(e,t){var n=e.ref;if(null!==n)if("function"==typeof n)try{n(null)}catch(n){ks(e,t,n)}else n.current=null}function Yl(e,t,n){try{n()}catch(n){ks(e,t,n)}}var Xl=!1;function Zl(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,void 0!==a&&Yl(t,n,a)}i=i.next}while(i!==r)}}function eu(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function tu(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"==typeof t?t(e):t.current=e}}function nu(e){var t=e.alternate;null!==t&&(e.alternate=null,nu(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&null!==(t=e.stateNode)&&(delete t[hi],delete t[di],delete t[vi],delete t[mi],delete t[yi]),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function ru(e){return 5===e.tag||3===e.tag||4===e.tag}function iu(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||ru(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function au(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!=(n=n._reactRootContainer)||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(au(e,t,n),e=e.sibling;null!==e;)au(e,t,n),e=e.sibling}function ou(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(ou(e,t,n),e=e.sibling;null!==e;)ou(e,t,n),e=e.sibling}var lu=null,uu=!1;function su(e,t,n){for(n=n.child;null!==n;)cu(e,t,n),n=n.sibling}function cu(e,t,n){if(at&&"function"==typeof at.onCommitFiberUnmount)try{at.onCommitFiberUnmount(it,n)}catch(e){}switch(n.tag){case 5:$l||Ql(n,t);case 6:var r=lu,i=uu;lu=null,su(e,t,n),uu=i,null!==(lu=r)&&(uu?(e=lu,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):lu.removeChild(n.stateNode));break;case 18:null!==lu&&(uu?(e=lu,n=n.stateNode,8===e.nodeType?ui(e.parentNode,n):1===e.nodeType&&ui(e,n),zt(e)):ui(lu,n.stateNode));break;case 4:r=lu,i=uu,lu=n.stateNode.containerInfo,uu=!0,su(e,t,n),lu=r,uu=i;break;case 0:case 11:case 14:case 15:if(!$l&&null!==(r=n.updateQueue)&&null!==(r=r.lastEffect)){i=r=r.next;do{var a=i,o=a.destroy;a=a.tag,void 0!==o&&(0!=(2&a)||0!=(4&a))&&Yl(n,t,o),i=i.next}while(i!==r)}su(e,t,n);break;case 1:if(!$l&&(Ql(n,t),"function"==typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(e){ks(n,t,e)}su(e,t,n);break;case 21:su(e,t,n);break;case 22:1&n.mode?($l=(r=$l)||null!==n.memoizedState,su(e,t,n),$l=r):su(e,t,n);break;default:su(e,t,n)}}function fu(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Kl),t.forEach((function(t){var r=Ps.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function hu(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,l=t,u=l;e:for(;null!==u;){switch(u.tag){case 5:lu=u.stateNode,uu=!1;break e;case 3:case 4:lu=u.stateNode.containerInfo,uu=!0;break e}u=u.return}if(null===lu)throw Error(a(160));cu(o,l,i),lu=null,uu=!1;var s=i.alternate;null!==s&&(s.return=null),i.return=null}catch(e){ks(i,t,e)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)du(t,e),t=t.sibling}function du(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(hu(t,e),pu(e),4&r){try{Zl(3,e,e.return),eu(3,e)}catch(t){ks(e,e.return,t)}try{Zl(5,e,e.return)}catch(t){ks(e,e.return,t)}}break;case 1:hu(t,e),pu(e),512&r&&null!==n&&Ql(n,n.return);break;case 5:if(hu(t,e),pu(e),512&r&&null!==n&&Ql(n,n.return),32&e.flags){var i=e.stateNode;try{he(i,"")}catch(t){ks(e,e.return,t)}}if(4&r&&null!=(i=e.stateNode)){var o=e.memoizedProps,l=null!==n?n.memoizedProps:o,u=e.type,s=e.updateQueue;if(e.updateQueue=null,null!==s)try{"input"===u&&"radio"===o.type&&null!=o.name&&Y(i,o),be(u,l);var c=be(u,o);for(l=0;l<s.length;l+=2){var f=s[l],h=s[l+1];"style"===f?me(i,h):"dangerouslySetInnerHTML"===f?fe(i,h):"children"===f?he(i,h):b(i,f,h,c)}switch(u){case"input":X(i,o);break;case"textarea":ae(i,o);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var p=o.value;null!=p?ne(i,!!o.multiple,p,!1):d!==!!o.multiple&&(null!=o.defaultValue?ne(i,!!o.multiple,o.defaultValue,!0):ne(i,!!o.multiple,o.multiple?[]:"",!1))}i[di]=o}catch(t){ks(e,e.return,t)}}break;case 6:if(hu(t,e),pu(e),4&r){if(null===e.stateNode)throw Error(a(162));c=e.stateNode,f=e.memoizedProps;try{c.nodeValue=f}catch(t){ks(e,e.return,t)}}break;case 3:if(hu(t,e),pu(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{zt(t.containerInfo)}catch(t){ks(e,e.return,t)}break;case 4:default:hu(t,e),pu(e);break;case 13:hu(t,e),pu(e),8192&(c=e.child).flags&&null!==c.memoizedState&&(null===c.alternate||null===c.alternate.memoizedState)&&(ju=Ye()),4&r&&fu(e);break;case 22:if(c=null!==n&&null!==n.memoizedState,1&e.mode?($l=(f=$l)||c,hu(t,e),$l=f):hu(t,e),pu(e),8192&r){f=null!==e.memoizedState;e:for(h=null,d=e;;){if(5===d.tag){if(null===h){h=d;try{i=d.stateNode,f?"function"==typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(u=d.stateNode,l=null!=(s=d.memoizedProps.style)&&s.hasOwnProperty("display")?s.display:null,u.style.display=ve("display",l))}catch(t){ks(e,e.return,t)}}}else if(6===d.tag){if(null===h)try{d.stateNode.nodeValue=f?"":d.memoizedProps}catch(t){ks(e,e.return,t)}}else if((22!==d.tag&&23!==d.tag||null===d.memoizedState||d===e)&&null!==d.child){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;null===d.sibling;){if(null===d.return||d.return===e)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}if(f&&!c&&0!=(1&e.mode))for(Jl=e,e=e.child;null!==e;){for(c=Jl=e;null!==Jl;){switch(h=(f=Jl).child,f.tag){case 0:case 11:case 14:case 15:Zl(4,f,f.return);break;case 1:if(Ql(f,f.return),"function"==typeof(o=f.stateNode).componentWillUnmount){d=f,p=f.return;try{i=d,o.props=i.memoizedProps,o.state=i.memoizedState,o.componentWillUnmount()}catch(e){ks(d,p,e)}}break;case 5:Ql(f,f.return);break;case 22:if(null!==f.memoizedState){gu(c);continue}}null!==h?(h.return=f,Jl=h):gu(c)}e=e.sibling}}break;case 19:hu(t,e),pu(e),4&r&&fu(e);case 21:}}function pu(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(ru(n)){var r=n;break e}n=n.return}throw Error(a(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(he(i,""),r.flags&=-33),ou(e,iu(e),i);break;case 3:case 4:var o=r.stateNode.containerInfo;au(e,iu(e),o);break;default:throw Error(a(161))}}catch(t){ks(e,e.return,t)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function vu(e,t,n){Jl=e,mu(e,t,n)}function mu(e,t,n){for(var r=0!=(1&e.mode);null!==Jl;){var i=Jl,a=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||Hl;if(!o){var l=i.alternate,u=null!==l&&null!==l.memoizedState||$l;l=Hl;var s=$l;if(Hl=o,($l=u)&&!s)for(Jl=i;null!==Jl;)u=(o=Jl).child,22===o.tag&&null!==o.memoizedState?bu(i):null!==u?(u.return=o,Jl=u):bu(i);for(;null!==a;)Jl=a,mu(a,t,n),a=a.sibling;Jl=i,Hl=l,$l=s}yu(e)}else 0!=(8772&i.subtreeFlags)&&null!==a?(a.return=i,Jl=a):yu(e)}}function yu(e){for(;null!==Jl;){var t=Jl;if(0!=(8772&t.flags)){var n=t.alternate;try{if(0!=(8772&t.flags))switch(t.tag){case 0:case 11:case 15:$l||eu(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!$l)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:Ui(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&sa(t,o,r);break;case 3:var l=t.updateQueue;if(null!==l){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}sa(t,l,n)}break;case 5:var u=t.stateNode;if(null===n&&4&t.flags){n=u;var s=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":s.autoFocus&&n.focus();break;case"img":s.src&&(n.src=s.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:break;case 13:if(null===t.memoizedState){var c=t.alternate;if(null!==c){var f=c.memoizedState;if(null!==f){var h=f.dehydrated;null!==h&&zt(h)}}}break;default:throw Error(a(163))}$l||512&t.flags&&tu(t)}catch(e){ks(t,t.return,e)}}if(t===e){Jl=null;break}if(null!==(n=t.sibling)){n.return=t.return,Jl=n;break}Jl=t.return}}function gu(e){for(;null!==Jl;){var t=Jl;if(t===e){Jl=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Jl=n;break}Jl=t.return}}function bu(e){for(;null!==Jl;){var t=Jl;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{eu(4,t)}catch(e){ks(t,n,e)}break;case 1:var r=t.stateNode;if("function"==typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(e){ks(t,i,e)}}var a=t.return;try{tu(t)}catch(e){ks(t,a,e)}break;case 5:var o=t.return;try{tu(t)}catch(e){ks(t,o,e)}}}catch(e){ks(t,t.return,e)}if(t===e){Jl=null;break}var l=t.sibling;if(null!==l){l.return=t.return,Jl=l;break}Jl=t.return}}var Su,Cu=Math.ceil,wu=S.ReactCurrentDispatcher,ku=S.ReactCurrentOwner,_u=S.ReactCurrentBatchConfig,Eu=0,xu=null,Pu=null,Ou=0,Tu=0,Au=_i(0),Nu=0,Iu=null,Ru=0,Fu=0,Wu=0,Lu=null,Du=null,ju=0,Mu=1/0,Vu=null,Bu=!1,zu=null,Gu=null,Uu=!1,qu=null,Hu=0,$u=0,Ku=null,Ju=-1,Qu=0;function Yu(){return 0!=(6&Eu)?Ye():-1!==Ju?Ju:Ju=Ye()}function Xu(e){return 0==(1&e.mode)?1:0!=(2&Eu)&&0!==Ou?Ou&-Ou:null!==Gi.transition?(0===Qu&&(Qu=vt()),Qu):0!==(e=bt)?e:e=void 0===(e=window.event)?16:Qt(e.type)}function Zu(e,t,n){if(50<$u)throw $u=0,Ku=null,Error(a(185));var r=es(e,t);return null===r?null:(yt(r,t,n),0!=(2&Eu)&&r===xu||(r===xu&&(0==(2&Eu)&&(Fu|=t),4===Nu&&os(r,Ou)),ns(r,n),1===t&&0===Eu&&0==(1&e.mode)&&(Mu=Ye()+500,Mi&&zi())),r)}function es(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}function ts(e){return(null!==xu||null!==ea)&&0!=(1&e.mode)&&0==(2&Eu)}function ns(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var o=31-ot(a),l=1<<o,u=i[o];-1===u?0!=(l&n)&&0==(l&r)||(i[o]=dt(l,t)):u<=t&&(e.expiredLanes|=l),a&=~l}}(e,t);var r=ht(e,e===xu?Ou:0);if(0===r)null!==n&&Ke(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Ke(n),1===t)0===e.tag?function(e){Mi=!0,Bi(e)}(ls.bind(null,e)):Bi(ls.bind(null,e)),oi((function(){0===Eu&&zi()})),n=null;else{switch(St(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Os(n,rs.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function rs(e,t){if(Ju=-1,Qu=0,0!=(6&Eu))throw Error(a(327));var n=e.callbackNode;if(Cs()&&e.callbackNode!==n)return null;var r=ht(e,e===xu?Ou:0);if(0===r)return null;if(0!=(30&r)||0!=(r&e.expiredLanes)||t)t=vs(e,r);else{t=r;var i=Eu;Eu|=2;var o=ds();for(xu===e&&Ou===t||(Vu=null,Mu=Ye()+500,fs(e,t));;)try{ys();break}catch(t){hs(e,t)}Ji(),wu.current=o,Eu=i,null!==Pu?t=0:(xu=null,Ou=0,t=Nu)}if(0!==t){if(2===t&&0!==(i=pt(e))&&(r=i,t=is(e,i)),1===t)throw n=Iu,fs(e,0),os(e,r),ns(e,Ye()),n;if(6===t)os(e,r);else{if(i=e.current.alternate,0==(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!lr(a(),i))return!1}catch(e){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=vs(e,r))&&0!==(o=pt(e))&&(r=o,t=is(e,o)),1===t))throw n=Iu,fs(e,0),os(e,r),ns(e,Ye()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(a(345));case 2:case 5:Ss(e,Du,Vu);break;case 3:if(os(e,r),(130023424&r)===r&&10<(t=ju+500-Ye())){if(0!==ht(e,0))break;if(((i=e.suspendedLanes)&r)!==r){Yu(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(Ss.bind(null,e,Du,Vu),t);break}Ss(e,Du,Vu);break;case 4:if(os(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var l=31-ot(r);o=1<<l,(l=t[l])>i&&(i=l),r&=~o}if(r=i,10<(r=(120>(r=Ye()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Cu(r/1960))-r)){e.timeoutHandle=ri(Ss.bind(null,e,Du,Vu),r);break}Ss(e,Du,Vu);break;default:throw Error(a(329))}}}return ns(e,Ye()),e.callbackNode===n?rs.bind(null,e):null}function is(e,t){var n=Lu;return e.current.memoizedState.isDehydrated&&(fs(e,t).flags|=256),2!==(e=vs(e,t))&&(t=Du,Du=n,null!==t&&as(t)),e}function as(e){null===Du?Du=e:Du.push.apply(Du,e)}function os(e,t){for(t&=~Wu,t&=~Fu,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function ls(e){if(0!=(6&Eu))throw Error(a(327));Cs();var t=ht(e,0);if(0==(1&t))return ns(e,Ye()),null;var n=vs(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=is(e,r))}if(1===n)throw n=Iu,fs(e,0),os(e,t),ns(e,Ye()),n;if(6===n)throw Error(a(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Ss(e,Du,Vu),ns(e,Ye()),null}function us(e,t){var n=Eu;Eu|=1;try{return e(t)}finally{0===(Eu=n)&&(Mu=Ye()+500,Mi&&zi())}}function ss(e){null!==qu&&0===qu.tag&&0==(6&Eu)&&Cs();var t=Eu;Eu|=1;var n=_u.transition,r=bt;try{if(_u.transition=null,bt=1,e)return e()}finally{bt=r,_u.transition=n,0==(6&(Eu=t))&&zi()}}function cs(){Tu=Au.current,Ei(Au)}function fs(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Pu)for(n=Pu.return;null!==n;){var r=n;switch(Ta(r),r.tag){case 1:null!=(r=r.type.childContextTypes)&&Ri();break;case 3:eo(),Ei(Ti),Ei(Oi),oo();break;case 5:no(r);break;case 4:eo();break;case 13:case 19:Ei(ro);break;case 10:Qi(r.type._context);break;case 22:case 23:cs()}n=n.return}if(xu=e,Pu=e=Is(e.current,null),Ou=Tu=t,Nu=0,Iu=null,Wu=Fu=Ru=0,Du=Lu=null,null!==ea){for(t=0;t<ea.length;t++)if(null!==(r=(n=ea[t]).interleaved)){n.interleaved=null;var i=r.next,a=n.pending;if(null!==a){var o=a.next;a.next=i,r.next=o}n.pending=r}ea=null}return e}function hs(e,t){for(;;){var n=Pu;try{if(Ji(),lo.current=nl,po){for(var r=co.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}po=!1}if(so=0,ho=fo=co=null,vo=!1,mo=0,ku.current=null,null===n||null===n.return){Nu=1,Iu=t,Pu=null;break}e:{var o=e,l=n.return,u=n,s=t;if(t=Ou,u.flags|=32768,null!==s&&"object"==typeof s&&"function"==typeof s.then){var c=s,f=u,h=f.tag;if(0==(1&f.mode)&&(0===h||11===h||15===h)){var d=f.alternate;d?(f.updateQueue=d.updateQueue,f.memoizedState=d.memoizedState,f.lanes=d.lanes):(f.updateQueue=null,f.memoizedState=null)}var p=vl(l);if(null!==p){p.flags&=-257,ml(p,l,u,0,t),1&p.mode&&pl(o,c,t),s=c;var v=(t=p).updateQueue;if(null===v){var m=new Set;m.add(s),t.updateQueue=m}else v.add(s);break e}if(0==(1&t)){pl(o,c,t),ps();break e}s=Error(a(426))}else if(Ia&&1&u.mode){var y=vl(l);if(null!==y){0==(65536&y.flags)&&(y.flags|=256),ml(y,l,u,0,t),Ba(s);break e}}o=s,4!==Nu&&(Nu=2),null===Lu?Lu=[o]:Lu.push(o),s=ol(s,u),u=l;do{switch(u.tag){case 3:u.flags|=65536,t&=-t,u.lanes|=t,la(u,hl(0,s,t));break e;case 1:o=s;var g=u.type,b=u.stateNode;if(0==(128&u.flags)&&("function"==typeof g.getDerivedStateFromError||null!==b&&"function"==typeof b.componentDidCatch&&(null===Gu||!Gu.has(b)))){u.flags|=65536,t&=-t,u.lanes|=t,la(u,dl(u,o,t));break e}}u=u.return}while(null!==u)}bs(n)}catch(e){t=e,Pu===n&&null!==n&&(Pu=n=n.return);continue}break}}function ds(){var e=wu.current;return wu.current=nl,null===e?nl:e}function ps(){0!==Nu&&3!==Nu&&2!==Nu||(Nu=4),null===xu||0==(268435455&Ru)&&0==(268435455&Fu)||os(xu,Ou)}function vs(e,t){var n=Eu;Eu|=2;var r=ds();for(xu===e&&Ou===t||(Vu=null,fs(e,t));;)try{ms();break}catch(t){hs(e,t)}if(Ji(),Eu=n,wu.current=r,null!==Pu)throw Error(a(261));return xu=null,Ou=0,Nu}function ms(){for(;null!==Pu;)gs(Pu)}function ys(){for(;null!==Pu&&!Je();)gs(Pu)}function gs(e){var t=Su(e.alternate,e,Tu);e.memoizedProps=e.pendingProps,null===t?bs(e):Pu=t,ku.current=null}function bs(e){var t=e;do{var n=t.alternate;if(e=t.return,0==(32768&t.flags)){if(null!==(n=bl(n,t,Tu)))return void(Pu=n)}else{if(null!==(n=ql(n,t)))return n.flags&=32767,void(Pu=n);if(null===e)return Nu=6,void(Pu=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Pu=t);Pu=t=e}while(null!==t);0===Nu&&(Nu=5)}function Ss(e,t,n){var r=bt,i=_u.transition;try{_u.transition=null,bt=1,function(e,t,n,r){do{Cs()}while(null!==qu);if(0!=(6&Eu))throw Error(a(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ot(n),a=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~a}}(e,o),e===xu&&(Pu=xu=null,Ou=0),0==(2064&n.subtreeFlags)&&0==(2064&n.flags)||Uu||(Uu=!0,Os(tt,(function(){return Cs(),null}))),o=0!=(15990&n.flags),0!=(15990&n.subtreeFlags)||o){o=_u.transition,_u.transition=null;var l=bt;bt=1;var u=Eu;Eu|=4,ku.current=null,function(e,t){if(ei=Ut,dr(e=hr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(e){n=null;break e}var l=0,u=-1,s=-1,c=0,f=0,h=e,d=null;t:for(;;){for(var p;h!==n||0!==i&&3!==h.nodeType||(u=l+i),h!==o||0!==r&&3!==h.nodeType||(s=l+r),3===h.nodeType&&(l+=h.nodeValue.length),null!==(p=h.firstChild);)d=h,h=p;for(;;){if(h===e)break t;if(d===n&&++c===i&&(u=l),d===o&&++f===r&&(s=l),null!==(p=h.nextSibling))break;d=(h=d).parentNode}h=p}n=-1===u||-1===s?null:{start:u,end:s}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Ut=!1,Jl=t;null!==Jl;)if(e=(t=Jl).child,0!=(1028&t.subtreeFlags)&&null!==e)e.return=t,Jl=e;else for(;null!==Jl;){t=Jl;try{var v=t.alternate;if(0!=(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==v){var m=v.memoizedProps,y=v.memoizedState,g=t.stateNode,b=g.getSnapshotBeforeUpdate(t.elementType===t.type?m:Ui(t.type,m),y);g.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var S=t.stateNode.containerInfo;if(1===S.nodeType)S.textContent="";else if(9===S.nodeType){var C=S.body;null!=C&&(C.textContent="")}break;default:throw Error(a(163))}}catch(e){ks(t,t.return,e)}if(null!==(e=t.sibling)){e.return=t.return,Jl=e;break}Jl=t.return}v=Xl,Xl=!1}(e,n),du(n,e),pr(ti),Ut=!!ei,ti=ei=null,e.current=n,vu(n,e,i),Qe(),Eu=u,bt=l,_u.transition=o}else e.current=n;if(Uu&&(Uu=!1,qu=e,Hu=i),0===(o=e.pendingLanes)&&(Gu=null),function(e){if(at&&"function"==typeof at.onCommitFiberRoot)try{at.onCommitFiberRoot(it,e,void 0,128==(128&e.current.flags))}catch(e){}}(n.stateNode),ns(e,Ye()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)r(t[n]);if(Bu)throw Bu=!1,e=zu,zu=null,e;0!=(1&Hu)&&0!==e.tag&&Cs(),0!=(1&(o=e.pendingLanes))?e===Ku?$u++:($u=0,Ku=e):$u=0,zi()}(e,t,n,r)}finally{_u.transition=i,bt=r}return null}function Cs(){if(null!==qu){var e=St(Hu),t=_u.transition,n=bt;try{if(_u.transition=null,bt=16>e?16:e,null===qu)var r=!1;else{if(e=qu,qu=null,Hu=0,0!=(6&Eu))throw Error(a(331));var i=Eu;for(Eu|=4,Jl=e.current;null!==Jl;){var o=Jl,l=o.child;if(0!=(16&Jl.flags)){var u=o.deletions;if(null!==u){for(var s=0;s<u.length;s++){var c=u[s];for(Jl=c;null!==Jl;){var f=Jl;switch(f.tag){case 0:case 11:case 15:Zl(8,f,o)}var h=f.child;if(null!==h)h.return=f,Jl=h;else for(;null!==Jl;){var d=(f=Jl).sibling,p=f.return;if(nu(f),f===c){Jl=null;break}if(null!==d){d.return=p,Jl=d;break}Jl=p}}}var v=o.alternate;if(null!==v){var m=v.child;if(null!==m){v.child=null;do{var y=m.sibling;m.sibling=null,m=y}while(null!==m)}}Jl=o}}if(0!=(2064&o.subtreeFlags)&&null!==l)l.return=o,Jl=l;else e:for(;null!==Jl;){if(0!=(2048&(o=Jl).flags))switch(o.tag){case 0:case 11:case 15:Zl(9,o,o.return)}var g=o.sibling;if(null!==g){g.return=o.return,Jl=g;break e}Jl=o.return}}var b=e.current;for(Jl=b;null!==Jl;){var S=(l=Jl).child;if(0!=(2064&l.subtreeFlags)&&null!==S)S.return=l,Jl=S;else e:for(l=b;null!==Jl;){if(0!=(2048&(u=Jl).flags))try{switch(u.tag){case 0:case 11:case 15:eu(9,u)}}catch(e){ks(u,u.return,e)}if(u===l){Jl=null;break e}var C=u.sibling;if(null!==C){C.return=u.return,Jl=C;break e}Jl=u.return}}if(Eu=i,zi(),at&&"function"==typeof at.onPostCommitFiberRoot)try{at.onPostCommitFiberRoot(it,e)}catch(e){}r=!0}return r}finally{bt=n,_u.transition=t}}return!1}function ws(e,t,n){aa(e,t=hl(0,t=ol(n,t),1)),t=Yu(),null!==(e=es(e,1))&&(yt(e,1,t),ns(e,t))}function ks(e,t,n){if(3===e.tag)ws(e,e,n);else for(;null!==t;){if(3===t.tag){ws(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"==typeof t.type.getDerivedStateFromError||"function"==typeof r.componentDidCatch&&(null===Gu||!Gu.has(r))){aa(t,e=dl(t,e=ol(n,e),1)),e=Yu(),null!==(t=es(t,1))&&(yt(t,1,e),ns(t,e));break}}t=t.return}}function _s(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=Yu(),e.pingedLanes|=e.suspendedLanes&n,xu===e&&(Ou&n)===n&&(4===Nu||3===Nu&&(130023424&Ou)===Ou&&500>Ye()-ju?fs(e,0):Wu|=n),ns(e,t)}function Es(e,t){0===t&&(0==(1&e.mode)?t=1:(t=ct,0==(130023424&(ct<<=1))&&(ct=4194304)));var n=Yu();null!==(e=es(e,t))&&(yt(e,t,n),ns(e,n))}function xs(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Es(e,n)}function Ps(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(a(314))}null!==r&&r.delete(t),Es(e,n)}function Os(e,t){return $e(e,t)}function Ts(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function As(e,t,n,r){return new Ts(e,t,n,r)}function Ns(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Is(e,t){var n=e.alternate;return null===n?((n=As(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Rs(e,t,n,r,i,o){var l=2;if(r=e,"function"==typeof e)Ns(e)&&(l=1);else if("string"==typeof e)l=5;else e:switch(e){case k:return Fs(n.children,i,o,t);case _:l=8,i|=8;break;case E:return(e=As(12,n,t,2|i)).elementType=E,e.lanes=o,e;case T:return(e=As(13,n,t,i)).elementType=T,e.lanes=o,e;case A:return(e=As(19,n,t,i)).elementType=A,e.lanes=o,e;case R:return Ws(n,i,o,t);default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case x:l=10;break e;case P:l=9;break e;case O:l=11;break e;case N:l=14;break e;case I:l=16,r=null;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=As(l,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Fs(e,t,n,r){return(e=As(7,e,r,t)).lanes=n,e}function Ws(e,t,n,r){return(e=As(22,e,r,t)).elementType=R,e.lanes=n,e.stateNode={},e}function Ls(e,t,n){return(e=As(6,e,null,t)).lanes=n,e}function Ds(e,t,n){return(t=As(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function js(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mt(0),this.expirationTimes=mt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Ms(e,t,n,r,i,a,o,l,u){return e=new js(e,t,n,l,u),1===t?(t=1,!0===a&&(t|=8)):t=0,a=As(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},na(a),e}function Vs(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:w,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}function Bs(e){if(!e)return Pi;e:{if(ze(e=e._reactInternals)!==e||1!==e.tag)throw Error(a(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ii(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(a(171))}if(1===e.tag){var n=e.type;if(Ii(n))return Wi(e,n,t)}return t}function zs(e,t,n,r,i,a,o,l,u){return(e=Ms(n,r,!0,e,0,a,0,l,u)).context=Bs(null),n=e.current,(a=ia(r=Yu(),i=Xu(n))).callback=null!=t?t:null,aa(n,a),e.current.lanes=i,yt(e,i,r),ns(e,r),e}function Gs(e,t,n,r){var i=t.current,a=Yu(),o=Xu(i);return n=Bs(n),null===t.context?t.context=n:t.pendingContext=n,(t=ia(a,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),aa(i,t),null!==(e=Zu(i,o,a))&&oa(e,i,o),o}function Us(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function qs(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Hs(e,t){qs(e,t),(e=e.alternate)&&qs(e,t)}Su=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ti.current)Cl=!0;else{if(0==(e.lanes&n)&&0==(128&t.flags))return Cl=!1,function(e,t,n){switch(t.tag){case 3:Nl(t),Va();break;case 5:to(t);break;case 1:Ii(t.type)&&Li(t);break;case 4:Za(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;xi(qi,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(xi(ro,1&ro.current),t.flags|=128,null):0!=(n&t.child.childLanes)?Ll(e,t,n):(xi(ro,1&ro.current),null!==(e=Ul(e,t,n))?e.sibling:null);xi(ro,1&ro.current);break;case 19:if(r=0!=(n&t.childLanes),0!=(128&e.flags)){if(r)return Gl(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),xi(ro,ro.current),r)break;return null;case 22:case 23:return t.lanes=0,xl(e,t,n)}return Ul(e,t,n)}(e,t,n);Cl=0!=(131072&e.flags)}else Cl=!1,Ia&&0!=(1048576&t.flags)&&Pa(t,Sa,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps;var i=Ni(t,Oi.current);Xi(t,n),i=So(null,t,r,e,i,n);var o=Co();return t.flags|=1,"object"==typeof i&&null!==i&&"function"==typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ii(r)?(o=!0,Li(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,na(t),i.updater=ha,t.stateNode=i,i._reactInternals=t,ma(t,r,e,n),t=Al(null,t,r,!0,o,n)):(t.tag=0,Ia&&o&&Oa(t),wl(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"==typeof e)return Ns(e)?1:0;if(null!=e){if((e=e.$$typeof)===O)return 11;if(e===N)return 14}return 2}(r),e=Ui(r,e),i){case 0:t=Ol(null,t,r,e,n);break e;case 1:t=Tl(null,t,r,e,n);break e;case 11:t=kl(null,t,r,e,n);break e;case 14:t=_l(null,t,r,Ui(r.type,e),n);break e}throw Error(a(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Ol(e,t,r,i=t.elementType===r?i:Ui(r,i),n);case 1:return r=t.type,i=t.pendingProps,Tl(e,t,r,i=t.elementType===r?i:Ui(r,i),n);case 3:e:{if(Nl(t),null===e)throw Error(a(387));r=t.pendingProps,i=(o=t.memoizedState).element,ra(e,t),ua(t,r,null,n);var l=t.memoizedState;if(r=l.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Il(e,t,r,n,i=Error(a(423)));break e}if(r!==i){t=Il(e,t,r,n,i=Error(a(424)));break e}for(Na=si(t.stateNode.containerInfo.firstChild),Aa=t,Ia=!0,Ra=null,n=$a(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(Va(),r===i){t=Ul(e,t,n);break e}wl(e,t,r,n)}t=t.child}return t;case 5:return to(t),null===e&&Da(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,l=i.children,ni(r,i)?l=null:null!==o&&ni(r,o)&&(t.flags|=32),Pl(e,t),wl(e,t,l,n),t.child;case 6:return null===e&&Da(t),null;case 13:return Ll(e,t,n);case 4:return Za(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Ha(t,null,r,n):wl(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,kl(e,t,r,i=t.elementType===r?i:Ui(r,i),n);case 7:return wl(e,t,t.pendingProps,n),t.child;case 8:case 12:return wl(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,l=i.value,xi(qi,r._currentValue),r._currentValue=l,null!==o)if(lr(o.value,l)){if(o.children===i.children&&!Ti.current){t=Ul(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var u=o.dependencies;if(null!==u){l=o.child;for(var s=u.firstContext;null!==s;){if(s.context===r){if(1===o.tag){(s=ia(-1,n&-n)).tag=2;var c=o.updateQueue;if(null!==c){var f=(c=c.shared).pending;null===f?s.next=s:(s.next=f.next,f.next=s),c.pending=s}}o.lanes|=n,null!==(s=o.alternate)&&(s.lanes|=n),Yi(o.return,n,t),u.lanes|=n;break}s=s.next}}else if(10===o.tag)l=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(l=o.return))throw Error(a(341));l.lanes|=n,null!==(u=l.alternate)&&(u.lanes|=n),Yi(l,n,t),l=o.sibling}else l=o.child;if(null!==l)l.return=o;else for(l=o;null!==l;){if(l===t){l=null;break}if(null!==(o=l.sibling)){o.return=l.return,l=o;break}l=l.return}o=l}wl(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Xi(t,n),r=r(i=Zi(i)),t.flags|=1,wl(e,t,r,n),t.child;case 14:return i=Ui(r=t.type,t.pendingProps),_l(e,t,r,i=Ui(r.type,i),n);case 15:return El(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Ui(r,i),null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,Ii(r)?(e=!0,Li(t)):e=!1,Xi(t,n),pa(t,r,i),ma(t,r,i,n),Al(null,t,r,!0,e,n);case 19:return Gl(e,t,n);case 22:return xl(e,t,n)}throw Error(a(156,t.tag))};var $s="function"==typeof reportError?reportError:function(e){console.error(e)};function Ks(e){this._internalRoot=e}function Js(e){this._internalRoot=e}function Qs(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Ys(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Xs(){}function Zs(e,t,n,r,i){var a=n._reactRootContainer;if(a){var o=a;if("function"==typeof i){var l=i;i=function(){var e=Us(o);l.call(e)}}Gs(t,o,e,i)}else o=function(e,t,n,r,i){if(i){if("function"==typeof r){var a=r;r=function(){var e=Us(o);a.call(e)}}var o=zs(t,r,e,0,null,!1,0,"",Xs);return e._reactRootContainer=o,e[pi]=o.current,zr(8===e.nodeType?e.parentNode:e),ss(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"==typeof r){var l=r;r=function(){var e=Us(u);l.call(e)}}var u=Ms(e,0,!1,null,0,!1,0,"",Xs);return e._reactRootContainer=u,e[pi]=u.current,zr(8===e.nodeType?e.parentNode:e),ss((function(){Gs(t,u,n,r)})),u}(n,t,e,i,r);return Us(o)}Js.prototype.render=Ks.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));Gs(e,t,null,null)},Js.prototype.unmount=Ks.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;ss((function(){Gs(null,e,null,null)})),t[pi]=null}},Js.prototype.unstable_scheduleHydration=function(e){if(e){var t=_t();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Rt.length&&0!==t&&t<Rt[n].priority;n++);Rt.splice(n,0,e),0===n&&Dt(e)}},Ct=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ft(t.pendingLanes);0!==n&&(gt(t,1|n),ns(t,Ye()),0==(6&Eu)&&(Mu=Ye()+500,zi()))}break;case 13:var r=Yu();ss((function(){return Zu(e,1,r)})),Hs(e,1)}},wt=function(e){13===e.tag&&(Zu(e,134217728,Yu()),Hs(e,134217728))},kt=function(e){if(13===e.tag){var t=Yu(),n=Xu(e);Zu(e,n,t),Hs(e,n)}},_t=function(){return bt},Et=function(e,t){var n=bt;try{return bt=e,t()}finally{bt=n}},we=function(e,t,n){switch(t){case"input":if(X(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=Ci(r);if(!i)throw Error(a(90));$(r),X(r,i)}}}break;case"textarea":ae(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Oe=us,Te=ss;var ec={usingClientEntryPoint:!1,Events:[bi,Si,Ci,xe,Pe,us]},tc={findFiberByHostInstance:gi,bundleType:0,version:"18.1.0",rendererPackageName:"react-dom"},nc={bundleType:tc.bundleType,version:tc.version,rendererPackageName:tc.rendererPackageName,rendererConfig:tc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:S.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=qe(e))?null:e.stateNode},findFiberByHostInstance:tc.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.1.0-next-22edb9f77-20220426"};if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var rc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!rc.isDisabled&&rc.supportsFiber)try{it=rc.inject(nc),at=rc}catch(ce){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ec,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Qs(t))throw Error(a(200));return Vs(e,t,null,n)},t.createRoot=function(e,t){if(!Qs(e))throw Error(a(299));var n=!1,r="",i=$s;return null!=t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Ms(e,1,!1,null,0,n,0,r,i),e[pi]=t.current,zr(8===e.nodeType?e.parentNode:e),new Ks(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"==typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return null===(e=qe(t))?null:e.stateNode},t.flushSync=function(e){return ss(e)},t.hydrate=function(e,t,n){if(!Ys(t))throw Error(a(200));return Zs(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Qs(e))throw Error(a(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",l=$s;if(null!=n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(l=n.onRecoverableError)),t=zs(t,null,e,1,null!=n?n:null,i,0,o,l),e[pi]=t.current,zr(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Js(t)},t.render=function(e,t,n){if(!Ys(t))throw Error(a(200));return Zs(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Ys(e))throw Error(a(40));return!!e._reactRootContainer&&(ss((function(){Zs(null,null,e,!1,(function(){e._reactRootContainer=null,e[pi]=null}))})),!0)},t.unstable_batchedUpdates=us,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Ys(n))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return Zs(e,t,n,!1,r)},t.version="18.1.0-next-22edb9f77-20220426"},745:(e,t,n)=>{"use strict";var r=n(935);t.s=r.createRoot,r.hydrateRoot},935:(e,t,n)=>{"use strict";!function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(e){console.error(e)}}(),e.exports=n(448)},921:(e,t)=>{"use strict";var n,r=Symbol.for("react.element"),i=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),u=Symbol.for("react.provider"),s=Symbol.for("react.context"),c=Symbol.for("react.server_context"),f=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),d=Symbol.for("react.suspense_list"),p=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),m=Symbol.for("react.offscreen");n=Symbol.for("react.module.reference"),t.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===a||e===l||e===o||e===h||e===d||e===m||"object"==typeof e&&null!==e&&(e.$$typeof===v||e.$$typeof===p||e.$$typeof===u||e.$$typeof===s||e.$$typeof===f||e.$$typeof===n||void 0!==e.getModuleId)},t.typeOf=function(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case a:case l:case o:case h:case d:return e;default:switch(e=e&&e.$$typeof){case c:case s:case f:case v:case p:case u:return e;default:return t}}case i:return t}}}},864:(e,t,n)=>{"use strict";e.exports=n(921)},251:(e,t,n)=>{"use strict";var r=n(294),i=Symbol.for("react.element"),a=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,l=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,u={key:!0,ref:!0,__self:!0,__source:!0};function s(e,t,n){var r,a={},s=null,c=null;for(r in void 0!==n&&(s=""+n),void 0!==t.key&&(s=""+t.key),void 0!==t.ref&&(c=t.ref),t)o.call(t,r)&&!u.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:i,type:e,key:s,ref:c,props:a,_owner:l.current}}t.Fragment=a,t.jsx=s,t.jsxs=s},408:(e,t)=>{"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),u=Symbol.for("react.context"),s=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),d=Symbol.iterator,p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,m={};function y(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}function g(){}function b(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},g.prototype=y.prototype;var S=b.prototype=new g;S.constructor=b,v(S,y.prototype),S.isPureReactComponent=!0;var C=Array.isArray,w=Object.prototype.hasOwnProperty,k={current:null},_={key:!0,ref:!0,__self:!0,__source:!0};function E(e,t,r){var i,a={},o=null,l=null;if(null!=t)for(i in void 0!==t.ref&&(l=t.ref),void 0!==t.key&&(o=""+t.key),t)w.call(t,i)&&!_.hasOwnProperty(i)&&(a[i]=t[i]);var u=arguments.length-2;if(1===u)a.children=r;else if(1<u){for(var s=Array(u),c=0;c<u;c++)s[c]=arguments[c+2];a.children=s}if(e&&e.defaultProps)for(i in u=e.defaultProps)void 0===a[i]&&(a[i]=u[i]);return{$$typeof:n,type:e,key:o,ref:l,props:a,_owner:k.current}}function x(e){return"object"==typeof e&&null!==e&&e.$$typeof===n}var P=/\/+/g;function O(e,t){return"object"==typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function T(e,t,i,a,o){var l=typeof e;"undefined"!==l&&"boolean"!==l||(e=null);var u=!1;if(null===e)u=!0;else switch(l){case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case n:case r:u=!0}}if(u)return o=o(u=e),e=""===a?"."+O(u,0):a,C(o)?(i="",null!=e&&(i=e.replace(P,"$&/")+"/"),T(o,t,i,"",(function(e){return e}))):null!=o&&(x(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||u&&u.key===o.key?"":(""+o.key).replace(P,"$&/")+"/")+e)),t.push(o)),1;if(u=0,a=""===a?".":a+":",C(e))for(var s=0;s<e.length;s++){var c=a+O(l=e[s],s);u+=T(l,t,i,c,o)}else if(c=function(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=d&&e[d]||e["@@iterator"])?e:null}(e),"function"==typeof c)for(e=c.call(e),s=0;!(l=e.next()).done;)u+=T(l=l.value,t,i,c=a+O(l,s++),o);else if("object"===l)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return u}function A(e,t,n){if(null==e)return e;var r=[],i=0;return T(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function N(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var I={current:null},R={transition:null},F={ReactCurrentDispatcher:I,ReactCurrentBatchConfig:R,ReactCurrentOwner:k};t.Children={map:A,forEach:function(e,t,n){A(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return A(e,(function(){t++})),t},toArray:function(e){return A(e,(function(e){return e}))||[]},only:function(e){if(!x(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=i,t.Profiler=o,t.PureComponent=b,t.StrictMode=a,t.Suspense=c,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=F,t.cloneElement=function(e,t,r){if(null==e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=v({},e.props),a=e.key,o=e.ref,l=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,l=k.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var u=e.type.defaultProps;for(s in t)w.call(t,s)&&!_.hasOwnProperty(s)&&(i[s]=void 0===t[s]&&void 0!==u?u[s]:t[s])}var s=arguments.length-2;if(1===s)i.children=r;else if(1<s){u=Array(s);for(var c=0;c<s;c++)u[c]=arguments[c+2];i.children=u}return{$$typeof:n,type:e.type,key:a,ref:o,props:i,_owner:l}},t.createContext=function(e){return(e={$$typeof:u,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:l,_context:e},e.Consumer=e},t.createElement=E,t.createFactory=function(e){var t=E.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:s,render:e}},t.isValidElement=x,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:N}},t.memo=function(e,t){return{$$typeof:f,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=R.transition;R.transition={};try{e()}finally{R.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return I.current.useCallback(e,t)},t.useContext=function(e){return I.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return I.current.useDeferredValue(e)},t.useEffect=function(e,t){return I.current.useEffect(e,t)},t.useId=function(){return I.current.useId()},t.useImperativeHandle=function(e,t,n){return I.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return I.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return I.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return I.current.useMemo(e,t)},t.useReducer=function(e,t,n){return I.current.useReducer(e,t,n)},t.useRef=function(e){return I.current.useRef(e)},t.useState=function(e){return I.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return I.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return I.current.useTransition()},t.version="18.1.0"},294:(e,t,n)=>{"use strict";e.exports=n(408)},893:(e,t,n)=>{"use strict";e.exports=n(251)},53:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<a(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var l=2*(r+1)-1,u=e[l],s=l+1,c=e[s];if(0>a(u,n))s<i&&0>a(c,u)?(e[r]=c,e[s]=n,r=s):(e[r]=u,e[l]=n,r=l);else{if(!(s<i&&0>a(c,n)))break e;e[r]=c,e[s]=n,r=s}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"==typeof performance&&"function"==typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var l=Date,u=l.now();t.unstable_now=function(){return l.now()-u}}var s=[],c=[],f=1,h=null,d=3,p=!1,v=!1,m=!1,y="function"==typeof setTimeout?setTimeout:null,g="function"==typeof clearTimeout?clearTimeout:null,b="undefined"!=typeof setImmediate?setImmediate:null;function S(e){for(var t=r(c);null!==t;){if(null===t.callback)i(c);else{if(!(t.startTime<=e))break;i(c),t.sortIndex=t.expirationTime,n(s,t)}t=r(c)}}function C(e){if(m=!1,S(e),!v)if(null!==r(s))v=!0,R(w);else{var t=r(c);null!==t&&F(C,t.startTime-e)}}function w(e,n){v=!1,m&&(m=!1,g(x),x=-1),p=!0;var a=d;try{for(S(n),h=r(s);null!==h&&(!(h.expirationTime>n)||e&&!T());){var o=h.callback;if("function"==typeof o){h.callback=null,d=h.priorityLevel;var l=o(h.expirationTime<=n);n=t.unstable_now(),"function"==typeof l?h.callback=l:h===r(s)&&i(s),S(n)}else i(s);h=r(s)}if(null!==h)var u=!0;else{var f=r(c);null!==f&&F(C,f.startTime-n),u=!1}return u}finally{h=null,d=a,p=!1}}"undefined"!=typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var k,_=!1,E=null,x=-1,P=5,O=-1;function T(){return!(t.unstable_now()-O<P)}function A(){if(null!==E){var e=t.unstable_now();O=e;var n=!0;try{n=E(!0,e)}finally{n?k():(_=!1,E=null)}}else _=!1}if("function"==typeof b)k=function(){b(A)};else if("undefined"!=typeof MessageChannel){var N=new MessageChannel,I=N.port2;N.port1.onmessage=A,k=function(){I.postMessage(null)}}else k=function(){y(A,0)};function R(e){E=e,_||(_=!0,k())}function F(e,n){x=y((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){v||p||(v=!0,R(w))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return r(s)},t.unstable_next=function(e){switch(d){case 1:case 2:case 3:var t=3;break;default:t=d}var n=d;d=t;try{return e()}finally{d=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=d;d=e;try{return t()}finally{d=n}},t.unstable_scheduleCallback=function(e,i,a){var o=t.unstable_now();switch(a="object"==typeof a&&null!==a&&"number"==typeof(a=a.delay)&&0<a?o+a:o,e){case 1:var l=-1;break;case 2:l=250;break;case 5:l=1073741823;break;case 4:l=1e4;break;default:l=5e3}return e={id:f++,callback:i,priorityLevel:e,startTime:a,expirationTime:l=a+l,sortIndex:-1},a>o?(e.sortIndex=a,n(c,e),null===r(s)&&e===r(c)&&(m?(g(x),x=-1):m=!0,F(C,a-o))):(e.sortIndex=l,n(s,e),v||p||(v=!0,R(w))),e},t.unstable_shouldYield=T,t.unstable_wrapCallback=function(e){var t=d;return function(){var n=d;d=t;try{return e.apply(this,arguments)}finally{d=n}}}},840:(e,t,n)=>{"use strict";e.exports=n(53)},774:e=>{e.exports=function(e,t,n,r){var i=n?n.call(r,e,t):void 0;if(void 0!==i)return!!i;if(e===t)return!0;if("object"!=typeof e||!e||"object"!=typeof t||!t)return!1;var a=Object.keys(e),o=Object.keys(t);if(a.length!==o.length)return!1;for(var l=Object.prototype.hasOwnProperty.bind(t),u=0;u<a.length;u++){var s=a[u];if(!l(s))return!1;var c=e[s],f=t[s];if(!1===(i=n?n.call(r,c,f,s):void 0)||void 0===i&&c!==f)return!1}return!0}},250:(e,t,n)=>{"use strict";var r=n(294),i="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},a=r.useState,o=r.useEffect,l=r.useLayoutEffect,u=r.useDebugValue;function s(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!i(e,n)}catch(e){return!0}}var c="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var n=t(),r=a({inst:{value:n,getSnapshot:t}}),i=r[0].inst,c=r[1];return l((function(){i.value=n,i.getSnapshot=t,s(i)&&c({inst:i})}),[e,n,t]),o((function(){return s(i)&&c({inst:i}),e((function(){s(i)&&c({inst:i})}))}),[e]),u(n),n};t.useSyncExternalStore=void 0!==r.useSyncExternalStore?r.useSyncExternalStore:c},139:(e,t,n)=>{"use strict";var r=n(294),i=n(688),a="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},o=i.useSyncExternalStore,l=r.useRef,u=r.useEffect,s=r.useMemo,c=r.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,n,r,i){var f=l(null);if(null===f.current){var h={hasValue:!1,value:null};f.current=h}else h=f.current;f=s((function(){function e(e){if(!u){if(u=!0,o=e,e=r(e),void 0!==i&&h.hasValue){var t=h.value;if(i(t,e))return l=t}return l=e}if(t=l,a(o,e))return t;var n=r(e);return void 0!==i&&i(t,n)?t:(o=e,l=n)}var o,l,u=!1,s=void 0===n?null:n;return[function(){return e(t())},null===s?void 0:function(){return e(s())}]}),[t,n,r,i]);var d=o(e,f[0],f[1]);return u((function(){h.hasValue=!0,h.value=d}),[d]),c(d),d}},688:(e,t,n)=>{"use strict";e.exports=n(250)},798:(e,t,n)=>{"use strict";e.exports=n(139)}},e=>{e(e.s=988)}]);
//# sourceMappingURL=app.js.map